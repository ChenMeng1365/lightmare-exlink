<?xml version="1.0" encoding="UTF-8"?>
<module name="huawei-evpn"
        xmlns="urn:ietf:params:xml:ns:yang:yin:1"
        xmlns:evpn="urn:huawei:yang:huawei-evpn"
        xmlns:acl="urn:huawei:yang:huawei-acl"
        xmlns:ni="urn:huawei:yang:huawei-network-instance"
        xmlns:l3vpn="urn:huawei:yang:huawei-l3vpn"
        xmlns:bd="urn:huawei:yang:huawei-bd"
        xmlns:ifm="urn:huawei:yang:huawei-ifm"
        xmlns:pub-type="urn:huawei:yang:huawei-pub-type"
        xmlns:rtp="urn:huawei:yang:huawei-routing-policy"
        xmlns:inet="urn:ietf:params:xml:ns:yang:ietf-inet-types"
        xmlns:ext="urn:huawei:yang:huawei-extension"
        xmlns:evpl="urn:huawei:yang:huawei-evpl"
        xmlns:bfd="urn:huawei:yang:huawei-bfd"
        xmlns:bgp="urn:huawei:yang:huawei-bgp"
        xmlns:tnlm="urn:huawei:yang:huawei-tunnel-management"
        xmlns:l2vpn="urn:huawei:yang:huawei-l2vpn"
        xmlns:nvo3="urn:huawei:yang:huawei-nvo3"
        xmlns:yang="urn:ietf:params:xml:ns:yang:ietf-yang-types">
  <namespace uri="urn:huawei:yang:huawei-evpn"/>
  <prefix value="evpn"/>
  <import module="huawei-acl">
    <prefix value="acl"/>
  </import>
  <import module="huawei-network-instance">
    <prefix value="ni"/>
  </import>
  <import module="huawei-l3vpn">
    <prefix value="l3vpn"/>
  </import>
  <import module="huawei-bd">
    <prefix value="bd"/>
  </import>
  <import module="huawei-ifm">
    <prefix value="ifm"/>
  </import>
  <import module="huawei-pub-type">
    <prefix value="pub-type"/>
  </import>
  <import module="huawei-routing-policy">
    <prefix value="rtp"/>
  </import>
  <import module="ietf-inet-types">
    <prefix value="inet"/>
  </import>
  <import module="huawei-extension">
    <prefix value="ext"/>
  </import>
  <import module="huawei-evpl">
    <prefix value="evpl"/>
  </import>
  <import module="huawei-bfd">
    <prefix value="bfd"/>
  </import>
  <import module="huawei-bgp">
    <prefix value="bgp"/>
  </import>
  <import module="huawei-tunnel-management">
    <prefix value="tnlm"/>
  </import>
  <import module="huawei-l2vpn">
    <prefix value="l2vpn"/>
  </import>
  <import module="huawei-nvo3">
    <prefix value="nvo3"/>
  </import>
  <import module="ietf-yang-types">
    <prefix value="yang"/>
  </import>
  <include module="huawei-evpn-type"/>
  <organization>
    <text>Huawei Technologies Co., Ltd.</text>
  </organization>
  <contact>
    <text>Huawei Industrial Base
Bantian, Longgang
Shenzhen 518129
People's Republic of China
Website: http://www.huawei.com
Email: support@huawei.com</text>
  </contact>
  <description>
    <text>EVPN configuration.</text>
  </description>
  <revision date="2021-08-12">
    <description>
      <text>Add leaf nexthop-priority in container vpws-evpn.</text>
    </description>
    <reference>
      <text>Huawei private.</text>
    </reference>
  </revision>
  <revision date="2020-05-04">
    <description>
      <text>Add container evpl-peer-info, add leaf local-ctrl-word in container evpl-info.</text>
    </description>
    <reference>
      <text>Huawei private.</text>
    </reference>
  </revision>
  <revision date="2020-04-20">
    <description>
      <text>Add node tunnel-policy-name, modify descriptions of YANG module.</text>
    </description>
    <reference>
      <text>Huawei private.</text>
    </reference>
  </revision>
  <revision date="2019-03-22">
    <description>
      <text>Initial revision.</text>
    </description>
    <reference>
      <text>Huawei private.</text>
    </reference>
  </revision>
  <ext:task-name value="evpnbgp"/>
  <grouping name="mac-duplication-infos-type">
    <description>
      <text>Information aggregation about MAC addresses that are duplicate in an EVPN instance.</text>
    </description>
    <list name="mac-duplication-info">
      <key value="mac-address bd-id"/>
      <description>
        <text>Operational state of information about MAC addresses that are duplicate in an EVPN instance.</text>
      </description>
      <leaf name="mac-address">
        <type name="pub-type:mac-address"/>
        <description>
          <text>MAC address.</text>
        </description>
      </leaf>
      <leaf name="bd-id">
        <type name="uint32">
          <range value="1..16777215"/>
        </type>
        <description>
          <text>Bridge domain ID.</text>
        </description>
      </leaf>
      <leaf name="bd-tag">
        <type name="uint32">
          <range value="1..4094"/>
        </type>
        <description>
          <text>Bridge domain label.</text>
        </description>
      </leaf>
      <leaf name="dampened-times">
        <type name="uint8"/>
        <description>
          <text>Number of times that MAC duplication occurs.</text>
        </description>
      </leaf>
      <leaf name="suppress-flag">
        <type name="boolean"/>
        <description>
          <text>Flag indicating whether MAC duplication is suppressed.</text>
        </description>
      </leaf>
      <leaf name="last-source">
        <type name="string">
          <length value="1..100"/>
        </type>
        <description>
          <text>Source port.</text>
        </description>
      </leaf>
      <leaf name="peer-ip">
        <type name="inet:ipv4-address-no-zone"/>
        <description>
          <text>Peer IP address of a PW.</text>
        </description>
      </leaf>
      <leaf name="vc-id">
        <type name="uint32">
          <range value="1..4294967295"/>
        </type>
        <description>
          <text>PW ID used to uniquely identify a VC.</text>
        </description>
      </leaf>
      <leaf name="vc-type">
        <type name="evpn:l2vpn-encapsulate-type"/>
        <description>
          <text>Encapsulation type of a PW.</text>
        </description>
      </leaf>
      <leaf name="suppress-time">
        <type name="yang:date-and-time"/>
        <description>
          <text>Date and time when MAC duplication was suppressed.</text>
        </description>
      </leaf>
    </list>
  </grouping>
  <grouping name="label-stacks-type">
    <description>
      <text>Label stack.</text>
    </description>
    <list name="label-stack">
      <key value="label-stack level"/>
      <description>
        <text>Operational data of the EVPN label stack.</text>
      </description>
      <leaf name="label-stack">
        <type name="uint32">
          <range value="1..4294967295"/>
        </type>
        <description>
          <text>Label stack index.</text>
        </description>
      </leaf>
      <leaf name="level">
        <type name="uint32">
          <range value="1..4294967295"/>
        </type>
        <description>
          <text>Label level.</text>
        </description>
      </leaf>
      <leaf name="type">
        <type name="string">
          <length value="1..20"/>
        </type>
        <description>
          <text>Label type.</text>
        </description>
      </leaf>
      <leaf name="label">
        <type name="string">
          <length value="1..20"/>
        </type>
        <description>
          <text>Label value.</text>
        </description>
      </leaf>
      <leaf name="out-interface">
        <type name="leafref">
          <path value="/ifm:ifm/ifm:interfaces/ifm:interface/ifm:name"/>
        </type>
        <description>
          <text>Outbound interface name.</text>
        </description>
      </leaf>
    </list>
  </grouping>
  <grouping name="routing-table-type">
    <description>
      <text>Routing table infomation.</text>
    </description>
    <leaf name="nexthop">
      <type name="inet:ip-address-no-zone"/>
      <description>
        <text>Next-hop address to which packets are sent.</text>
      </description>
    </leaf>
    <leaf name="local-preference">
      <type name="uint32"/>
      <description>
        <text>Local priority. The attribute is only fit for the routes from IBGP peer, not suit for which of EBGP peer.</text>
      </description>
    </leaf>
    <leaf name="protocol-preferred-value">
      <type name="uint32">
        <range value="0..4294967295"/>
      </type>
      <description>
        <text>Preferred value of a protocol.</text>
      </description>
    </leaf>
    <leaf name="route-preference">
      <type name="uint8">
        <range value="0..255"/>
      </type>
      <description>
        <text>Preference of a route.</text>
      </description>
    </leaf>
    <leaf name="route-worse-reason">
      <type name="string">
        <length value="1..50"/>
      </type>
      <description>
        <text>Reason why a route is not selected.</text>
      </description>
    </leaf>
    <leaf name="as-path">
      <type name="string">
        <length value="1..300"/>
      </type>
      <description>
        <text>List of the ASs that packets pass through.</text>
      </description>
    </leaf>
    <leaf name="origin">
      <type name="evpn:bgp-origin-type"/>
      <description>
        <text>Origin of a route.</text>
      </description>
    </leaf>
    <leaf name="med">
      <type name="uint32">
        <range value="0..4294967295"/>
      </type>
      <description>
        <text>Route MED in the attribute node. The attribute is only fit for the routes from EBGP peer, not suit for which of IBGP peer.</text>
      </description>
    </leaf>
    <leaf name="route-flag">
      <type name="string">
        <length value="1..100"/>
      </type>
      <description>
        <text>Route flag that contains a string of characters.</text>
      </description>
    </leaf>
    <leaf name="advertised-peers">
      <type name="string">
        <length value="1..300"/>
      </type>
      <description>
        <text>List of sending peers.</text>
      </description>
    </leaf>
    <leaf name="route-duration-time">
      <type name="uint32"/>
      <description>
        <text>Time stamp of a route.</text>
      </description>
    </leaf>
    <leaf name="pmsi">
      <type name="string">
        <length value="1..300"/>
      </type>
      <description>
        <text>PMSI attribute.</text>
      </description>
    </leaf>
    <leaf name="other-attribute">
      <type name="string">
        <length value="1..300"/>
      </type>
      <description>
        <text>Other attribute.</text>
      </description>
    </leaf>
    <leaf name="private-route">
      <type name="string">
        <length value="1..300"/>
      </type>
      <description>
        <text>Private route attribute.</text>
      </description>
    </leaf>
    <leaf name="outbound-interface">
      <type name="string">
        <length value="1..63"/>
      </type>
      <description>
        <text>Name of the outbound interface of a route.</text>
      </description>
    </leaf>
    <leaf name="remote-route-id">
      <type name="inet:ipv4-address-no-zone"/>
      <description>
        <text>Router ID of a peer.</text>
      </description>
    </leaf>
    <leaf name="community">
      <type name="string">
        <length value="1..300"/>
      </type>
      <description>
        <text>Community attribute.</text>
      </description>
    </leaf>
    <leaf name="ext-community">
      <type name="string">
        <length value="1..300"/>
      </type>
      <description>
        <text>Extended community attribute.</text>
      </description>
    </leaf>
    <leaf name="ipv6-ext-community">
      <type name="string">
        <length value="1..300"/>
      </type>
      <description>
        <text>IPv6 extended community attribute.</text>
      </description>
    </leaf>
    <leaf name="large-community">
      <type name="string">
        <length value="1..200"/>
      </type>
      <description>
        <text>Large-community attribute information.</text>
      </description>
    </leaf>
    <leaf name="cluster-list">
      <type name="string">
        <length value="1..300"/>
      </type>
      <description>
        <text>List of Cluster IDs.</text>
      </description>
    </leaf>
    <leaf name="relay-nexthop">
      <type name="inet:ip-address-no-zone"/>
      <description>
        <text>Iterated next hop.</text>
      </description>
    </leaf>
    <leaf name="relay-tunnel-name">
      <type name="string">
        <length value="1..44"/>
      </type>
      <description>
        <text>Name of an iteration tunnel.</text>
      </description>
    </leaf>
    <leaf name="in-label">
      <type name="uint32">
        <range value="0..4294967295"/>
      </type>
      <description>
        <text>In-label.</text>
      </description>
    </leaf>
    <leaf name="out-label">
      <type name="uint32">
        <range value="0..4294967295"/>
      </type>
      <description>
        <text>Out-label.</text>
      </description>
    </leaf>
    <leaf name="originator">
      <type name="inet:ipv4-address-no-zone"/>
      <description>
        <text>Router ID of the route initiator.</text>
      </description>
    </leaf>
  </grouping>
  <container name="evpn">
    <description>
      <text>Configure of EVPN.</text>
    </description>
    <container name="base-process">
      <description>
        <text>Configure of EVPN base process.</text>
      </description>
      <leaf name="redundancy-mode">
        <type name="redundancy-mode"/>
        <default value="all-active"/>
        <description>
          <text>Redundancy mode.</text>
        </description>
      </leaf>
      <leaf name="source-address">
        <ext:operation-exclude value="update"/>
        <type name="inet:ipv4-address-no-zone"/>
        <description>
          <text>Source address.</text>
        </description>
      </leaf>
      <leaf name="evpn-overlay">
        <type name="boolean"/>
        <must condition="(../evpn-overlay!='true' and not(../../instances/instance)) or ../evpn-overlay='true'"/>
        <default value="false"/>
        <description>
          <text>Enable/disable EVPN overlay.</text>
        </description>
      </leaf>
    </container>
    <container name="site">
      <presence value="evpn view"/>
      <description>
        <text>Enable/disable global EVPN configuration.</text>
      </description>
      <leaf name="df-election-mode">
        <type name="df-election-mode"/>
        <default value="per-interface"/>
        <description>
          <text>Global configuration DF election mode.</text>
        </description>
      </leaf>
      <leaf name="vpws-df-election-mode">
        <type name="vpws-df-election-mode"/>
        <default value="per-interface"/>
        <description>
          <text>VPWS DF select mode.</text>
        </description>
      </leaf>
      <leaf name="ac-influnced-enable">
        <type name="boolean"/>
        <default value="false"/>
        <description>
          <text>Enable/disable AC state influenced DF mode.</text>
        </description>
      </leaf>
      <leaf name="ad-per-es-split">
        <type name="ad-per-es-route-divmode"/>
        <default value="dont-divide-rt"/>
        <description>
          <text>EVPN AD per ES route split.</text>
        </description>
      </leaf>
      <leaf name="irb-reoriginated">
        <type name="boolean"/>
        <default value="false"/>
        <description>
          <text>Enable/disable IRB reoriginated without bridge domain.</text>
        </description>
      </leaf>
      <leaf name="vlan-extend-private-enable">
        <type name="boolean"/>
        <default value="false"/>
        <description>
          <text>Enable/disable VLAN extend extcommunity to carry VLAN in MAC routes.</text>
        </description>
      </leaf>
      <leaf name="vlan-extend-redirect-enable">
        <type name="boolean"/>
        <default value="false"/>
        <description>
          <text>Enable/disable VLAN extend extcommunity to redirect to the same ESI interface.</text>
        </description>
      </leaf>
      <leaf name="local-remote-frr-enable">
        <type name="boolean"/>
        <default value="false"/>
        <description>
          <text>Enable/disable local MAC and remote MAC to form FRR.</text>
        </description>
      </leaf>
      <leaf name="bypass-vxlan-enable">
        <type name="boolean"/>
        <default value="false"/>
        <description>
          <text>Enable/disable bypass VXLAN extcommunity, use for allow all-active device to form bypass VXLAN.</text>
        </description>
      </leaf>
      <leaf name="alm-threshold">
        <type name="uint32">
          <range value="1..4294967295"/>
        </type>
        <description>
          <text>Specify the alarm route threshold.</text>
        </description>
      </leaf>
      <leaf name="recovery-percentage">
        <when condition="../alm-threshold"/>
        <type name="uint32">
          <range value="1..95"/>
        </type>
        <units name="%"/>
        <default value="80"/>
        <description>
          <text>Specify the alarm route recovery percentage.</text>
        </description>
      </leaf>
      <leaf name="local-remote-vpws-frr-enable">
        <type name="boolean"/>
        <default value="false"/>
        <description>
          <text>Enable/disable the local and remote FRR for EVPN VPWS.</text>
        </description>
      </leaf>
      <leaf name="remote-vpws-frr-enable">
        <type name="boolean"/>
        <default value="false"/>
        <description>
          <text>Enable/disable the remote FRR for EVPN VPWS.</text>
        </description>
      </leaf>
      <leaf name="irb-split-group">
        <type name="boolean"/>
        <default value="true"/>
        <description>
          <text>Enable/disable IRB advertise under split group.</text>
        </description>
      </leaf>
      <leaf name="compatible">
        <type name="boolean"/>
        <default value="false"/>
        <description>
          <text>Enable/disable IRB routing rebirth into ARP routing and prefix routing.</text>
        </description>
      </leaf>
      <leaf name="advertising-vxlan-tunnel-mac">
        <type name="boolean"/>
        <default value="false"/>
        <description>
          <text>Enable/disable advertising MAC routes learned by VXLAN tunnel.</text>
        </description>
      </leaf>
      <leaf name="advertise-suppressed-route">
        <type name="boolean"/>
        <default value="false"/>
        <description>
          <text>Enable/disable advertising suppressed detail route.</text>
        </description>
      </leaf>
      <leaf name="routerid-extend-private-enable">
        <type name="boolean"/>
        <default value="false"/>
        <description>
          <text>Enable/disable router ID extend extcommunity for carrying router ID in EVPN routes.</text>
        </description>
      </leaf>
      <leaf name="mac-duplication-enable">
        <type name="boolean"/>
        <default value="true"/>
        <description>
          <text>Enable/disable mac-duplication.</text>
        </description>
      </leaf>
      <leaf name="nexthop-recursive-lookup-restrain">
        <type name="boolean"/>
        <default value="true"/>
        <description>
          <text>Enable/disable EVPN nexthop recursive lookup restrain.</text>
        </description>
      </leaf>
      <leaf name="adv-dci-local-rt-to-mpls">
        <type name="boolean"/>
        <default value="false"/>
        <description>
          <text>Enable/disable advertising DCI local route to MPLS peer.</text>
        </description>
      </leaf>
      <container name="mac-duplication">
        <description>
          <text>Configure MAC duplication.</text>
        </description>
        <leaf name="period">
          <type name="uint8">
            <range value="3..10"/>
          </type>
          <default value="5"/>
          <description>
            <text>Number of times that MAC duplication is detected in a period.</text>
          </description>
        </leaf>
        <leaf name="cycle">
          <type name="uint16">
            <range value="60..900"/>
          </type>
          <units name="s"/>
          <must condition="../cycle mod 10 = 0"/>
          <default value="180"/>
          <description>
            <text>Interval at which MAC duplication is detected.</text>
          </description>
        </leaf>
        <leaf name="recycle">
          <type name="uint16">
            <range value="120..3600"/>
          </type>
          <units name="s"/>
          <must condition="../recycle mod 10 = 0"/>
          <default value="540"/>
          <description>
            <text>Period after which suppression on MAC duplication is removed.</text>
          </description>
        </leaf>
      </container>
      <container name="static-esis">
        <description>
          <text>List of static ESI.</text>
        </description>
        <list name="static-esi">
          <key value="esi"/>
          <description>
            <text>Configure instance of static ESI.</text>
          </description>
          <leaf name="esi">
            <type name="esi"/>
            <description>
              <text>Static ESI, in the format of 00xx.xxxx.xxxx.xxxx.xxxx, in which x ranges from 0 to F. A static ESI cannot be all 0s.</text>
            </description>
          </leaf>
          <leaf name="redundancy-mode">
            <type name="esi-redundancy-mode"/>
            <default value="none"/>
            <description>
              <text>Redundancy mode.</text>
            </description>
          </leaf>
          <leaf name="df-election-type">
            <type name="df-election-type"/>
            <default value="default"/>
            <description>
              <text>The DF election type of ESI.</text>
            </description>
          </leaf>
          <leaf name="preference">
            <when condition="../df-election-type='preference-based'"/>
            <type name="uint16">
              <range value="0..65535"/>
            </type>
            <default value="32767"/>
            <description>
              <text>The preference of ESI.</text>
            </description>
          </leaf>
          <leaf name="non-revertive">
            <when condition="../df-election-type='preference-based'"/>
            <type name="boolean"/>
            <default value="false"/>
            <description>
              <text>Enable/disable non-revertive mode.</text>
            </description>
          </leaf>
          <leaf name="df-election">
            <when condition="../redundancy-mode='single-active'"/>
            <type name="boolean"/>
            <must condition="(current()='true' and (not(/ifm:ifm/ifm:interfaces/ifm:interface[evpn:evpn/evpn:esi=current()/../esi]/ifm:type) or (/ifm:ifm/ifm:interfaces/ifm:interface[evpn:evpn/evpn:esi=current()/../esi]/ifm:type!='Virtual-Ethernet'))) or current()='false'"/>
            <default value="false"/>
            <description>
              <text>Enable/disable DF election mode.</text>
            </description>
          </leaf>
        </list>
      </container>
      <container name="dynamic-esis">
        <description>
          <text>List of dynamic ESI.</text>
        </description>
        <list name="dynamic-esi">
          <key value="esi-name"/>
          <description>
            <text>Configure instance of dynamic ESI.</text>
          </description>
          <leaf name="esi-name">
            <type name="string">
              <length value="1..31"/>
            </type>
            <description>
              <text>Dynamic ESI name is a string of 1 to 31 characters, which begins with a-z or A-Z.</text>
            </description>
          </leaf>
          <leaf name="redundancy-mode">
            <type name="esi-redundancy-mode"/>
            <default value="none"/>
            <description>
              <text>Redundancy mode.</text>
            </description>
          </leaf>
          <leaf name="df-election-type">
            <type name="df-election-type"/>
            <default value="default"/>
            <description>
              <text>The DF election type of ESI.</text>
            </description>
          </leaf>
          <leaf name="preference">
            <when condition="../df-election-type='preference-based'"/>
            <type name="uint16">
              <range value="0..65535"/>
            </type>
            <default value="32767"/>
            <description>
              <text>The preference of ESI.</text>
            </description>
          </leaf>
          <leaf name="non-revertive">
            <when condition="../df-election-type='preference-based'"/>
            <type name="boolean"/>
            <default value="false"/>
            <description>
              <text>Enable/disable non-revertive mode.</text>
            </description>
          </leaf>
        </list>
      </container>
    </container>
    <container name="instances">
      <description>
        <text>List of EVPN instance.</text>
      </description>
      <list name="instance">
        <key value="name"/>
        <unique tag="normal-evpn/rd"/>
        <unique tag="b-evpn/rd"/>
        <unique tag="bd-evpn/rd"/>
        <unique tag="vpws-evpn/rd"/>
        <description>
          <text>Configure EVPN instance.</text>
        </description>
        <leaf name="name">
          <type name="name-type">
            <length value="1..31"/>
          </type>
          <must condition="../name!='_public_'"/>
          <description>
            <text>EVPN instance name.</text>
          </description>
        </leaf>
        <leaf name="type">
          <ext:operation-exclude value="update|delete"/>
          <type name="evpn-type"/>
          <default value="normal"/>
          <description>
            <text>The value specifies the type of EVPN instance.</text>
          </description>
        </leaf>
        <leaf name="label-policy">
          <type name="evpn-apply-label-mode"/>
          <config value="false"/>
          <description>
            <text>Label policy of the EVPN instance.</text>
          </description>
        </leaf>
        <container name="normal-evpn">
          <when condition="../type = 'normal'"/>
          <description>
            <text>Configure normal mode of EVPN instance.</text>
          </description>
          <leaf name="description">
            <type name="string">
              <length value="1..63"/>
              <pattern value="([^?]*)"/>
            </type>
            <description>
              <text>The description for EVPN instance.</text>
            </description>
          </leaf>
          <leaf name="rd">
            <ext:operation-exclude value="update"/>
            <type name="string">
              <length value="3..21"/>
            </type>
            <description>
              <text>An EVPN instance address family takes effect only after it is configured with an RD. The RD can be in any of the following formats:
1. 16-bit AS number:32-bit user-defined number, 101:3 for example. A 16-bit AS number ranges from 0 to 65535, and a user-defined number ranges from 0 to 4294967295. The AS number and user-defined number cannot be both 0s. This means that the RD value cannot be 0:0.
2. 32-bit IP address:16-bit user-defined number, 192.168.122.15:1 for example. The IP address ranges from 0.0.0.0 to 255.255.255.255, and the user-defined number ranges from 0 to 65535.
3. 32-bit AS number:16-bit user-defined number, 10.11:3 for example. A 32-bit AS number ranges from 0.0 to 65535.65535 or from 0 to 4294967295, and a user-defined number ranges from 0 to 65535. The AS number and user-defined number cannot be both 0s. This means that the RD value cannot be 0.0:0.</text>
            </description>
          </leaf>
          <leaf name="tunnel-policy-name">
            <when condition="../rd"/>
            <type name="leafref">
              <path value="/tnlm:tunnel-management/tnlm:tunnel-policys/tnlm:tunnel-policy/tnlm:name"/>
            </type>
            <must condition="not(/tnlm:tunnel-management/tnlm:tunnel-policys/tnlm:tunnel-policy[tnlm:name=current()]/tnlm:ipv6-set/tnlm:select-sequence/tnlm:select-tunnel-types/tnlm:select-tunnel-type) and /tnlm:tunnel-management/tnlm:tunnel-policys/tnlm:tunnel-policy[tnlm:name=current()]/tnlm:ipv4-set/tnlm:select-sequence/tnlm:select-tunnel-types/tnlm:select-tunnel-type[tnlm:type!='gre']"/>
            <description>
              <text>Tunnel policy name.</text>
            </description>
          </leaf>
          <leaf name="import-policy-name">
            <when condition="../rd"/>
            <type name="leafref">
              <path value="/rtp:routing-policy/rtp:policy-definitions/rtp:policy-definition/rtp:name"/>
            </type>
            <description>
              <text>The name of specify import route policy.</text>
            </description>
          </leaf>
          <leaf name="export-policy-name">
            <when condition="../rd"/>
            <type name="leafref">
              <path value="/rtp:routing-policy/rtp:policy-definitions/rtp:policy-definition/rtp:name"/>
            </type>
            <description>
              <text>The name of specify export route policy.</text>
            </description>
          </leaf>
          <leaf name="local-remote-frr">
            <type name="local-remote-frr-enable-type"/>
            <default value="default"/>
            <description>
              <text>Enable/disable local MAC and remote MAC to form FRR.</text>
            </description>
          </leaf>
          <leaf name="mac-balance-enable">
            <type name="boolean"/>
            <default value="false"/>
            <description>
              <text>Enable/disable MAC balance.</text>
            </description>
          </leaf>
          <leaf name="isolate-spoken">
            <type name="isolate-spoken-type"/>
            <default value="default"/>
            <description>
              <text>Forwarding isolation between AC interfaces under EVPN.</text>
            </description>
          </leaf>
          <leaf name="export-acl-name-or-id">
            <type name="leafref">
              <path value="/acl:acl/acl:groups/acl:group/acl:identity"/>
            </type>
            <description>
              <text>Name or number of an IPv4 ACL used by a filtering policy to filter the routes to be advertised to a specified peer. The number ranges from 4000 to 4999, and the name must start with a letter.</text>
            </description>
          </leaf>
          <leaf name="import-acl-name-or-id">
            <type name="leafref">
              <path value="/acl:acl/acl:groups/acl:group/acl:identity"/>
            </type>
            <description>
              <text>Name or number of an IPv4 ACL used by a filtering policy to filter the routes received from a specified peer. The number ranges from 4000 to 4999, and the name must start with a letter. By default, no ACL-based filtering policy is configured, and therefore all EVN BGP routes can be accepted.</text>
            </description>
          </leaf>
          <leaf name="etree-enable">
            <type name="boolean"/>
            <default value="false"/>
            <description>
              <text>Enable/disable EVPN E-Tree.</text>
            </description>
          </leaf>
          <leaf name="control-word">
            <type name="boolean"/>
            <default value="false"/>
            <description>
              <text>Enable/disable EVPN control word.</text>
            </description>
          </leaf>
          <leaf name="nexthop-recursive-lookup-restrain">
            <type name="boolean"/>
            <default value="true"/>
            <description>
              <text>Enable/disable EVPN nexthop recursive lookup restrain.</text>
            </description>
          </leaf>
          <container name="rts">
            <when condition="../rd"/>
            <description>
              <text>List of RTs.</text>
            </description>
            <list name="rt">
              <key value="vrf-rt-type vrf-rt-value"/>
              <description>
                <text>Configure RTs to control route advertisement between network nodes. Before sending a VPN route to a PE, the local PE adds an Export RT to the route. After receiving a route from another PE, the local PE compares the local Import RT and the Export RT carried in the VPN route and adds the route to the VPN instance only when the two RTs are the same.</text>
              </description>
              <leaf name="vrf-rt-type">
                <type name="vrf-rt-type"/>
                <description>
                  <text>RT type (export-extcommunity or import-extcommunity)
export-extcommunity: Specifies the value of the extended community attribute of the route from an outbound interface to the destination VPN.
import-extcommunity: Specifies the value of the extended community attribute. Routes with such an extended community value can be accepted.</text>
                </description>
              </leaf>
              <leaf name="vrf-rt-value">
                <type name="string">
                  <length value="3..21"/>
                </type>
                <description>
                  <text>RT value, in any of the following formats:
1. 16-bit AS number:32-bit user-defined number, 1:3 for example. A 16-bit AS number ranges from 0 to 65535, and a user-defined number ranges from 0 to 4294967295. The AS number and user-defined number cannot be both 0s. This means that the VPN Target value cannot be 0:0.
2. 32-bit IP address:16-bit user-defined number, 192.168.122.15:1 for example. The IP address ranges from 0.0.0.0 to 255.255.255.255, and the user-defined number ranges from 0 to 65535.
3. 32-bit AS number:16-bit user-defined number, 10.11:3 for example. A 32-bit AS number ranges from 0.0 to 65535.65535 or from 0 to 4294967295, and a user-defined number ranges from 0 to 65535. The AS number and user-defined number cannot be both 0s. This means that the VPN Target value cannot be 0.0:0.</text>
                </description>
              </leaf>
            </list>
          </container>
          <container name="mac-duplication">
            <presence value="normal MAC duplication"/>
            <description>
              <text>Enable/disable MAC duplication.</text>
            </description>
            <leaf name="period">
              <type name="uint8">
                <range value="3..10"/>
              </type>
              <must condition="(../period and ../cycle) or (not(../period) and not(../cycle))"/>
              <description>
                <text>Number of times that MAC duplication is detected in a period.</text>
              </description>
            </leaf>
            <leaf name="cycle">
              <type name="uint16">
                <range value="60..900"/>
              </type>
              <units name="s"/>
              <must condition="(../cycle mod 10 = 0) and ((../period and ../cycle) or (not(../period) and not(../cycle)))"/>
              <description>
                <text>Interval at which MAC duplication is detected. The value must be a multiple of 10.</text>
              </description>
            </leaf>
            <leaf name="recycle">
              <type name="uint16">
                <range value="120..3600"/>
              </type>
              <units name="s"/>
              <must condition="../recycle mod 10 = 0"/>
              <description>
                <text>Period after which suppression on MAC duplication is removed. The value must be a multiple of 10.</text>
              </description>
            </leaf>
            <leaf name="blackhole">
              <type name="boolean"/>
              <default value="false"/>
              <description>
                <text>Enable/disable a blackhole flag.</text>
              </description>
            </leaf>
          </container>
          <container name="mac-duplication-infos">
            <config value="false"/>
            <description>
              <text>Operational state of information aggregation about MAC addresses that are duplicate in an EVPN instance.</text>
            </description>
            <uses name="mac-duplication-infos-type"/>
          </container>
        </container>
        <container name="b-evpn">
          <when condition="../type = 'b-evpn'"/>
          <description>
            <text>Configure backbone mode of EVPN instance.</text>
          </description>
          <leaf name="description">
            <type name="string">
              <length value="1..63"/>
              <pattern value="([^?]*)"/>
            </type>
            <description>
              <text>The description for EVPN instance.</text>
            </description>
          </leaf>
          <leaf name="rd">
            <ext:operation-exclude value="update"/>
            <type name="string">
              <length value="3..21"/>
            </type>
            <description>
              <text>An EVPN instance address family takes effect only after it is configured with an RD. The RD can be in any of the following formats:
1. 16-bit AS number:32-bit user-defined number, 101:3 for example. A 16-bit AS number ranges from 0 to 65535, and a user-defined number ranges from 0 to 4294967295. The AS number and user-defined number cannot be both 0s. This means that the RD value cannot be 0:0.
2. 32-bit IP address:16-bit user-defined number, 192.168.122.15:1 for example. The IP address ranges from 0.0.0.0 to 255.255.255.255, and the user-defined number ranges from 0 to 65535.
3. 32-bit AS number:16-bit user-defined number, 10.11:3 for example. A 32-bit AS number ranges from 0.0 to 65535.65535 or from 0 to 4294967295, and a user-defined number ranges from 0 to 65535. The AS number and user-defined number cannot be both 0s. This means that the RD value cannot be 0.0:0.</text>
            </description>
          </leaf>
          <leaf name="bmac">
            <when condition="../rd"/>
            <type name="pub-type:mac-address">
              <length value="0..255"/>
            </type>
            <description>
              <text>Backbone bridging source MAC.</text>
            </description>
          </leaf>
          <leaf name="tunnel-policy-name">
            <when condition="../rd"/>
            <type name="leafref">
              <path value="/tnlm:tunnel-management/tnlm:tunnel-policys/tnlm:tunnel-policy/tnlm:name"/>
            </type>
            <must condition="not(/tnlm:tunnel-management/tnlm:tunnel-policys/tnlm:tunnel-policy[tnlm:name=current()]/tnlm:ipv6-set/tnlm:select-sequence/tnlm:select-tunnel-types/tnlm:select-tunnel-type) and /tnlm:tunnel-management/tnlm:tunnel-policys/tnlm:tunnel-policy[tnlm:name=current()]/tnlm:ipv4-set/tnlm:select-sequence/tnlm:select-tunnel-types/tnlm:select-tunnel-type[tnlm:type!='gre'] and /tnlm:tunnel-management/tnlm:tunnel-policys/tnlm:tunnel-policy[tnlm:name=current()]/tnlm:ipv4-set/tnlm:select-sequence/tnlm:select-tunnel-types/tnlm:select-tunnel-type[tnlm:type!='sr-te-policy'] and /tnlm:tunnel-management/tnlm:tunnel-policys/tnlm:tunnel-policy[tnlm:name=current()]/tnlm:ipv4-set/tnlm:select-sequence/tnlm:select-tunnel-types/tnlm:select-tunnel-type[tnlm:type!='bgp']"/>
            <description>
              <text>Tunnel policy name.</text>
            </description>
          </leaf>
          <leaf name="nexthop-recursive-lookup-restrain">
            <type name="boolean"/>
            <default value="true"/>
            <description>
              <text>Enable/disable EVPN nexthop recursive lookup restrain.</text>
            </description>
          </leaf>
          <container name="rts">
            <when condition="../rd"/>
            <description>
              <text>List of RTs.</text>
            </description>
            <list name="rt">
              <key value="vrf-rt-type vrf-rt-value"/>
              <description>
                <text>Configure RTs to control route advertisement between network nodes. Before sending a VPN route to a PE, the local PE adds an Export RT to the route. After receiving a route from another PE, the local PE compares the local Import RT and the Export RT carried in the VPN route and adds the route to the VPN instance only when the two RTs are the same.</text>
              </description>
              <leaf name="vrf-rt-type">
                <type name="vrf-rt-type"/>
                <description>
                  <text>RT type (export-extcommunity or import-extcommunity)
export-extcommunity: Specifies the value of the extended community attribute of the route from an outbound interface to the destination VPN.
import-extcommunity: Specifies the value of the extended community attribute. Routes with such an extended community value can be accepted.</text>
                </description>
              </leaf>
              <leaf name="vrf-rt-value">
                <type name="string">
                  <length value="3..21"/>
                </type>
                <description>
                  <text>RT value, in any of the following formats:
1. 16-bit AS number:32-bit user-defined number, 1:3 for example. A 16-bit AS number ranges from 0 to 65535, and a user-defined number ranges from 0 to 4294967295. The AS number and user-defined number cannot be both 0s. This means that the VPN Target value cannot be 0:0.
2. 32-bit IP address:16-bit user-defined number, 192.168.122.15:1 for example. The IP address ranges from 0.0.0.0 to 255.255.255.255, and the user-defined number ranges from 0 to 65535.
3. 32-bit AS number:16-bit user-defined number, 10.11:3 for example. A 32-bit AS number ranges from 0.0 to 65535.65535 or from 0 to 4294967295, and a user-defined number ranges from 0 to 65535. The AS number and user-defined number cannot be both 0s. This means that the VPN Target value cannot be 0.0:0.</text>
                </description>
              </leaf>
            </list>
          </container>
        </container>
        <container name="i-evpn">
          <when condition="../type = 'i-evpn'"/>
          <description>
            <text>Configure PBB EVPN instance.</text>
          </description>
          <leaf name="description">
            <type name="string">
              <length value="1..63"/>
              <pattern value="([^?]*)"/>
            </type>
            <description>
              <text>The description for EVPN instance.</text>
            </description>
          </leaf>
          <leaf name="tag">
            <ext:operation-exclude value="update"/>
            <type name="uint32">
              <range value="0..16777215"/>
            </type>
            <description>
              <text>Specify an I-SID.</text>
            </description>
          </leaf>
          <leaf name="b-evpn-name">
            <ext:operation-exclude value="update"/>
            <when condition="../tag"/>
            <type name="leafref">
              <path value="/evpn:evpn/evpn:instances/evpn:instance/evpn:name"/>
            </type>
            <must condition="/evpn:evpn/evpn:instances/evpn:instance[evpn:name=current()]/evpn:type='b-evpn'"/>
            <description>
              <text>Binding an I-EVPN instance with a B-EVPN instance.</text>
            </description>
          </leaf>
          <leaf name="bmac">
            <when condition="../tag"/>
            <type name="pub-type:mac-address">
              <length value="0..255"/>
            </type>
            <description>
              <text>Backbone bridging source MAC.</text>
            </description>
          </leaf>
        </container>
        <container name="bd-evpn">
          <when condition="../type = 'bd-evpn'"/>
          <description>
            <text>Configure BD exclusive mode of EVPN instance.</text>
          </description>
          <leaf name="description">
            <type name="string">
              <length value="1..63"/>
              <pattern value="([^?]*)"/>
            </type>
            <description>
              <text>The description for EVPN instance.</text>
            </description>
          </leaf>
          <leaf name="rd">
            <ext:operation-exclude value="update"/>
            <type name="string">
              <length value="3..21"/>
            </type>
            <description>
              <text>An EVPN instance address family takes effect only after it is configured with an RD. The RD can be in any of the following formats:
1. 16-bit AS number:32-bit user-defined number, 101:3 for example. A 16-bit AS number ranges from 0 to 65535, and a user-defined number ranges from 0 to 4294967295. The AS number and user-defined number cannot be both 0s. This means that the RD value cannot be 0:0.
2. 32-bit IP address:16-bit user-defined number, 192.168.122.15:1 for example. The IP address ranges from 0.0.0.0 to 255.255.255.255, and the user-defined number ranges from 0 to 65535.
3. 32-bit AS number:16-bit user-defined number, 10.11:3 for example. A 32-bit AS number ranges from 0.0 to 65535.65535 or from 0 to 4294967295, and a user-defined number ranges from 0 to 65535. The AS number and user-defined number cannot be both 0s. This means that the RD value cannot be 0.0:0.</text>
            </description>
          </leaf>
          <leaf name="import-policy-name">
            <when condition="../rd"/>
            <type name="leafref">
              <path value="/rtp:routing-policy/rtp:policy-definitions/rtp:policy-definition/rtp:name"/>
            </type>
            <description>
              <text>The name of specify import route policy.</text>
            </description>
          </leaf>
          <leaf name="export-policy-name">
            <when condition="../rd"/>
            <type name="leafref">
              <path value="/rtp:routing-policy/rtp:policy-definitions/rtp:policy-definition/rtp:name"/>
            </type>
            <description>
              <text>The name of specify export route policy.</text>
            </description>
          </leaf>
          <leaf name="tunnel-policy-name">
            <when condition="../rd"/>
            <type name="leafref">
              <path value="/tnlm:tunnel-management/tnlm:tunnel-policys/tnlm:tunnel-policy/tnlm:name"/>
            </type>
            <must condition="(not(/tnlm:tunnel-management/tnlm:tunnel-policys/tnlm:tunnel-policy[tnlm:name=current()]/tnlm:ipv6-set/tnlm:select-sequence) or (/tnlm:tunnel-management/tnlm:tunnel-policys/tnlm:tunnel-policy[tnlm:name=current()]/tnlm:ipv6-set/tnlm:select-sequence and /tnlm:tunnel-management/tnlm:tunnel-policys/tnlm:tunnel-policy[tnlm:name=current()]/tnlm:ipv6-set/tnlm:select-sequence/tnlm:select-tunnel-types/tnlm:select-tunnel-type[tnlm:type!='srv6-te-flow-group'])) and (not(/tnlm:tunnel-management/tnlm:tunnel-policys/tnlm:tunnel-policy[tnlm:name=current()]/tnlm:ipv4-set/tnlm:select-sequence) or (/tnlm:tunnel-management/tnlm:tunnel-policys/tnlm:tunnel-policy[tnlm:name=current()]/tnlm:ipv4-set/tnlm:select-sequence and /tnlm:tunnel-management/tnlm:tunnel-policys/tnlm:tunnel-policy[tnlm:name=current()]/tnlm:ipv4-set/tnlm:select-sequence/tnlm:select-tunnel-types/tnlm:select-tunnel-type[tnlm:type!='gre']))"/>
            <description>
              <text>Tunnel policy name.</text>
            </description>
          </leaf>
          <leaf name="local-remote-frr">
            <type name="local-remote-frr-enable-type"/>
            <default value="default"/>
            <description>
              <text>Enable local MAC and remote MAC to form FRR.</text>
            </description>
          </leaf>
          <leaf name="default-color">
            <when condition="../rd"/>
            <type name="uint32">
              <range value="0..4294967295"/>
            </type>
            <description>
              <text>Set default color for nexthop iteration.</text>
            </description>
          </leaf>
          <leaf name="mac-balance-enable">
            <type name="boolean"/>
            <default value="false"/>
            <description>
              <text>Enable/disable MAC balance.</text>
            </description>
          </leaf>
          <leaf name="export-acl-name-or-id">
            <type name="leafref">
              <path value="/acl:acl/acl:groups/acl:group/acl:identity"/>
            </type>
            <description>
              <text>Name or number of an IPv4 ACL used by a filtering policy to filter the routes to be advertised to a specified peer. The number ranges from 4000 to 4999, and the name must start with a letter. By default, no ACL-based filtering policy is configured, and therefore all EVN BGP routes can be advertised.</text>
            </description>
          </leaf>
          <leaf name="import-acl-name-or-id">
            <type name="leafref">
              <path value="/acl:acl/acl:groups/acl:group/acl:identity"/>
            </type>
            <description>
              <text>Name or number of an IPv4 ACL used by a filtering policy to filter the routes received from a specified peer. The number ranges from 4000 to 4999, and the name must start with a letter. By default, no ACL-based filtering policy is configured, and therefore all EVN BGP routes can be accepted.</text>
            </description>
          </leaf>
          <leaf name="bypass-vxlan">
            <type name="bypass-vxlan-enable-type"/>
            <default value="default"/>
            <description>
              <text>Enable bypass VXLAN capability.</text>
            </description>
          </leaf>
          <leaf name="etree-enable">
            <type name="boolean"/>
            <must condition="(../etree-enable='true' and not(../inclusive-provider-tunnel)) or (../etree-enable='false')"/>
            <default value="false"/>
            <description>
              <text>Enable/disable EVPN E-Tree.</text>
            </description>
          </leaf>
          <leaf name="srv6-mode">
            <when condition="../rd"/>
            <type name="srv6-mode"/>
            <must condition="../control-word!='true'"/>
            <description>
              <text>SRv6 iteration mode.</text>
            </description>
          </leaf>
          <leaf name="down-switch">
            <when condition="../rd and ../srv6-mode='te'"/>
            <type name="boolean"/>
            <default value="false"/>
            <description>
              <text>Enable/disable switch TE to BE if the associated TE tunnel goes down.</text>
            </description>
          </leaf>
          <leaf name="control-word">
            <type name="boolean"/>
            <must condition="(../control-word='true' and not(../srv6-mode)) or ../control-word!='true'"/>
            <default value="false"/>
            <description>
              <text>Enable/disable EVPN control word.</text>
            </description>
          </leaf>
          <leaf name="mac-route-advertise">
            <type name="mac-route-no-advertise-type"/>
            <default value="enable"/>
            <description>
              <text>Enable/disable local MAC routes from being advertised.</text>
            </description>
          </leaf>
          <leaf name="arp-route-generate-mac">
            <type name="mac-route-no-advertise-type"/>
            <default value="disable"/>
            <description>
              <text>Enable/disable MAC/IP route to generate MAC.</text>
            </description>
          </leaf>
          <leaf name="mac-only-route-generate">
            <type name="mac-route-no-advertise-type"/>
            <default value="enable"/>
            <description>
              <text>Enable/disable the function of generating EVPN MAC routes when both MAC address entries and ARP/ND entries contain local MAC addresses.</text>
            </description>
          </leaf>
          <leaf name="mac-frr-keep">
            <type name="boolean"/>
            <default value="true"/>
            <description>
              <text>Enable/disable the function of keeping MAC to form FRR.</text>
            </description>
          </leaf>
          <leaf name="nexthop-recursive-lookup-restrain">
            <type name="boolean"/>
            <default value="true"/>
            <description>
              <text>Enable/disable EVPN nexthop recursive lookup restrain.</text>
            </description>
          </leaf>
          <container name="rts">
            <when condition="../rd"/>
            <description>
              <text>List of RTs.</text>
            </description>
            <list name="rt">
              <key value="vrf-rt-type vrf-rt-value"/>
              <description>
                <text>Configure RTs to control route advertisement between network nodes. Before sending a VPN route to a PE, the local PE adds an Export RT to the route. After receiving a route from another PE, the local PE compares the local Import RT and the Export RT carried in the VPN route and adds the route to the VPN instance only when the two RTs are the same.</text>
              </description>
              <leaf name="vrf-rt-type">
                <type name="vrf-rt-type"/>
                <description>
                  <text>RT type (export-extcommunity or import-extcommunity)
export-extcommunity: Specifies the value of the extended community attribute of the route from an outbound interface to the destination VPN.
import-extcommunity: Specifies the value of the extended community attribute. Routes with such an extended community value can be accepted.</text>
                </description>
              </leaf>
              <leaf name="vrf-rt-value">
                <type name="string">
                  <length value="3..21"/>
                </type>
                <description>
                  <text>RT value, in any of the following formats:
1. 16-bit AS number:32-bit user-defined number, 1:3 for example. A 16-bit AS number ranges from 0 to 65535, and a user-defined number ranges from 0 to 4294967295. The AS number and user-defined number cannot be both 0s. This means that the VPN Target value cannot be 0:0.
2. 32-bit IP address:16-bit user-defined number, 192.168.122.15:1 for example. The IP address ranges from 0.0.0.0 to 255.255.255.255, and the user-defined number ranges from 0 to 65535.
3. 32-bit AS number:16-bit user-defined number, 10.11:3 for example. A 32-bit AS number ranges from 0.0 to 65535.65535 or from 0 to 4294967295, and a user-defined number ranges from 0 to 65535. The AS number and user-defined number cannot be both 0s. This means that the VPN Target value cannot be 0.0:0.</text>
                </description>
              </leaf>
            </list>
          </container>
          <container name="mac-duplication">
            <presence value="bd MAC duplication"/>
            <description>
              <text>Enable/disable MAC duplication.</text>
            </description>
            <leaf name="period">
              <type name="uint8">
                <range value="3..10"/>
              </type>
              <must condition="(../period and ../cycle) or (not(../period) and not(../cycle))"/>
              <description>
                <text>Number of times that MAC duplication is detected in a period.</text>
              </description>
            </leaf>
            <leaf name="cycle">
              <type name="uint16">
                <range value="60..900"/>
              </type>
              <units name="s"/>
              <must condition="(../cycle mod 10 = 0) and ((../period and ../cycle) or (not(../period) and not(../cycle)))"/>
              <description>
                <text>Interval at which MAC duplication is detected. The value must be a multiple of 10.</text>
              </description>
            </leaf>
            <leaf name="recycle">
              <type name="uint16">
                <range value="120..3600"/>
              </type>
              <units name="s"/>
              <must condition="../recycle mod 10 = 0"/>
              <description>
                <text>Period after which suppression on MAC duplication is removed. The value must be a multiple of 10.</text>
              </description>
            </leaf>
            <leaf name="blackhole">
              <type name="boolean"/>
              <default value="false"/>
              <description>
                <text>Enable/disable a blackhole flag.</text>
              </description>
            </leaf>
            <leaf name="source-blackhole">
              <when condition="../blackhole='true'"/>
              <type name="boolean"/>
              <default value="false"/>
              <description>
                <text>Enable/disable blackhole flag. After MAC duplication is suppressed, if a blackhole flag is set, the source port is blocked. If no blackhole flag is set, the source port is not blocked.</text>
              </description>
            </leaf>
          </container>
          <container name="mac-duplication-infos">
            <config value="false"/>
            <description>
              <text>Operational state of information aggregation about MAC addresses that are duplicate in an EVPN instance.</text>
            </description>
            <uses name="mac-duplication-infos-type"/>
          </container>
          <container name="inclusive-provider-tunnel">
            <must condition="(../control-word!='true' and ../etree-enable!='true' and not(../srv6-mode)) or not(../inclusive-provider-tunnel)"/>
            <presence value="EVI-IPMSI view"/>
            <description>
              <text>Enable/disable mLDP P2MP configuration.</text>
            </description>
            <container name="root">
              <presence value="EVI-IPMSI view"/>
              <description>
                <text>Enable/disable mLDP P2MP root configuration.</text>
              </description>
              <leaf name="data-switch-disable">
                <type name="boolean"/>
                <default value="false"/>
                <description>
                  <text>Enable/disable data switch configuration.</text>
                </description>
              </leaf>
              <leaf name="data-delay-time">
                <type name="uint32">
                  <range value="1..300"/>
                </type>
                <units name="s"/>
                <description>
                  <text>Set a hold-off time for an mLDP P2MP tunnel to go Up.</text>
                </description>
              </leaf>
              <container name="p2mp">
                <presence value="MLDP P2MP view"/>
                <description>
                  <text>Enable/disable mLDP P2MP configuration.</text>
                </description>
                <leaf name="root-ip">
                  <type name="inet:ipv4-address-no-zone"/>
                  <description>
                    <text>Root address of P2MP tunnel.</text>
                  </description>
                </leaf>
                <leaf name="opaque-value">
                  <type name="string">
                    <length value="1..4096"/>
                  </type>
                  <config value="false"/>
                  <description>
                    <text>Opaque value (in the TLV format) that is carried in packets and is not decoded.</text>
                  </description>
                </leaf>
                <leaf name="state">
                  <type name="evpn-state"/>
                  <config value="false"/>
                  <description>
                    <text>P2MP tunnel status.</text>
                  </description>
                </leaf>
              </container>
            </container>
            <container name="leaf">
              <presence value="EVI-IPMSI view"/>
              <description>
                <text>Enable/disable mLDP P2MP leaf configuration.</text>
              </description>
              <leaf name="opaque-value">
                <type name="string">
                  <length value="1..4096"/>
                </type>
                <config value="false"/>
                <description>
                  <text>Original opaque value in a message. The value is displayed in the format of TLV.</text>
                </description>
              </leaf>
              <leaf name="state">
                <type name="evpn-state"/>
                <config value="false"/>
                <description>
                  <text>P2MP tunnel status.</text>
                </description>
              </leaf>
              <container name="use-next-hops">
                <description>
                  <text>List of root addresses for leaf node.</text>
                </description>
                <list name="use-next-hop">
                  <key value="root-ip"/>
                  <description>
                    <text>Configure root address for leaf node.</text>
                  </description>
                  <leaf name="root-ip">
                    <type name="inet:ipv4-address-no-zone"/>
                    <description>
                      <text>Root address for leaf node.</text>
                    </description>
                  </leaf>
                </list>
              </container>
            </container>
          </container>
        </container>
        <container name="vpws-evpn">
          <when condition="../type = 'vpws-evpn'"/>
          <description>
            <text>Configure VPWS mode of EVPN instance.</text>
          </description>
          <leaf name="description">
            <type name="string">
              <length value="1..63"/>
              <pattern value="([^?]*)"/>
            </type>
            <description>
              <text>The description for EVPN instance.</text>
            </description>
          </leaf>
          <leaf name="rd">
            <ext:operation-exclude value="update"/>
            <type name="string">
              <length value="3..21"/>
            </type>
            <description>
              <text>An EVPN instance address family takes effect only after it is configured with an RD. The RD can be in any of the following formats:
1. 16-bit AS number:32-bit user-defined number, 101:3 for example. A 16-bit AS number ranges from 0 to 65535, and a user-defined number ranges from 0 to 4294967295. The AS number and user-defined number cannot be both 0s. This means that the RD value cannot be 0:0.
2. 32-bit IP address:16-bit user-defined number, 192.168.122.15:1 for example. The IP address ranges from 0.0.0.0 to 255.255.255.255, and the user-defined number ranges from 0 to 65535.
3. 32-bit AS number:16-bit user-defined number, 10.11:3 for example. A 32-bit AS number ranges from 0.0 to 65535.65535 or from 0 to 4294967295, and a user-defined number ranges from 0 to 65535. The AS number and user-defined number cannot be both 0s. This means that the RD value cannot be 0.0:0.</text>
            </description>
          </leaf>
          <leaf name="import-policy-name">
            <when condition="../rd"/>
            <type name="leafref">
              <path value="/rtp:routing-policy/rtp:policy-definitions/rtp:policy-definition/rtp:name"/>
            </type>
            <description>
              <text>The name of specify import route policy.</text>
            </description>
          </leaf>
          <leaf name="export-policy-name">
            <when condition="../rd"/>
            <type name="leafref">
              <path value="/rtp:routing-policy/rtp:policy-definitions/rtp:policy-definition/rtp:name"/>
            </type>
            <description>
              <text>The name of specify export route policy.</text>
            </description>
          </leaf>
          <leaf name="tunnel-policy-name">
            <when condition="../rd"/>
            <type name="leafref">
              <path value="/tnlm:tunnel-management/tnlm:tunnel-policys/tnlm:tunnel-policy/tnlm:name"/>
            </type>
            <must condition="(not(/tnlm:tunnel-management/tnlm:tunnel-policys/tnlm:tunnel-policy[tnlm:name=current()]/tnlm:ipv6-set/tnlm:select-sequence) or (/tnlm:tunnel-management/tnlm:tunnel-policys/tnlm:tunnel-policy[tnlm:name=current()]/tnlm:ipv6-set/tnlm:select-sequence and /tnlm:tunnel-management/tnlm:tunnel-policys/tnlm:tunnel-policy[tnlm:name=current()]/tnlm:ipv6-set/tnlm:select-sequence/tnlm:select-tunnel-types/tnlm:select-tunnel-type[tnlm:type!='srv6-te-flow-group'])) and (not(/tnlm:tunnel-management/tnlm:tunnel-policys/tnlm:tunnel-policy[tnlm:name=current()]/tnlm:ipv4-set/tnlm:select-sequence) or (/tnlm:tunnel-management/tnlm:tunnel-policys/tnlm:tunnel-policy[tnlm:name=current()]/tnlm:ipv4-set/tnlm:select-sequence and /tnlm:tunnel-management/tnlm:tunnel-policys/tnlm:tunnel-policy[tnlm:name=current()]/tnlm:ipv4-set/tnlm:select-sequence/tnlm:select-tunnel-types/tnlm:select-tunnel-type[tnlm:type!='gre']))"/>
            <description>
              <text>Tunnel policy name.</text>
            </description>
          </leaf>
          <leaf name="local-remote-frr">
            <type name="local-remote-frr-enable-type"/>
            <default value="default"/>
            <description>
              <text>Enable local MAC and remote MAC to form FRR.</text>
            </description>
          </leaf>
          <leaf name="remote-frr">
            <type name="local-remote-frr-enable-type"/>
            <default value="default"/>
            <description>
              <text>Enable remote MAC to form FRR.</text>
            </description>
          </leaf>
          <leaf name="default-color">
            <when condition="../rd"/>
            <type name="uint32">
              <range value="0..4294967295"/>
            </type>
            <description>
              <text>Set default color for nexthop iteration.</text>
            </description>
          </leaf>
          <leaf name="export-acl-name-or-id">
            <type name="leafref">
              <path value="/acl:acl/acl:groups/acl:group/acl:identity"/>
            </type>
            <description>
              <text>Name or number of an IPv4 ACL used by a filtering policy to filter the routes to be advertised to a specified peer. The number ranges from 4000 to 4999, and the name must start with a letter. By default, no ACL-based filtering policy is configured, and therefore all EVN BGP routes can be advertised.</text>
            </description>
          </leaf>
          <leaf name="import-acl-name-or-id">
            <type name="leafref">
              <path value="/acl:acl/acl:groups/acl:group/acl:identity"/>
            </type>
            <description>
              <text>Name or number of an IPv4 ACL used by a filtering policy to filter the routes received from a specified peer. The number ranges from 4000 to 4999, and the name must start with a letter. By default, no ACL-based filtering policy is configured, and therefore all EVN BGP routes can be accepted.</text>
            </description>
          </leaf>
          <leaf name="timer-revert-delay">
            <when condition="../rd"/>
            <type name="uint32">
              <range value="0..3600"/>
            </type>
            <units name="s"/>
            <default value="0"/>
            <description>
              <text>Set delay time of selecting routes in production.</text>
            </description>
          </leaf>
          <leaf name="srv6-mode">
            <when condition="../rd"/>
            <type name="srv6-mode"/>
            <description>
              <text>SRv6 iteration mode.</text>
            </description>
          </leaf>
          <leaf name="down-switch">
            <when condition="../rd and ../srv6-mode='te'"/>
            <type name="boolean"/>
            <default value="false"/>
            <description>
              <text>Enable/disable TE to BE if the associated TE tunnel goes down.</text>
            </description>
          </leaf>
          <leaf name="nexthop-recursive-lookup-restrain">
            <type name="boolean"/>
            <default value="true"/>
            <description>
              <text>Enable/disable EVPN nexthop recursive lookup restrain.</text>
            </description>
          </leaf>
          <leaf name="nexthop-priority">
            <type name="nexthop-priority-address-type"/>
            <description>
              <text>Routes with next-hop IPv4 addresses and routes with next-hop IPv6 addresses coexist. If the next-hop address type is set to IPv4, routes with next-hop IPv4 addresses have a higher priority. If the next-hop address type is set to IPv6, routes with next-hop IPv6 addresses have a higher priority.</text>
            </description>
          </leaf>
          <container name="rts">
            <when condition="../rd"/>
            <description>
              <text>List of RTs.</text>
            </description>
            <list name="rt">
              <key value="vrf-rt-type vrf-rt-value"/>
              <description>
                <text>Configure RTs to control route advertisement between network nodes. Before sending a VPN route to a PE, the local PE adds an Export RT to the route. After receiving a route from another PE, the local PE compares the local Import RT and the Export RT carried in the VPN route and adds the route to the VPN instance only when the two RTs are the same.</text>
              </description>
              <leaf name="vrf-rt-type">
                <type name="vrf-rt-type"/>
                <description>
                  <text>RT type (export-extcommunity or import-extcommunity)
export-extcommunity: Specifies the value of the extended community attribute of the route from an outbound interface to the destination VPN.
import-extcommunity: Specifies the value of the extended community attribute. Routes with such an extended community value can be accepted.</text>
                </description>
              </leaf>
              <leaf name="vrf-rt-value">
                <type name="string">
                  <length value="3..21"/>
                </type>
                <description>
                  <text>RT value, in any of the following formats:
1. 16-bit AS number:32-bit user-defined number, 1:3 for example. A 16-bit AS number ranges from 0 to 65535, and a user-defined number ranges from 0 to 4294967295. The AS number and user-defined number cannot be both 0s. This means that the VPN Target value cannot be 0:0.
2. 32-bit IP address:16-bit user-defined number, 192.168.122.15:1 for example. The IP address ranges from 0.0.0.0 to 255.255.255.255, and the user-defined number ranges from 0 to 65535.
3. 32-bit AS number:16-bit user-defined number, 10.11:3 for example. A 32-bit AS number ranges from 0.0 to 65535.65535 or from 0 to 4294967295, and a user-defined number ranges from 0 to 65535. The AS number and user-defined number cannot be both 0s. This means that the VPN Target value cannot be 0.0:0.</text>
                </description>
              </leaf>
            </list>
          </container>
        </container>
        <container name="tunnel-infos">
          <config value="false"/>
          <description>
            <text>List of tunnel informations.</text>
          </description>
          <list name="tunnel-info">
            <key value="type peer-ip id"/>
            <description>
              <text>Operational state of tunnel informations.</text>
            </description>
            <leaf name="type">
              <type name="tunnel-type"/>
              <description>
                <text>Tunnel's type.</text>
              </description>
            </leaf>
            <leaf name="peer-ip">
              <type name="inet:ip-address-no-zone"/>
              <description>
                <text>Nexthop address through which the packet has to be sent.</text>
              </description>
            </leaf>
            <leaf name="id">
              <type name="uint32">
                <range value="0..4294967295"/>
              </type>
              <description>
                <text>Tunnel's ID.</text>
              </description>
            </leaf>
            <leaf name="color">
              <type name="uint32">
                <range value="0..4294967295"/>
              </type>
              <description>
                <text>Color information for tunnel.</text>
              </description>
            </leaf>
            <leaf name="name">
              <type name="string">
                <length value="0..256"/>
              </type>
              <description>
                <text>Tunnel's name.</text>
              </description>
            </leaf>
          </list>
        </container>
        <container name="mac-route-infos">
          <config value="false"/>
          <description>
            <text>List of MAC routes.</text>
          </description>
          <list name="mac-route-info">
            <key value="prefix"/>
            <description>
              <text>Statistics of of MAC routes.</text>
            </description>
            <leaf name="prefix">
              <type name="mac-prefix"/>
              <description>
                <text>MAC route prefix.</text>
              </description>
            </leaf>
            <container name="label-stacks">
              <description>
                <text>Statistics of EVPN label stacks.</text>
              </description>
              <uses name="evpn:label-stacks-type"/>
            </container>
          </list>
        </container>
        <container name="per-instance-label">
          <config value="false"/>
          <description>
            <text>Operational data of label shared by all private network routes in the EVPN instance.</text>
          </description>
          <leaf name="unicast-label">
            <type name="uint32"/>
            <description>
              <text>Label shared by unicast routes in the EVPN instance.</text>
            </description>
          </leaf>
          <leaf name="bum-label">
            <type name="uint32"/>
            <description>
              <text>Label shared by bum routes in the EVPN instance.</text>
            </description>
          </leaf>
          <leaf name="bypass-label">
            <type name="uint32"/>
            <description>
              <text>Label shared by bypass routes in the EVPN instance.</text>
            </description>
          </leaf>
        </container>
        <container name="df-infos">
          <config value="false"/>
          <description>
            <text>List of DF info.</text>
          </description>
          <list name="df-info">
            <key value="esi"/>
            <description>
              <text>Operational data of the Df information.</text>
            </description>
            <leaf name="esi">
              <type name="esi"/>
              <description>
                <text>ESI, in the format of 00xx.xxxx.xxxx.xxxx.xxxx or 01xx.xxxx.xxxx.xxxx.xxxx, in which x ranges from 0 to F. A static ESI cannot be all 0s.</text>
              </description>
            </leaf>
            <leaf name="df-result">
              <type name="df-result"/>
              <description>
                <text>DF result.</text>
              </description>
            </leaf>
            <container name="pref-elec-infos">
              <config value="false"/>
              <description>
                <text>List of information about DF election.</text>
              </description>
              <list name="pref-elec-info">
                <key value="origin-ip"/>
                <description>
                  <text>Operational data of DF election information.</text>
                </description>
                <leaf name="origin-ip">
                  <type name="inet:ip-address-no-zone"/>
                  <description>
                    <text>Source IP address of a PE.</text>
                  </description>
                </leaf>
                <leaf name="df-result">
                  <type name="df-election-result"/>
                  <description>
                    <text>DF election result, which can be DF or buckup DF.</text>
                  </description>
                </leaf>
                <leaf name="preference">
                  <type name="uint16">
                    <range value="1..65535"/>
                  </type>
                  <default value="32767"/>
                  <description>
                    <text>Preference of ESI.</text>
                  </description>
                </leaf>
                <leaf name="dp">
                  <type name="uint8"/>
                  <description>
                    <text>The non-preemption mode is used for DF election.</text>
                  </description>
                </leaf>
                <leaf name="ac-df">
                  <type name="uint8"/>
                  <description>
                    <text>The AC status affects DF election.</text>
                  </description>
                </leaf>
              </list>
            </container>
          </list>
        </container>
        <container name="df-timer-info">
          <config value="false"/>
          <description>
            <text>Operational data of Df timer information.</text>
          </description>
          <container name="esi-infos">
            <description>
              <text>List of displaying the information of the ESI Df timer.</text>
            </description>
            <list name="esi-info">
              <key value="esi"/>
              <description>
                <text>Operational data of the ESI Df timer information.</text>
              </description>
              <leaf name="esi">
                <type name="esi"/>
                <description>
                  <text>ESI, in the format of 00xx.xxxx.xxxx.xxxx.xxxx or 01xx.xxxx.xxxx.xxxx.xxxx, in which x ranges from 0 to F. A static ESI cannot be all 0s.</text>
                </description>
              </leaf>
              <leaf name="timer-type">
                <type name="df-timer-type"/>
                <description>
                  <text>Timer type.</text>
                </description>
              </leaf>
              <leaf name="timer-state">
                <type name="df-timer-mode"/>
                <description>
                  <text>DF timer status.</text>
                </description>
              </leaf>
              <leaf name="time-left">
                <type name="uint32"/>
                <description>
                  <text>Remaining time in second before the DF timer expires.</text>
                </description>
              </leaf>
            </list>
          </container>
          <container name="interface-infos">
            <config value="false"/>
            <description>
              <text>List of displaying the information of the interface Df timer.</text>
            </description>
            <list name="interface-info">
              <key value="interface-name"/>
              <description>
                <text>Operational data of the interface Df timer information.</text>
              </description>
              <leaf name="interface-name">
                <type name="leafref">
                  <path value="/ifm:ifm/ifm:interfaces/ifm:interface/ifm:name"/>
                </type>
                <description>
                  <text>The interface name.</text>
                </description>
              </leaf>
              <leaf name="bd-id">
                <type name="uint32"/>
                <description>
                  <text>BD ID.</text>
                </description>
              </leaf>
              <leaf name="timer-type">
                <type name="df-timer-type"/>
                <description>
                  <text>Timer type.</text>
                </description>
              </leaf>
              <leaf name="timer-state">
                <type name="df-timer-mode"/>
                <description>
                  <text>DF timer status.</text>
                </description>
              </leaf>
              <leaf name="time-left">
                <type name="uint32"/>
                <description>
                  <text>Remaining time in second before the DF timer expires.</text>
                </description>
              </leaf>
            </list>
          </container>
          <container name="pw-infos">
            <config value="false"/>
            <description>
              <text>List of displaying the information of the PW Df timer.</text>
            </description>
            <list name="pw-info">
              <key value="peer-ip vc-id vc-type"/>
              <description>
                <text>Operational data of the PW Df timer information.</text>
              </description>
              <leaf name="peer-ip">
                <type name="leafref">
                  <path value="/l2vpn:l2vpn/l2vpn:instances/l2vpn:instance/l2vpn:vpls/l2vpn:ldp-signaling/l2vpn:pws/l2vpn:pw/l2vpn:peer-ip"/>
                </type>
                <description>
                  <text>Peer IP address.</text>
                </description>
              </leaf>
              <leaf name="vc-id">
                <type name="leafref">
                  <path value="/l2vpn:l2vpn/l2vpn:instances/l2vpn:instance/l2vpn:vpls/l2vpn:ldp-signaling/l2vpn:pws/l2vpn:pw/l2vpn:negotiation-vc-id"/>
                </type>
                <description>
                  <text>PW ID used to uniquely identify a VC.</text>
                </description>
              </leaf>
              <leaf name="vc-type">
                <type name="leafref">
                  <path value="/l2vpn:l2vpn/l2vpn:instances/l2vpn:instance/l2vpn:vpls/l2vpn:ldp-signaling/l2vpn:pws/l2vpn:pw/l2vpn:encapsulation-type"/>
                </type>
                <description>
                  <text>Encapsulation type of a VPLS PW.</text>
                </description>
              </leaf>
              <leaf name="timer-type">
                <type name="df-timer-type"/>
                <description>
                  <text>Timer type.</text>
                </description>
              </leaf>
              <leaf name="timer-state">
                <type name="df-timer-mode"/>
                <description>
                  <text>DF timer status.</text>
                </description>
              </leaf>
              <leaf name="time-left">
                <type name="uint32"/>
                <description>
                  <text>Remaining time in second before the DF timer expires.</text>
                </description>
              </leaf>
            </list>
          </container>
        </container>
        <container name="esi-advance">
          <config value="false"/>
          <description>
            <text>Operational data of the advanced information of an ESI.</text>
          </description>
          <container name="locals">
            <description>
              <text>List of displaying the advanced information for a local ESI.</text>
            </description>
            <list name="local">
              <key value="esi"/>
              <description>
                <text>Operational data of the advanced information of a local ESI.</text>
              </description>
              <leaf name="esi">
                <type name="esi"/>
                <description>
                  <text>ESI, in the format of 00xx.xxxx.xxxx.xxxx.xxxx or 01xx.xxxx.xxxx.xxxx.xxxx, in which x ranges from 0 to F. A static ESI cannot be all 0s.</text>
                </description>
              </leaf>
              <leaf name="topology">
                <type name="topology"/>
                <description>
                  <text>Network topology identified by an ESI.</text>
                </description>
              </leaf>
            </list>
          </container>
          <container name="remotes">
            <description>
              <text>List of displaying the advanced information for a remote ESI.</text>
            </description>
            <list name="remote">
              <key value="esi remote-peer"/>
              <description>
                <text>Operational data of the advanced information of a remote ESI.</text>
              </description>
              <leaf name="esi">
                <type name="esi"/>
                <description>
                  <text>ESI, in the format of 00xx.xxxx.xxxx.xxxx.xxxx or 01xx.xxxx.xxxx.xxxx.xxxx, in which x ranges from 0 to F. A static ESI cannot be all 0s.</text>
                </description>
              </leaf>
              <leaf name="remote-peer">
                <type name="inet:ip-address-no-zone"/>
                <description>
                  <text>IP address of a peer PE.</text>
                </description>
              </leaf>
              <leaf name="topology">
                <type name="topology"/>
                <description>
                  <text>Network topology identified by an ESI.</text>
                </description>
              </leaf>
            </list>
          </container>
        </container>
        <container name="mac-routes">
          <config value="false"/>
          <description>
            <text>List of MAC routes.</text>
          </description>
          <list name="mac-route">
            <key value="prefix rd from route-type-flag"/>
            <config value="false"/>
            <description>
              <text>Statistics of MAC routes.</text>
            </description>
            <leaf name="prefix">
              <type name="mac-prefix"/>
              <description>
                <text>MAC route prefix.</text>
              </description>
            </leaf>
            <leaf name="rd">
              <type name="string">
                <length value="3..21"/>
              </type>
              <description>
                <text>Route distinguisher.</text>
              </description>
            </leaf>
            <leaf name="from">
              <type name="inet:ip-address-no-zone"/>
              <description>
                <text>Source peer that sends a route.</text>
              </description>
            </leaf>
            <leaf name="route-type-flag">
              <type name="best-flag-type"/>
              <description>
                <text>Route type.</text>
              </description>
            </leaf>
            <leaf name="source-address-family">
              <type name="evpn:address-family-type"/>
              <description>
                <text>Source address family.</text>
              </description>
            </leaf>
            <leaf name="mpls-label1">
              <type name="uint32">
                <range value="0..4294967295"/>
              </type>
              <description>
                <text>Label1, it means L2 VNI for MAC Route and L3 VNI for Prefix Route.</text>
              </description>
            </leaf>
            <leaf name="mpls-label2">
              <type name="uint32">
                <range value="0..4294967295"/>
              </type>
              <description>
                <text>Label2, it means L3 VNI for MAC Route.</text>
              </description>
            </leaf>
            <leaf name="frr-out-interface">
              <type name="string">
                <length value="1..64"/>
              </type>
              <description>
                <text>Local-remote frr direct out-interface.</text>
              </description>
            </leaf>
            <leaf name="frr-nexthop">
              <type name="inet:ip-address-no-zone"/>
              <description>
                <text>Local-remote frr nexthop.</text>
              </description>
            </leaf>
            <leaf name="frr-out-tunnel-name">
              <type name="string">
                <length value="1..64"/>
              </type>
              <description>
                <text>Local-Remote Frr Tunnel Out-Interface.</text>
              </description>
            </leaf>
            <leaf name="prefix-sid">
              <type name="inet:ipv6-address-no-zone"/>
              <description>
                <text>Prefix-SID attribute.</text>
              </description>
            </leaf>
            <leaf name="bypass-prefix-sid">
              <type name="inet:ipv6-address-no-zone"/>
              <description>
                <text>Bypass Prefix-SID attribute.</text>
              </description>
            </leaf>
            <leaf name="effect-nexthop">
              <type name="inet:ip-address-no-zone"/>
              <description>
                <text>Effective nexthop.</text>
              </description>
            </leaf>
            <leaf name="redirect-out-interface">
              <type name="string">
                <length value="1..64"/>
              </type>
              <description>
                <text>Redirect out-interface.</text>
              </description>
            </leaf>
            <uses name="routing-table-type">
              <description>
                <text>Routing table infomation.</text>
              </description>
            </uses>
            <container name="direct-pw-info">
              <description>
                <text>Operational data of direct outbound interface.</text>
              </description>
              <leaf name="peer-ip">
                <type name="inet:ipv4-address-no-zone"/>
                <description>
                  <text>Peer IP address of a PW.</text>
                </description>
              </leaf>
              <leaf name="vc-id">
                <type name="uint32">
                  <range value="1..4294967295"/>
                </type>
                <description>
                  <text>VC ID.</text>
                </description>
              </leaf>
              <leaf name="vc-type">
                <type name="evpn:l2vpn-encapsulate-type"/>
                <description>
                  <text>Encapsulation type of a PW.</text>
                </description>
              </leaf>
            </container>
          </list>
        </container>
        <container name="ad-routes">
          <config value="false"/>
          <description>
            <text>List of AD routes.</text>
          </description>
          <list name="ad-route">
            <key value="prefix rd from route-type-flag"/>
            <config value="false"/>
            <description>
              <text>Statistics of AD routes.</text>
            </description>
            <leaf name="prefix">
              <type name="ad-prefix"/>
              <description>
                <text>AD route prefix.</text>
              </description>
            </leaf>
            <leaf name="rd">
              <type name="string">
                <length value="3..21"/>
              </type>
              <description>
                <text>Route distinguisher.</text>
              </description>
            </leaf>
            <leaf name="from">
              <type name="inet:ip-address-no-zone"/>
              <description>
                <text>Source peer that sends a route.</text>
              </description>
            </leaf>
            <leaf name="route-type-flag">
              <type name="best-flag-type"/>
              <description>
                <text>Route type.</text>
              </description>
            </leaf>
            <leaf name="prefix-sid">
              <type name="inet:ipv6-address-no-zone"/>
              <description>
                <text>Prefix-SID attribute.</text>
              </description>
            </leaf>
            <leaf name="bypass-prefix-sid">
              <type name="inet:ipv6-address-no-zone"/>
              <description>
                <text>Bypass Prefix-SID attribute.</text>
              </description>
            </leaf>
            <uses name="routing-table-type">
              <description>
                <text>Routing table infomation.</text>
              </description>
            </uses>
          </list>
        </container>
        <container name="es-routes">
          <config value="false"/>
          <description>
            <text>List of ES routes.</text>
          </description>
          <list name="es-route">
            <key value="prefix rd from route-type-flag"/>
            <config value="false"/>
            <description>
              <text>Statistics of ES routes.</text>
            </description>
            <leaf name="prefix">
              <type name="es-prefix"/>
              <description>
                <text>ES route prefix.</text>
              </description>
            </leaf>
            <leaf name="rd">
              <type name="string">
                <length value="3..21"/>
              </type>
              <description>
                <text>Route distinguisher.</text>
              </description>
            </leaf>
            <leaf name="from">
              <type name="inet:ip-address-no-zone"/>
              <description>
                <text>Source peer that sends a route.</text>
              </description>
            </leaf>
            <leaf name="route-type-flag">
              <type name="best-flag-type"/>
              <description>
                <text>Route type.</text>
              </description>
            </leaf>
            <uses name="routing-table-type">
              <description>
                <text>Routing table infomation.</text>
              </description>
            </uses>
          </list>
        </container>
        <container name="inclusive-routes">
          <config value="false"/>
          <description>
            <text>List of inclusive routes.</text>
          </description>
          <list name="inclusive-route">
            <key value="prefix rd from route-type-flag"/>
            <config value="false"/>
            <description>
              <text>Statistics of inclusive routes.</text>
            </description>
            <leaf name="prefix">
              <type name="inclusive-prefix"/>
              <description>
                <text>Inclusive route prefix.</text>
              </description>
            </leaf>
            <leaf name="rd">
              <type name="string">
                <length value="3..21"/>
              </type>
              <description>
                <text>Route distinguisher.</text>
              </description>
            </leaf>
            <leaf name="from">
              <type name="inet:ip-address-no-zone"/>
              <description>
                <text>Source peer that sends a route.</text>
              </description>
            </leaf>
            <leaf name="route-type-flag">
              <type name="best-flag-type"/>
              <description>
                <text>Route type.</text>
              </description>
            </leaf>
            <leaf name="prefix-sid">
              <type name="inet:ipv6-address-no-zone"/>
              <description>
                <text>Prefix-SID attribute.</text>
              </description>
            </leaf>
            <uses name="routing-table-type">
              <description>
                <text>Routing table infomation.</text>
              </description>
            </uses>
          </list>
        </container>
      </list>
    </container>
    <container name="remote-sids">
      <config value="false"/>
      <description>
        <text>List of remote SID.</text>
      </description>
      <list name="remote-sid">
        <key value="remote-sid"/>
        <description>
          <text>Operational data of remote SID.</text>
        </description>
        <leaf name="remote-sid">
          <type name="inet:ipv6-address-no-zone"/>
          <description>
            <text>Remote SID attribute.</text>
          </description>
        </leaf>
        <leaf name="locator-sid">
          <type name="inet:ipv6-address-no-zone"/>
          <description>
            <text>Locator SID.</text>
          </description>
        </leaf>
        <leaf name="locator-mask-length">
          <type name="uint8">
            <range value="0..128"/>
          </type>
          <description>
            <text>Specify the mask length of a locator SID.</text>
          </description>
        </leaf>
        <leaf name="evpn-type">
          <type name="evpn-type"/>
          <description>
            <text>The value specifies the Type of EVPN instance. The value must be normal/i-evpn/b-evpn/bd-evpn/vpws-evpn.</text>
          </description>
        </leaf>
        <leaf name="evpn-name">
          <type name="name-type">
            <length value="1..31"/>
          </type>
          <description>
            <text>EVPN instance name.</text>
          </description>
        </leaf>
        <leaf name="bd-id">
          <type name="uint32">
            <range value="0..16777215"/>
          </type>
          <description>
            <text>The identification of the BD.</text>
          </description>
        </leaf>
        <leaf name="evpl-id">
          <type name="uint32">
            <range value="1..16777215"/>
          </type>
          <description>
            <text>The identification of the EVPL instance.</text>
          </description>
        </leaf>
      </list>
    </container>
    <container name="default-parameter">
      <config value="false"/>
      <description>
        <text>Operational data of EVPN initial configuration information.</text>
      </description>
      <leaf name="access-mode">
        <type name="access-mode"/>
        <description>
          <text>EVPN access Mode.</text>
        </description>
      </leaf>
      <leaf name="service-mode">
        <type name="service-mode"/>
        <description>
          <text>EVPN interface service Mode.</text>
        </description>
      </leaf>
      <leaf name="apply-label-mode">
        <type name="apply-label-mode"/>
        <description>
          <text>EVPN apply label Mode.</text>
        </description>
      </leaf>
    </container>
    <container name="recover-timers">
      <config value="false"/>
      <description>
        <text>List of EVPN recover timer informations.</text>
      </description>
      <list name="recover-timer">
        <key value="name"/>
        <description>
          <text>Operational state of EVPN recover timer informations.</text>
        </description>
        <leaf name="name">
          <type name="leafref">
            <path value="/ifm:ifm/ifm:interfaces/ifm:interface/ifm:name"/>
          </type>
          <description>
            <text>The interface name.</text>
          </description>
        </leaf>
        <leaf name="mode">
          <type name="timer-mode"/>
          <description>
            <text>Mode of EVPN recover timer.</text>
          </description>
        </leaf>
        <leaf name="begin-time">
          <type name="yang:date-and-time"/>
          <description>
            <text>Begin time of EVPN recover timer.</text>
          </description>
        </leaf>
        <leaf name="end-time">
          <type name="yang:date-and-time"/>
          <description>
            <text>End time of EVPN recover timer.</text>
          </description>
        </leaf>
        <leaf name="time-left">
          <type name="uint32"/>
          <units name="s"/>
          <description>
            <text>Time left of EVPN recover timer.</text>
          </description>
        </leaf>
      </list>
    </container>
    <container name="track-peer-timer-infos">
      <config value="false"/>
      <description>
        <text>List of EVPN track peer timer informations.</text>
      </description>
      <list name="track-peer-timer-info">
        <key value="esi"/>
        <description>
          <text>Operational state of EVPN track peer timer informations.</text>
        </description>
        <leaf name="esi">
          <type name="esi"/>
          <description>
            <text>ESI, in the format of 00xx.xxxx.xxxx.xxxx.xxxx or 01xx.xxxx.xxxx.xxxx.xxxx, in which x ranges from 0 to F. A static ESI cannot be all 0s.</text>
          </description>
        </leaf>
        <leaf name="timer-type">
          <type name="timer-type"/>
          <description>
            <text>Timer type.</text>
          </description>
        </leaf>
        <leaf name="timer-state">
          <type name="timer-mode"/>
          <description>
            <text>Timer status.</text>
          </description>
        </leaf>
        <leaf name="time-left">
          <type name="uint32"/>
          <units name="s"/>
          <description>
            <text>Remaining time.</text>
          </description>
        </leaf>
      </list>
    </container>
    <container name="sticky-mac-confliction-infos">
      <config value="false"/>
      <description>
        <text>List of EVPN sticky/static mac conflicting informations.</text>
      </description>
      <list name="sticky-mac-confliction-info">
        <key value="mac-address bd-id vid"/>
        <description>
          <text>Operational data of EVPN sticky/static mac conflicting informations.</text>
        </description>
        <leaf name="mac-address">
          <type name="pub-type:mac-address"/>
          <description>
            <text>MAC address.</text>
          </description>
        </leaf>
        <leaf name="bd-id">
          <type name="uint32">
            <range value="1..16777215"/>
          </type>
          <description>
            <text>The identification of the BD.</text>
          </description>
        </leaf>
        <leaf name="vid">
          <type name="uint16">
            <range value="0..4094"/>
          </type>
          <description>
            <text>VLAN ID.</text>
          </description>
        </leaf>
        <leaf name="interface-name">
          <type name="leafref">
            <path value="/ifm:ifm/ifm:interfaces/ifm:interface/ifm:name"/>
          </type>
          <description>
            <text>Interface name.</text>
          </description>
        </leaf>
        <leaf name="peer-ip">
          <type name="inet:ip-address-no-zone"/>
          <description>
            <text>Peer IP address.</text>
          </description>
        </leaf>
      </list>
    </container>
  </container>
  <rpc name="reset-evpn-mac-duplication">
    <description>
      <text>Reset EVPN MAC duplication.</text>
    </description>
    <ext:node-ref value="/evpn:evpn/evpn:instances/evpn:instance/evpn:normal-evpn/evpn:mac-duplication-infos"/>
    <ext:node-ref value="/evpn:evpn/evpn:instances/evpn:instance/evpn:bd-evpn/evpn:mac-duplication-infos"/>
    <input>
      <leaf name="name">
        <type name="name-type">
          <length value="1..31"/>
        </type>
        <mandatory value="true"/>
        <description>
          <text>EVPN instance name.</text>
        </description>
      </leaf>
      <leaf name="bd-id">
        <type name="uint32">
          <range value="1..16777215"/>
        </type>
        <description>
          <text>BD ID.</text>
        </description>
      </leaf>
      <leaf name="mac-address">
        <type name="pub-type:mac-address">
          <length value="1..255"/>
        </type>
        <description>
          <text>MAC address.</text>
        </description>
      </leaf>
      <leaf name="vlan-id">
        <type name="uint32">
          <range value="1..4094"/>
        </type>
        <description>
          <text>VLAN ID.</text>
        </description>
      </leaf>
    </input>
  </rpc>
  <augment target-node="/bd:bd/bd:instances/bd:instance">
    <description>
      <text>BD bound to an EVPN instance.</text>
    </description>
    <container name="evpn">
      <description>
        <text>Configure BD bound to an EVPN instance.</text>
      </description>
      <leaf name="name">
        <type name="leafref">
          <path value="/evpn:evpn/evpn:instances/evpn:instance/evpn:name"/>
        </type>
        <must condition="(/evpn:evpn/evpn:instances/evpn:instance[evpn:name = current()]/evpn:type='bd-evpn') and not(/bd:bd/bd:instances/bd:instance[bd:id != current()/../../bd:id]/evpn:evpn[evpn:name = current()] and /bd:bd/bd:instances/bd:instance[bd:id != current()/../../bd:id]/evpn:evpn[evpn:tag = current()/../evpn:tag])"/>
        <description>
          <text>Configure BD instances bound to an BD exclusive mode EVPN instance.</text>
        </description>
      </leaf>
      <leaf name="esi">
        <when condition="../name"/>
        <type name="esi">
          <length value="1..24"/>
        </type>
        <must condition="(../../nvo3:nvo3/nvo3:vni-list/nvo3:vni[../nvo3:split-horizon='true']) or ((../umr-originate='true') and not(/evpn:evpn/evpn:site/evpn:static-esis/evpn:static-esi[evpn:esi = current()]/evpn:redundancy-mode ='single-active'))"/>
        <description>
          <text>Static ESI, in the format of 00xx.xxxx.xxxx.xxxx.xxxx, in which x ranges from 0 to F. A static ESI cannot be all 0s.</text>
        </description>
      </leaf>
      <leaf name="tag">
        <when condition="../name"/>
        <type name="uint16">
          <range value="1..4094"/>
        </type>
        <must condition="../../bd:mac-learn-style!='qualify'"/>
        <ext:operation-exclude value="update"/>
        <description>
          <text>Specify the BD tag.</text>
        </description>
      </leaf>
      <leaf name="umr-originate">
        <when condition="../name"/>
        <type name="boolean"/>
        <must condition="(../umr-originate='true' and not(../../nvo3:nvo3/nvo3:vni-list/nvo3:vni) and not(/l2vpn:l2vpn/l2vpn:instances/l2vpn:instance/l2vpn:vpls/l2vpn:bds/l2vpn:bd[l2vpn:id=current()/../../bd:id]) and (../../bd:mac-learn-style!='qualify')) or (../umr-originate='false')"/>
        <default value="false"/>
        <description>
          <text>Enable/disable originate Unknown-MAC-Route.</text>
        </description>
      </leaf>
      <leaf name="detail-suppressed">
        <when condition="../umr-originate ='true'"/>
        <type name="boolean"/>
        <default value="false"/>
        <description>
          <text>Enable/disable suppresse detail MAC route.</text>
        </description>
      </leaf>
      <leaf name="umr-forward">
        <when condition="../name"/>
        <type name="boolean"/>
        <default value="false"/>
        <description>
          <text>Enable/disable process all-0 MAC route as Unknown-MAC-Route.</text>
        </description>
      </leaf>
      <leaf name="dci-ac-access">
        <when condition="../name"/>
        <type name="boolean"/>
        <must condition="(../dci-ac-access='true' and ../../nvo3:nvo3/nvo3:vni-list/nvo3:vni[../nvo3:split-horizon='true']) or (../dci-ac-access='false')"/>
        <default value="false"/>
        <description>
          <text>Enable/disable evpn-dci support ac-access.</text>
        </description>
      </leaf>
      <container name="interface-track-peers">
        <when condition="(../name and ../../nvo3:nvo3/nvo3:vni-list/nvo3:vni[../nvo3:split-horizon='true'])"/>
        <description>
          <text>List of track peer.</text>
        </description>
        <list name="interface-track-peer">
          <key value="es-track-address"/>
          <description>
            <text>Configure track peer information.</text>
          </description>
          <leaf name="es-track-address">
            <type name="leafref">
              <path value="/ni:network-instance/ni:instances/ni:instance/bgp:bgp/bgp:base-process/bgp:peers/bgp:peer/bgp:address"/>
            </type>
            <must condition="/ni:network-instance/ni:instances/ni:instance/bgp:bgp/bgp:base-process/bgp:peers/bgp:peer[bgp:address=current()]/bgp:afs/bgp:af[bgp:type='evpn']"/>
            <description>
              <text>Track peer address.</text>
            </description>
          </leaf>
        </list>
      </container>
    </container>
  </augment>
  <augment target-node="/bd:bd/bd:instances/bd:instance/bd:service-points/bd:service-point">
    <description>
      <text>Configure the E-Tree leaf attribute of BD.</text>
    </description>
    <container name="evpn">
      <description>
        <text>Configure the E-Tree leaf attribute of BD.</text>
      </description>
      <leaf name="e-tree-leaf">
        <type name="boolean"/>
        <must condition="(../e-tree-leaf = 'true' and ../../../../evpn:evpn/evpn:name and /evpn:evpn/evpn:instances/evpn:instance[evpn:name=current()/../../../../evpn:evpn/evpn:name]/evpn:bd-evpn/evpn:etree-enable = 'true') or (../e-tree-leaf = 'false')"/>
        <default value="false"/>
        <description>
          <text>Enable/disable the E-Tree leaf attribute of BD.</text>
        </description>
      </leaf>
    </container>
  </augment>
  <augment target-node="/ni:network-instance/ni:instances/ni:instance/l3vpn:afs/l3vpn:af">
    <description>
      <text>Configure EVPN.</text>
    </description>
    <container name="evpn">
      <when condition="../../../ni:name!='_public_' and (../l3vpn:route-distinguisher or ../../../../../ni:global/ni:route-distinguisher-auto-ip)"/>
      <description>
        <text>Configure EVPN.</text>
      </description>
      <leaf name="import-policy-name">
        <type name="leafref">
          <path value="/rtp:routing-policy/rtp:policy-definitions/rtp:policy-definition/rtp:name"/>
        </type>
        <description>
          <text>Specifies the name of an import routing policy.</text>
        </description>
      </leaf>
      <leaf name="export-policy-name">
        <type name="leafref">
          <path value="/rtp:routing-policy/rtp:policy-definitions/rtp:policy-definition/rtp:name"/>
        </type>
        <description>
          <text>Specifies the name of an export routing policy.</text>
        </description>
      </leaf>
      <leaf name="mpls-routing">
        <type name="boolean"/>
        <default value="false"/>
        <description>
          <text>Enable/disable the EVPN MPLS layer 3 routing function.</text>
        </description>
      </leaf>
      <leaf name="tunnel-policy-name">
        <type name="leafref">
          <path value="/tnlm:tunnel-management/tnlm:tunnel-policys/tnlm:tunnel-policy/tnlm:name"/>
        </type>
        <description>
          <text>Specify tunnel policy name for EVPN.</text>
        </description>
      </leaf>
      <leaf name="default-color">
        <type name="uint32">
          <range value="0..4294967295"/>
        </type>
        <description>
          <text>Set default color for nexthop iteration.</text>
        </description>
      </leaf>
      <leaf name="irb2ip">
        <type name="irb2ip-enable-type"/>
        <default value="default"/>
        <description>
          <text>Enable/disable IRB routing rebirth into prefix routing.</text>
        </description>
      </leaf>
      <container name="extend-vpn-targets">
        <description>
          <text>List of extended RTs.</text>
        </description>
        <list name="extend-vpn-target">
          <key value="vrf-rt-value vrf-rt-type"/>
          <description>
            <text>Configure RT (VPN Target) to control route advertisement between network nodes. Before sending a VPN route to a PE, the local PE adds an Export RT to the route. After receiving a route from another PE, the local PE determines whether the route will be added to the VPN instance based on the local Import RT and the Export RT that is added to the VPN route.</text>
          </description>
          <leaf name="vrf-rt-value">
            <type name="string">
              <length value="3..21"/>
            </type>
            <description>
              <text>The formats of a VPN target value are as follows:
(1) 16-bit AS number : 32-bit user-defined number, for example, 1:3. An AS number ranges from 0 to 65535, and a user-defined number ranges from 0 to 4294967295. The AS number and user-defined number cannot be both 0s. This means that the VPN Target value cannot be 0:0.
(2) 32-bit IP address: 16-bit user-defined number, for example: 192.168.122.15:1.The IP address ranges from 0.0.0.0 to 255.255.255.255, and the user-defined number ranges from 0 to 65535.
(3) 32-bit AS number :16-bit user-defined number, for example, 10.11:3. An AS number ranges from 0.0 to 65535.65535 or 0 to 4294967295, and a user-defined number ranges from 0 to 65535. The AS number and user-defined number cannot be both 0s. This means that the VPN Target value cannot be 0.0:0.</text>
            </description>
          </leaf>
          <leaf name="vrf-rt-type">
            <type name="vrf-rt-type"/>
            <description>
              <text>RT types are as follows:
export-extcommunity: Specifies the value of the extended community attribute of the route from an outbound interface to the destination VPN. import-extcommunity: Receives routes that carry the specified extended community attribute value.</text>
            </description>
          </leaf>
        </list>
      </container>
      <container name="state">
        <config value="false"/>
        <description>
          <text>Operational state of EVPN attribute.</text>
        </description>
        <leaf name="label">
          <type name="uint32"/>
          <config value="false"/>
          <description>
            <text>EVPN label of the VPN instance address family.</text>
          </description>
        </leaf>
      </container>
    </container>
  </augment>
  <augment target-node="/evpl:evpl/evpl:instances/evpl:instance">
    <description>
      <text>EVPL instance bound to an EVPN instance.</text>
    </description>
    <container name="evpn">
      <description>
        <text>Configure EVPL instance bound to an EVPN instance.</text>
      </description>
      <leaf name="name">
        <type name="leafref">
          <path value="/evpn:evpn/evpn:instances/evpn:instance/evpn:name"/>
        </type>
        <must condition="/evpn:evpn/evpn:instances/evpn:instance[name=current()]/evpn:type='vpws-evpn' and /evpn:evpn/evpn:instances/evpn:instance[name=current()]/evpn:vpws-evpn/evpn:rd and ../../evpl:mode!='vxlan-mode'"/>
        <description>
          <text>Configure EVPL instances bound to an EVPN instance.</text>
        </description>
      </leaf>
      <leaf name="local-service-id">
        <ext:operation-exclude value="update"/>
        <when condition="../name"/>
        <type name="uint32">
          <range value="1..16777215"/>
        </type>
        <must condition="(../local-service-id and ../remote-service-id) or (not(../local-service-id) and not(../remote-service-id))"/>
        <description>
          <text>Configure the local SID.</text>
        </description>
      </leaf>
      <leaf name="remote-service-id">
        <ext:operation-exclude value="update"/>
        <when condition="../name"/>
        <type name="uint32">
          <range value="1..16777215"/>
        </type>
        <must condition="(../local-service-id and ../remote-service-id) or (not(../local-service-id) and not(../remote-service-id))"/>
        <description>
          <text>Configure the remote SID.</text>
        </description>
      </leaf>
      <leaf name="ignore-match-mtu">
        <when condition="../name"/>
        <type name="boolean"/>
        <default value="false"/>
        <description>
          <text>Enable/disable the ignore flag of matching MTU from peer device.</text>
        </description>
      </leaf>
      <leaf name="balancing-ignore-esi">
        <when condition="../name"/>
        <type name="boolean"/>
        <default value="false"/>
        <description>
          <text>Enable/disable the ignore flag of ESI for load balance.</text>
        </description>
      </leaf>
      <leaf name="control-word">
        <when condition="../name"/>
        <type name="boolean"/>
        <must condition="(../control-word='true' and ../../evpl:mode!='vxlan-mode') or ../control-word!='true'"/>
        <default value="false"/>
        <description>
          <text>Enable/disable EVPL control word.</text>
        </description>
      </leaf>
      <container name="vrrp">
        <when condition="../name"/>
        <presence value="Configure associated VRRP group."/>
        <description>
          <text>Configure associated VRRP group.</text>
        </description>
        <leaf name="id">
          <ext:operation-exclude value="update"/>
          <type name="uint8">
            <range value="1..255"/>
          </type>
          <mandatory value="true"/>
          <description>
            <text>ID of the associated VRRP group.</text>
          </description>
        </leaf>
        <leaf name="interface-name">
          <ext:operation-exclude value="update"/>
          <type name="leafref">
            <path value="/ifm:ifm/ifm:interfaces/ifm:interface/ifm:name"/>
          </type>
          <mandatory value="true"/>
          <description>
            <text>Name of the interface where the associated VRRP group resides.</text>
          </description>
        </leaf>
        <leaf name="version">
          <ext:operation-exclude value="update"/>
          <type name="evpl-vrrp-version"/>
          <mandatory value="true"/>
          <description>
            <text>The VRRP version, which includes vrrp and vrrp6.</text>
          </description>
        </leaf>
      </container>
      <container name="evpl-info">
        <config value="false"/>
        <description>
          <text>Operational state of EVPL info.</text>
        </description>
        <leaf name="ac-interface">
          <type name="leafref">
            <path value="/ifm:ifm/ifm:interfaces/ifm:interface/ifm:name"/>
          </type>
          <description>
            <text>The AC interface bound to EVPL instance.</text>
          </description>
        </leaf>
        <leaf name="evpl-state">
          <type name="evpl-state"/>
          <description>
            <text>The state of EVPL instance.</text>
          </description>
        </leaf>
        <leaf name="local-ctrl-word">
          <type name="boolean"/>
          <description>
            <text>The local control word.</text>
          </description>
        </leaf>
        <leaf name="local-mtu">
          <type name="uint16">
            <range value="0..65535"/>
          </type>
          <units name="Byte"/>
          <description>
            <text>The value of local MTU, just from the interface which bound to the EVPL instance. If MTU is 0, it means the ignore flag of checking MTU is enabled.</text>
          </description>
        </leaf>
        <leaf name="local-reduancy-mode">
          <type name="redundancy-mode"/>
          <description>
            <text>The local reduancy mode, which includes single-active and all-active modes.</text>
          </description>
        </leaf>
        <leaf name="local-df-state">
          <type name="df-state"/>
          <description>
            <text>The local DF state.</text>
          </description>
        </leaf>
        <leaf name="local-df-elec-type">
          <type name="decide-primary-type"/>
          <description>
            <text>Type of determining the primary/backup status of local DF.</text>
          </description>
        </leaf>
        <leaf name="remote-reduancy-mode">
          <type name="redundancy-mode"/>
          <description>
            <text>The remote reduancy mode, which includes single-active and all-active modes.</text>
          </description>
        </leaf>
        <leaf name="remote-pri-df-num">
          <type name="uint32">
            <range value="0..4294967295"/>
          </type>
          <description>
            <text>Number of primary DFs.</text>
          </description>
        </leaf>
        <leaf name="remote-back-df-num">
          <type name="uint32">
            <range value="0..4294967295"/>
          </type>
          <description>
            <text>Number of backup DFs.</text>
          </description>
        </leaf>
        <leaf name="remote-none-df-num">
          <type name="uint32">
            <range value="0..4294967295"/>
          </type>
          <description>
            <text>Number of none DFs.</text>
          </description>
        </leaf>
        <leaf name="tunnel-type">
          <type name="evpn-tunnel-type"/>
          <description>
            <text>The tunnel type of EVPN network.</text>
          </description>
        </leaf>
        <leaf name="evpl-type">
          <type name="evpn-evpl-type"/>
          <description>
            <text>The type of EVPL.</text>
          </description>
        </leaf>
        <leaf name="if-last-up-time">
          <type name="yang:date-and-time"/>
          <description>
            <text>The last up time of AC interface.</text>
          </description>
        </leaf>
        <leaf name="last-pri-time">
          <type name="yang:date-and-time"/>
          <description>
            <text>The last time to be primary DF.</text>
          </description>
        </leaf>
        <leaf name="last-backup-time">
          <type name="yang:date-and-time"/>
          <description>
            <text>The last time to be backup DF.</text>
          </description>
        </leaf>
      </container>
      <container name="evpl-peer-infos">
        <config value="false"/>
        <description>
          <text>List of EVPL peer info.</text>
        </description>
        <list name="evpl-peer-info">
          <key value="peer-ip nexthop-ip"/>
          <description>
            <text>Operational state of EVPL peer info.</text>
          </description>
          <leaf name="peer-ip">
            <type name="inet:ip-address-no-zone"/>
            <description>
              <text>Peer IP address.</text>
            </description>
          </leaf>
          <leaf name="nexthop-ip">
            <type name="inet:ip-address-no-zone"/>
            <description>
              <text>Original nexthop IP address.</text>
            </description>
          </leaf>
          <leaf name="remote-df-state">
            <type name="df-state"/>
            <description>
              <text>Remote DF status.</text>
            </description>
          </leaf>
          <leaf name="remote-mtu">
            <type name="uint32">
              <range value="1..4294967295"/>
            </type>
            <units name="Byte"/>
            <description>
              <text>The value of remote MTU, just from the interface which bound to the EVPL instance. If MTU is 0, it means the ignore flag of checking MTU is enabled.</text>
            </description>
          </leaf>
          <leaf name="remote-ctrl-word">
            <type name="boolean"/>
            <description>
              <text>The remote control word.</text>
            </description>
          </leaf>
          <leaf name="remote-esi">
            <type name="esi">
              <length value="1..24"/>
            </type>
            <description>
              <text>Remote ESI.</text>
            </description>
          </leaf>
          <leaf name="eline-role">
            <type name="eline-role"/>
            <description>
              <text>The E-Line role.</text>
            </description>
          </leaf>
          <container name="tunnel-infos">
            <config value="false"/>
            <description>
              <text>List of EVPL peer tunnel informations.</text>
            </description>
            <list name="tunnel-info">
              <key value="id"/>
              <description>
                <text>Operational state of EVPL peer tunnel informations.</text>
              </description>
              <leaf name="id">
                <type name="string">
                  <length value="1..20"/>
                </type>
                <description>
                  <text>Tunnel ID.</text>
                </description>
              </leaf>
              <leaf name="type">
                <type name="evpl-tunnel-type"/>
                <description>
                  <text>Tunnel type.</text>
                </description>
              </leaf>
            </list>
          </container>
        </list>
      </container>
      <container name="label-stacks">
        <config value="false"/>
        <description>
          <text>Statistics of EVPN label stacks.</text>
        </description>
        <uses name="evpn:label-stacks-type"/>
      </container>
    </container>
  </augment>
  <augment target-node="/ifm:ifm/ifm:interfaces/ifm:interface">
    <description>
      <text>Configure EVPN with the interface.</text>
    </description>
    <container name="evpn">
      <description>
        <text>Configure ESI interface.</text>
      </description>
      <leaf name="name">
        <type name="leafref">
          <path value="/evpn:evpn/evpn:instances/evpn:instance/evpn:name"/>
        </type>
        <must condition="/evpn:evpn/evpn:instances/evpn:instance[evpn:name=current()]/evpn:type='i-evpn' or /evpn:evpn/evpn:instances/evpn:instance[evpn:name=current()]/evpn:type='normal'"/>
        <description>
          <text>Configure EVPL instances bound to an EVPN instance.</text>
        </description>
      </leaf>
      <leaf name="pbb-source-mac">
        <when condition="../name"/>
        <type name="pub-type:mac-address"/>
        <must condition="/evpn:evpn/evpn:instances/evpn:instance[evpn:name=current()/../evpn:name]/evpn:type='i-evpn'"/>
        <description>
          <text>Specifies a B-MAC address.</text>
        </description>
      </leaf>
      <leaf name="esi">
        <when condition="(../../ifm:type='Ethernet') or (../../ifm:type='GigabitEthernet') or (../../ifm:type='Eth-Trunk') or (../../ifm:type='100GE') or (../../ifm:type='200GE') or (../../ifm:type='40GE') or (../../ifm:type='10GE') or (../../ifm:type='25GE') or (../../ifm:type='50GE') or (../../ifm:type='PW-VE') or (../../ifm:type='400GE') or (../../ifm:type='MultiGE') or (../../ifm:type='Virtual-Ethernet')"/>
        <type name="esi">
          <length value="1..24"/>
          <pattern value="( *(00([0-9a-fA-F]){2}\.(([0-9a-fA-F]){4}\.){3}(([0-9a-fA-F]){4}))? *)"/>
        </type>
        <description>
          <text>Static ESI, in the format of 00xx.xxxx.xxxx.xxxx.xxxx, in which x ranges from 0 to F. A static ESI cannot be all 0s.</text>
        </description>
      </leaf>
      <leaf name="esi-name">
        <when condition="../../ifm:type='Eth-Trunk'"/>
        <type name="leafref">
          <path value="/evpn:evpn/evpn:site/evpn:dynamic-esis/evpn:dynamic-esi/evpn:esi-name"/>
        </type>
        <description>
          <text>Dynamic ESI name is a string of 1 to 31 characters, which begins with a-z or A-Z.</text>
        </description>
      </leaf>
      <leaf name="es-recovery-timer">
        <when condition="(../../ifm:type='Ethernet') or (../../ifm:type='GigabitEthernet') or (../../ifm:type='Eth-Trunk') or (../../ifm:type='100GE') or (../../ifm:type='200GE') or (../../ifm:type='40GE') or (../../ifm:type='10GE') or (../../ifm:type='25GE') or (../../ifm:type='50GE') or (../../ifm:type='PW-VE') or (../../ifm:type='400GE') or (../../ifm:type='MultiGE')"/>
        <type name="uint32">
          <range value="3..1200"/>
        </type>
        <units name="s"/>
        <description>
          <text>ES recovery timer.</text>
        </description>
      </leaf>
      <leaf name="track-bfd-name">
        <when condition="(../../ifm:type='Ethernet') or (../../ifm:type='GigabitEthernet') or (../../ifm:type='Eth-Trunk') or (../../ifm:type='100GE') or (../../ifm:type='200GE') or (../../ifm:type='40GE') or (../../ifm:type='10GE') or (../../ifm:type='25GE') or (../../ifm:type='50GE') or (../../ifm:type='PW-VE') or (../../ifm:type='400GE') or (../../ifm:type='MultiGE')"/>
        <type name="leafref">
          <path value="/bfd:bfd/bfd:sessions/bfd:session/bfd:name"/>
        </type>
        <description>
          <text>Specify the BFD that track ESI peer.</text>
        </description>
      </leaf>
      <leaf name="e-tree-leaf">
        <when condition="../name"/>
        <type name="boolean"/>
        <must condition="(../e-tree-leaf = 'true' and /evpn:evpn/evpn:instances/evpn:instance[evpn:name=current()/../evpn:name]/evpn:normal-evpn/evpn:etree-enable='true') or (../e-tree-leaf = 'false')"/>
        <default value="false"/>
        <description>
          <text>Enable/disable the E-Tree leaf attribute of interface.</text>
        </description>
      </leaf>
      <leaf name="state">
        <type name="evpn:interface-state"/>
        <config value="false"/>
        <description>
          <text>Interface state.</text>
        </description>
      </leaf>
      <leaf name="vc-state">
        <type name="evpn:vc-state"/>
        <config value="false"/>
        <description>
          <text>VC state.</text>
        </description>
      </leaf>
      <leaf name="ring-id">
        <when condition="../esi"/>
        <type name="uint32">
          <range value="1..16777215"/>
        </type>
        <must condition="not (/ifm:ifm/ifm:interfaces/ifm:interface[ifm:name != current()/../../ifm:name]/evpn:evpn[evpn:ring-id = current()])"/>
        <description>
          <text>Evpn ring id of interface.</text>
        </description>
      </leaf>
    </container>
    <container name="evpn-attribute">
      <description>
        <text>Configure EVPN attribute of interface.</text>
      </description>
      <container name="track-peers">
        <when condition="(../../ifm:type='Eth-Trunk') or (../../ifm:type='PW-VE')"/>
        <description>
          <text>List of track peer.</text>
        </description>
        <list name="track-peer">
          <key value="es-track-address"/>
          <description>
            <text>Configure the track peer info.</text>
          </description>
          <leaf name="es-track-address">
            <type name="leafref">
              <path value="/ni:network-instance/ni:instances/ni:instance/bgp:bgp/bgp:base-process/bgp:peers/bgp:peer/bgp:address"/>
            </type>
            <must condition="/ni:network-instance/ni:instances/ni:instance/bgp:bgp/bgp:base-process/bgp:peers/bgp:peer[bgp:address=current()]/bgp:afs/bgp:af[bgp:type='evpn']"/>
            <description>
              <text>Track peer address.</text>
            </description>
          </leaf>
        </list>
      </container>
    </container>
  </augment>
  <augment target-node="/l2vpn:l2vpn/l2vpn:instances/l2vpn:instance/l2vpn:vpls/l2vpn:ldp-signaling/l2vpn:pws/l2vpn:pw">
    <description>
      <text>Configure the EVPN attributes of a PW.</text>
    </description>
    <container name="evpn">
      <description>
        <text>Configure the EVPN attributes of a PW.</text>
      </description>
      <leaf name="etree-leaf-enable">
        <when condition="../../../../../l2vpn:work-mode='bd-mode' and ../../l2vpn:upe='true' and ../../l2vpn:name"/>
        <type name="boolean"/>
        <must condition="(../etree-leaf-enable='true' and ../../../../../l2vpn:bds/l2vpn:bd/l2vpn:id and /bd:bd/bd:instances/bd:instance[bd:id=current()/../../../../../l2vpn:bds/l2vpn:bd/l2vpn:id]/evpn:evpn/evpn:name and /evpn:evpn/evpn:instances/evpn:instance[evpn:name=/bd:bd/bd:instances/bd:instance[bd:id=current()/../../../../../l2vpn:bds/l2vpn:bd/l2vpn:id]/evpn:evpn/evpn:name]/evpn:type='bd-evpn' and /evpn:evpn/evpn:instances/evpn:instance[evpn:name=/bd:bd/bd:instances/bd:instance[bd:id=current()/../../../../../l2vpn:bds/l2vpn:bd/l2vpn:id]/evpn:evpn/evpn:name]/evpn:bd-evpn/evpn:etree-enable='true') or ../etree-leaf-enable='false'"/>
        <default value="false"/>
        <description>
          <text>Enable/disable the E-Tree leaf attribute of a PW.</text>
        </description>
      </leaf>
      <leaf name="esi">
        <when condition="../../../../../l2vpn:work-mode='bd-mode' and ../../l2vpn:upe='true' and ../../l2vpn:name"/>
        <type name="leafref">
          <path value="/evpn:evpn/evpn:site/evpn:static-esis/evpn:static-esi/evpn:esi"/>
        </type>
        <must condition="/evpn:evpn/evpn:site/evpn:static-esis/evpn:static-esi[evpn:esi=current()/../evpn:esi]/evpn:redundancy-mode='single-active'"/>
        <description>
          <text>Static ESI, in the format of 00xx.xxxx.xxxx.xxxx.xxxx, in which x ranges from 0 to F. A static ESI cannot be all 0s.</text>
        </description>
      </leaf>
      <leaf name="state">
        <type name="l2vpn:l2vpn-pw-state"/>
        <config value="false"/>
        <description>
          <text>PW state.</text>
        </description>
      </leaf>
    </container>
  </augment>
</module>
