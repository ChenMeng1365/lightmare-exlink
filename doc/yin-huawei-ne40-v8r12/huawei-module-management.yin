<?xml version="1.0" encoding="UTF-8"?>
<module name="huawei-module-management"
        xmlns="urn:ietf:params:xml:ns:yang:yin:1"
        xmlns:module-management="urn:huawei:yang:huawei-module-management"
        xmlns:yang="urn:ietf:params:xml:ns:yang:ietf-yang-types"
        xmlns:pub-type="urn:huawei:yang:huawei-pub-type"
        xmlns:inet="urn:ietf:params:xml:ns:yang:ietf-inet-types"
        xmlns:ext="urn:huawei:yang:huawei-extension">
  <namespace uri="urn:huawei:yang:huawei-module-management"/>
  <prefix value="module-management"/>
  <import module="ietf-yang-types">
    <prefix value="yang"/>
  </import>
  <import module="huawei-pub-type">
    <prefix value="pub-type"/>
  </import>
  <import module="ietf-inet-types">
    <prefix value="inet"/>
  </import>
  <import module="huawei-extension">
    <prefix value="ext"/>
  </import>
  <organization>
    <text>Huawei Technologies Co., Ltd.</text>
  </organization>
  <contact>
    <text>Huawei Industrial Base
Bantian, Longgang
Shenzhen 518129
People's Republic of China
Website: http://www.huawei.com
Email: support@huawei.com</text>
  </contact>
  <description>
    <text>Module package management.</text>
  </description>
  <revision date="2020-06-24">
    <description>
      <text>Modify node description.</text>
    </description>
    <reference>
      <text>Huawei private.</text>
    </reference>
  </revision>
  <revision date="2020-01-16">
    <description>
      <text>Modify node properties.</text>
    </description>
    <reference>
      <text>Huawei private.</text>
    </reference>
  </revision>
  <revision date="2019-12-03">
    <description>
      <text>Initial revision.</text>
    </description>
    <reference>
      <text>Huawei private.</text>
    </reference>
  </revision>
  <ext:task-name value="patch"/>
  <typedef name="module-state">
    <type name="enumeration">
      <enum name="not-exist">
        <value value="0"/>
        <description>
          <text>The status of the current module package is not-exist.</text>
        </description>
      </enum>
      <enum name="running">
        <value value="3"/>
        <description>
          <text>The status of the current module package is running.</text>
        </description>
      </enum>
    </type>
    <description>
      <text>Status of the current module package.</text>
    </description>
  </typedef>
  <typedef name="operation-type">
    <type name="enumeration">
      <enum name="install-module">
        <value value="0"/>
        <description>
          <text>The operation type of module operation is install-module.</text>
        </description>
      </enum>
      <enum name="uninstall-module">
        <value value="1"/>
        <description>
          <text>The operation type of module operation is uninstall-module.</text>
        </description>
      </enum>
      <enum name="startup-module">
        <value value="2"/>
        <description>
          <text>The operation type of module operation is startup-module.</text>
        </description>
      </enum>
      <enum name="reset-startup-module">
        <value value="3"/>
        <description>
          <text>The operation type of module operation is reset-startup-module.</text>
        </description>
      </enum>
    </type>
    <description>
      <text>Specify module operation type.</text>
    </description>
  </typedef>
  <typedef name="operation-status">
    <type name="enumeration">
      <enum name="not-started">
        <value value="0"/>
        <description>
          <text>The current status of module operation is not started.</text>
        </description>
      </enum>
      <enum name="operating">
        <value value="1"/>
        <description>
          <text>The current status of module operation is operating.</text>
        </description>
      </enum>
      <enum name="successful">
        <value value="2"/>
        <description>
          <text>The current status of module operation is successful.</text>
        </description>
      </enum>
      <enum name="failed">
        <value value="3"/>
        <description>
          <text>The current status of module operation is failed.</text>
        </description>
      </enum>
    </type>
    <description>
      <text>Specify module operation status.</text>
    </description>
  </typedef>
  <typedef name="schedule-query-type">
    <type name="enumeration">
      <enum name="default">
        <value value="0"/>
        <description>
          <text>Default mode.</text>
        </description>
      </enum>
      <enum name="hftp">
        <value value="1"/>
        <description>
          <text>HFTP mode.</text>
        </description>
      </enum>
    </type>
    <description>
      <text>Progress query type.</text>
    </description>
  </typedef>
  <typedef name="file-type">
    <type name="enumeration">
      <enum name="module">
        <value value="3"/>
        <description>
          <text>Module package.</text>
        </description>
      </enum>
    </type>
    <description>
      <text>File type.</text>
    </description>
  </typedef>
  <typedef name="service-type">
    <type name="enumeration">
      <enum name="module">
        <value value="7"/>
        <description>
          <text>Module file path type.</text>
        </description>
      </enum>
    </type>
    <description>
      <text>Service type.</text>
    </description>
  </typedef>
  <typedef name="action-type">
    <type name="enumeration">
      <enum name="all">
        <value value="0"/>
        <description>
          <text>The action of deleting module package is all.</text>
        </description>
      </enum>
      <enum name="single">
        <value value="1"/>
        <description>
          <text>The action of deleting module package is single.</text>
        </description>
      </enum>
    </type>
    <description>
      <text>Specify the action of deleting module package.</text>
    </description>
  </typedef>
  <typedef name="transfer-type">
    <type name="enumeration">
      <enum name="ftp">
        <value value="0"/>
        <description>
          <text>FTP mode.</text>
        </description>
      </enum>
      <enum name="sftp">
        <value value="1"/>
        <description>
          <text>SFTP mode.</text>
        </description>
      </enum>
    </type>
    <description>
      <text>Transfer type.</text>
    </description>
  </typedef>
  <container name="module-management">
    <config value="false"/>
    <description>
      <text>Module package management.</text>
    </description>
    <container name="module-infos">
      <description>
        <text>List of module packet informations.</text>
      </description>
      <list name="module-info">
        <key value="package-name"/>
        <description>
          <text>Operational data of a module packet information.</text>
        </description>
        <leaf name="package-name">
          <type name="string">
            <length value="5..63"/>
          </type>
          <description>
            <text>Name of the current module package.</text>
          </description>
        </leaf>
        <leaf name="version">
          <type name="string">
            <length value="1..63"/>
          </type>
          <description>
            <text>Version of the current module package.</text>
          </description>
        </leaf>
        <leaf name="module-name">
          <type name="string">
            <length value="1..63"/>
          </type>
          <description>
            <text>Name of the current module.</text>
          </description>
        </leaf>
        <leaf name="state">
          <type name="module-state"/>
          <description>
            <text>Status of the current module package.</text>
          </description>
        </leaf>
        <leaf name="runtime">
          <type name="yang:date-and-time"/>
          <description>
            <text>Run time of the current module package.</text>
          </description>
        </leaf>
        <leaf name="path">
          <type name="string">
            <length value="1..127"/>
          </type>
          <description>
            <text>Path of the current module package.</text>
          </description>
        </leaf>
      </list>
    </container>
    <container name="next-startup-modules">
      <description>
        <text>List of next startup module packet informations.</text>
      </description>
      <list name="next-startup-module">
        <key value="name"/>
        <description>
          <text>Operational data of a module startup packet information.</text>
        </description>
        <leaf name="name">
          <type name="string">
            <length value="5..63"/>
          </type>
          <description>
            <text>Name of a next startup module package.</text>
          </description>
        </leaf>
        <leaf name="path">
          <type name="string">
            <length value="1..127"/>
          </type>
          <description>
            <text>Path of a next startup module package.</text>
          </description>
        </leaf>
      </list>
    </container>
    <container name="operation-schedules">
      <description>
        <text>List of module operation process.</text>
      </description>
      <list name="operation-schedule">
        <key value="phase"/>
        <description>
          <text>Operational data of module operation process.</text>
        </description>
        <leaf name="phase">
          <type name="operation-type"/>
          <description>
            <text>Module operation type.</text>
          </description>
        </leaf>
        <leaf name="name">
          <type name="string">
            <length value="5..63"/>
          </type>
          <description>
            <text>Name of a module package.</text>
          </description>
        </leaf>
        <leaf name="status">
          <type name="operation-status"/>
          <description>
            <text>Module operation status.</text>
          </description>
        </leaf>
        <leaf name="schedule">
          <type name="pub-type:percent"/>
          <description>
            <text>Value of the module operation process.</text>
          </description>
        </leaf>
      </list>
    </container>
    <container name="download-package-schedule">
      <description>
        <text>Operational data of package loading progress.</text>
      </description>
      <leaf name="name">
        <type name="string">
          <length value="1..127"/>
        </type>
        <description>
          <text>File name.</text>
        </description>
      </leaf>
      <leaf name="status">
        <type name="operation-status"/>
        <description>
          <text>Package loading status.</text>
        </description>
      </leaf>
      <leaf name="schedule">
        <type name="pub-type:percent"/>
        <description>
          <text>The schedule of file download, for example, progress (%).</text>
        </description>
      </leaf>
      <leaf name="transfer-index">
        <type name="uint32"/>
        <description>
          <text>Transfer index.</text>
        </description>
      </leaf>
      <leaf name="query-type">
        <type name="schedule-query-type"/>
        <description>
          <text>Progress query type.</text>
        </description>
      </leaf>
    </container>
    <container name="download-package-load-path">
      <description>
        <text>Operational data of load path before downloading a module package.</text>
      </description>
      <leaf name="file-type">
        <type name="file-type"/>
        <description>
          <text>File type.</text>
        </description>
      </leaf>
      <leaf name="service-type">
        <type name="service-type"/>
        <description>
          <text>Service type.</text>
        </description>
      </leaf>
      <leaf name="file-path">
        <type name="string">
          <length value="0..128"/>
        </type>
        <description>
          <text>File path. If the value of file-type node is module, the file path will be /$_install_mod/.</text>
        </description>
      </leaf>
    </container>
  </container>
  <rpc name="install-module">
    <ext:node-ref value="/file-operation/dirs/dir"/>
    <description>
      <text>Load a module package.</text>
    </description>
    <input>
      <leaf name="name">
        <type name="string">
          <length value="5..63"/>
        </type>
        <mandatory value="true"/>
        <description>
          <text>Name of a module package.</text>
        </description>
      </leaf>
    </input>
  </rpc>
  <rpc name="uninstall-module">
    <description>
      <text>Delete a module package.</text>
    </description>
    <ext:node-ref value="/module-management/module-infos/module-info"/>
    <input>
      <leaf name="action-type">
        <type name="action-type"/>
        <default value="single"/>
        <description>
          <text>Specify the action of uninstall module package.</text>
        </description>
      </leaf>
      <leaf name="name">
        <when condition="../action-type != 'all'"/>
        <type name="leafref">
          <path value="/module-management/module-infos/module-info/package-name"/>
        </type>
        <description>
          <text>Name of a module package.</text>
        </description>
      </leaf>
    </input>
  </rpc>
  <rpc name="startup-module">
    <ext:node-ref value="/file-operation/dirs/dir"/>
    <description>
      <text>Specify the module package that will be used at the next startup.</text>
    </description>
    <input>
      <leaf name="name">
        <type name="string">
          <length value="5..63"/>
        </type>
        <mandatory value="true"/>
        <description>
          <text>Specify the name of a module package that will be used at the next startup.</text>
        </description>
      </leaf>
    </input>
  </rpc>
  <rpc name="reset-startup-module">
    <description>
      <text>Delete a module packet that will be used at the next startup.</text>
    </description>
    <ext:node-ref value="/module-management/next-startup-modules/next-startup-module"/>
    <input>
      <leaf name="action-type">
        <type name="action-type"/>
        <default value="single"/>
        <description>
          <text>Specify the action of reset startup module package.</text>
        </description>
      </leaf>
      <leaf name="name">
        <when condition="../action-type != 'all'"/>
        <type name="leafref">
          <path value="/module-management/next-startup-modules/next-startup-module/name"/>
        </type>
        <description>
          <text>Specify the name of a module package that used at the next startup.</text>
        </description>
      </leaf>
    </input>
  </rpc>
  <rpc name="download-module-file">
    <description>
      <text>Download module package.</text>
    </description>
    <input>
      <leaf name="server-ip">
        <type name="inet:ipv4-address-no-zone"/>
        <mandatory value="true"/>
        <description>
          <text>Server address.</text>
        </description>
      </leaf>
      <leaf name="user-name">
        <type name="string">
          <length value="1..255"/>
        </type>
        <mandatory value="true"/>
        <description>
          <text>User name.</text>
        </description>
      </leaf>
      <leaf name="password">
        <type name="pub-type:password-extend">
          <length value="1..255"/>
        </type>
        <mandatory value="true"/>
        <description>
          <text>Password of FTP or SFTP server.</text>
        </description>
      </leaf>
      <leaf name="server-port">
        <type name="uint32">
          <range value="1..65535"/>
        </type>
        <mandatory value="true"/>
        <description>
          <text>Server port.</text>
        </description>
      </leaf>
      <leaf name="file-name">
        <type name="string">
          <length value="5..128"/>
        </type>
        <mandatory value="true"/>
        <description>
          <text>Package name.</text>
        </description>
      </leaf>
      <leaf name="transfer-type">
        <type name="transfer-type"/>
        <description>
          <text>Transfer type.</text>
        </description>
      </leaf>
    </input>
  </rpc>
</module>
