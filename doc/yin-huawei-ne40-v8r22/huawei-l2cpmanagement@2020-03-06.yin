<?xml version="1.0" encoding="UTF-8"?>
<module name="huawei-l2cpmanagement"
        xmlns="urn:ietf:params:xml:ns:yang:yin:1"
        xmlns:l2cpmanagement="urn:huawei:yang:huawei-l2cpmanagement"
        xmlns:ifm="urn:huawei:yang:huawei-ifm"
        xmlns:ext="urn:huawei:yang:huawei-extension"
        xmlns:l2vpn="urn:huawei:yang:huawei-l2vpn">
  <namespace uri="urn:huawei:yang:huawei-l2cpmanagement"/>
  <prefix value="l2cpmanagement"/>
  <import module="huawei-ifm">
    <prefix value="ifm"/>
  </import>
  <import module="huawei-extension">
    <prefix value="ext"/>
  </import>
  <import module="huawei-l2vpn">
    <prefix value="l2vpn"/>
  </import>
  <ext:task-name value="l2cpmanagement"/>
  <organization>
    <text>Huawei Technologies Co., Ltd.</text>
  </organization>
  <contact>
    <text>Huawei Industrial Base
Bantian, Longgang
Shenzhen 518129
People's Republic of China
Website: http://www.huawei.com
Email: support@huawei.com</text>
  </contact>
  <description>
    <text>L2 control protocol management.</text>
  </description>
  <revision date="2020-03-06">
    <description>
      <text>Change description.</text>
    </description>
    <reference>
      <text>Huawei private.</text>
    </reference>
  </revision>
  <revision date="2019-05-10">
    <description>
      <text>Init revision.</text>
    </description>
    <reference>
      <text>Huawei private.</text>
    </reference>
  </revision>
  <typedef name="global-action-status">
    <type name="enumeration">
      <enum name="forwarding">
        <value value="1"/>
        <description>
          <text>Link protocol forwarding.</text>
        </description>
      </enum>
      <enum name="discard">
        <value value="2"/>
        <description>
          <text>Link protocol discard.</text>
        </description>
      </enum>
    </type>
    <description>
      <text>Global link protocol action.</text>
    </description>
  </typedef>
  <typedef name="action-status">
    <type name="enumeration">
      <enum name="transport">
        <value value="0"/>
        <description>
          <text>Link protocol transport.</text>
        </description>
      </enum>
      <enum name="forwarding">
        <value value="1"/>
        <description>
          <text>Link protocol forwarding.</text>
        </description>
      </enum>
      <enum name="discard">
        <value value="2"/>
        <description>
          <text>Link protocol discard.</text>
        </description>
      </enum>
    </type>
    <description>
      <text>Link protocol action.</text>
    </description>
  </typedef>
  <typedef name="protocol-type">
    <type name="enumeration">
      <enum name="bpdu">
        <value value="13"/>
        <description>
          <text>Bridge Protocol Data Unit.</text>
        </description>
      </enum>
      <enum name="c-stp">
        <value value="2"/>
        <description>
          <text>Customer Spanning Tree Protocol.</text>
        </description>
      </enum>
      <enum name="s-stp">
        <value value="3"/>
        <description>
          <text>Provider Spanning Tree Protocol.</text>
        </description>
      </enum>
      <enum name="lacp">
        <value value="5"/>
        <description>
          <text>Link Aggregation Marker Protocol.</text>
        </description>
      </enum>
      <enum name="lamp">
        <value value="6"/>
        <description>
          <text>Link Aggregation Control Protocol.</text>
        </description>
      </enum>
      <enum name="lldp">
        <value value="10"/>
        <description>
          <text>Link Layer Discovery Protocol.</text>
        </description>
      </enum>
      <enum name="eapol">
        <value value="8"/>
        <description>
          <text>Port-Authentication Protocol(802.1X).</text>
        </description>
      </enum>
      <enum name="elmi">
        <value value="4"/>
        <description>
          <text>Ethernet Local Management Interface Protocol.</text>
        </description>
      </enum>
      <enum name="link-oam">
        <value value="14"/>
        <description>
          <text>Ethernet in the First Mile OAM (802.3AH).</text>
        </description>
      </enum>
      <enum name="esmc">
        <value value="9"/>
        <description>
          <text>Synchronization Status Message Protocol (SSM).</text>
        </description>
      </enum>
      <enum name="ptp">
        <value value="15"/>
        <description>
          <text>Precision Time Protocol (PTP-peer-delay).</text>
        </description>
      </enum>
      <enum name="mrp">
        <value value="7"/>
        <description>
          <text>Multicast Registration Protocol (MRP).</text>
        </description>
      </enum>
    </type>
    <description>
      <text>Link protocol type.</text>
    </description>
  </typedef>
  <container name="l2cpmanagement">
    <description>
      <text>L2 control protocol management.</text>
    </description>
    <container name="link-protocol-global">
      <description>
        <text>Configure the global link protocol action.</text>
      </description>
      <leaf name="elmi-status">
        <type name="global-action-status"/>
        <default value="discard"/>
        <description>
          <text>Specify Ethernet Local Management Interface Protocol (E-LMI) configuration information.</text>
        </description>
      </leaf>
      <leaf name="eoam3ah-status">
        <type name="global-action-status"/>
        <default value="discard"/>
        <description>
          <text>Specify Ethernet in the First Mile OAM (802.3AH) configuration information.</text>
        </description>
      </leaf>
      <leaf name="linkoam-status">
        <type name="global-action-status"/>
        <default value="discard"/>
        <description>
          <text>Specify Ethernet in the First Mile OAM (802.3AH) configuration information.</text>
        </description>
      </leaf>
      <leaf name="ptp-status">
        <type name="global-action-status"/>
        <default value="discard"/>
        <description>
          <text>Specify Precision Time Protocol (PTP-peer-delay) configuration information.</text>
        </description>
      </leaf>
      <leaf name="bpdubridge-status">
        <type name="global-action-status"/>
        <default value="discard"/>
        <description>
          <text>Specify bpdu bridge configuration information.</text>
        </description>
      </leaf>
      <leaf name="cstp-status">
        <type name="global-action-status"/>
        <default value="forwarding"/>
        <description>
          <text>Specify Customer Spanning Tree Protocol (c-stp) configuration information.</text>
        </description>
      </leaf>
    </container>
  </container>
  <augment target-node="/ifm:ifm/ifm:interfaces/ifm:interface">
    <description>
      <text>Interface link protocol actions.</text>
    </description>
    <container name="protocol-actions">
      <when condition="(../ifm:class='main-interface') and (../ifm:type='Ethernet' or ../ifm:type='GigabitEthernet' or ../ifm:type='Eth-Trunk' or ../ifm:type='100GE' or ../ifm:type='XGigabitEthernet' or ../ifm:type='40GE' or ../ifm:type='10GE' or ../ifm:type='400GE' or ../ifm:type='25GE' or ../ifm:type='FlexE' or ../ifm:type='50GE' or ../ifm:type='50|100GE')"/>
      <description>
        <text>List of the interface link protocol actions.</text>
      </description>
      <list name="protocol-action">
        <must condition="(((action='discard') and (protocol-type='lacp' or protocol-type='lamp') and ((/l2vpn:l2vpn/l2vpn:instances/l2vpn:instance/l2vpn:vpws-ldp/l2vpn:acs/l2vpn:ac[l2vpn:interface-name=current()/../../ifm:name]/l2vpn:access-port) or (/l2vpn:l2vpn/l2vpn:instances/l2vpn:instance/l2vpn:vpws-local-ccc/l2vpn:acs/l2vpn:ac[l2vpn:interface-name=current()/../../ifm:name]/l2vpn:access-port))) or ((action='forwarding') and (protocol-type='lacp' or protocol-type='lamp') and (not((/l2vpn:l2vpn/l2vpn:instances/l2vpn:instance/l2vpn:vpws-ldp/l2vpn:acs/l2vpn:ac[l2vpn:interface-name=current()/../../ifm:name]/l2vpn:access-port) or (/l2vpn:l2vpn/l2vpn:instances/l2vpn:instance/l2vpn:vpws-local-ccc/l2vpn:acs/l2vpn:ac[l2vpn:interface-name=current()/../../ifm:name]/l2vpn:access-port)))) or (protocol-type!='lacp' and protocol-type!='lamp'))"/>
        <key value="protocol-type"/>
        <description>
          <text>Configure the link protocol action.</text>
        </description>
        <leaf name="protocol-type">
          <type name="protocol-type"/>
          <description>
            <text>Protocol type.</text>
          </description>
        </leaf>
        <leaf name="action">
          <type name="action-status"/>
          <mandatory value="true"/>
          <description>
            <text>Protocol action.</text>
          </description>
        </leaf>
      </list>
    </container>
  </augment>
</module>
