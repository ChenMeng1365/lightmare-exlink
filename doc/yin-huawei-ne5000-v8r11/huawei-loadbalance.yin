<?xml version="1.0" encoding="UTF-8"?>
<module name="huawei-loadbalance"
        xmlns="urn:ietf:params:xml:ns:yang:yin:1"
        xmlns:loadbalance="urn:huawei:yang:huawei-loadbalance"
        xmlns:ifm="urn:huawei:yang:huawei-ifm"
        xmlns:pub-type="urn:huawei:yang:huawei-pub-type"
        xmlns:ext="urn:huawei:yang:huawei-extension"
        xmlns:devm="urn:huawei:yang:huawei-devm"
        xmlns:devm-vnf="urn:huawei:yang:huawei-devm-vnf">
  <yang-version value="1"/>
  <namespace uri="urn:huawei:yang:huawei-loadbalance"/>
  <prefix value="loadbalance"/>
  <import module="huawei-ifm">
    <prefix value="ifm"/>
  </import>
  <import module="huawei-pub-type">
    <prefix value="pub-type"/>
  </import>
  <import module="huawei-extension">
    <prefix value="ext"/>
  </import>
  <import module="huawei-devm">
    <prefix value="devm"/>
  </import>
  <import module="huawei-devm-vnf">
    <prefix value="devm-vnf"/>
  </import>
  <organization>
    <text>Huawei Technologies Co., Ltd.</text>
  </organization>
  <contact>
    <text>Huawei Industrial Base
Bantian, Longgang
Shenzhen 518129
People's Republic of China
Website: http://www.huawei.com
Email: support@huawei.com</text>
  </contact>
  <description>
    <text>Load balancing.</text>
  </description>
  <revision date="2020-04-20">
    <description>
      <text>Update Nodes.</text>
    </description>
    <reference>
      <text>Huawei private.</text>
    </reference>
  </revision>
  <revision date="2019-04-01">
    <description>
      <text>Initial revision.</text>
    </description>
    <reference>
      <text>Huawei private.</text>
    </reference>
  </revision>
  <typedef name="trunk-ecmp">
    <type name="enumeration">
      <enum name="invalid">
        <value value="0"/>
        <description>
          <text>Invalid value.</text>
        </description>
      </enum>
      <enum name="ecmp">
        <value value="4"/>
        <description>
          <text>IIP module load balancing.</text>
        </description>
      </enum>
      <enum name="ecmp1">
        <value value="1"/>
        <description>
          <text>IIP module one-level load balancing.</text>
        </description>
      </enum>
      <enum name="ecmp2">
        <value value="2"/>
        <description>
          <text>IIP module two-level load balancing.</text>
        </description>
      </enum>
      <enum name="trunk">
        <value value="3"/>
        <description>
          <text>Trunk mode.</text>
        </description>
      </enum>
      <enum name="ip">
        <value value="5"/>
        <description>
          <text>IP mode.</text>
        </description>
      </enum>
      <enum name="mac">
        <value value="6"/>
        <description>
          <text>MAC mode.</text>
        </description>
      </enum>
      <enum name="vll">
        <value value="7"/>
        <description>
          <text>VLL mode.</text>
        </description>
      </enum>
    </type>
    <description>
      <text>Load balancing trunk ecmp.</text>
    </description>
  </typedef>
  <typedef name="hash-material">
    <type name="enumeration">
      <enum name="invalid">
        <value value="0"/>
        <description>
          <text>Invalid value.</text>
        </description>
      </enum>
      <enum name="l2">
        <value value="1"/>
        <description>
          <text>L2 (Hash based on the source MAC address and destination MAC address. If the source IP address and destination IP address of the uplink traffic on the interface board remain unchanged but the MAC address changes, L2 is recommended as the hash factor.).</text>
        </description>
      </enum>
      <enum name="l3">
        <value value="2"/>
        <description>
          <text>L3 (Hash based on the source IP address and destination IP address. If the source IP address and destination IP address of the uplink traffic on the interface board are evenly distributed, L3 is recommended as the hash factor.).</text>
        </description>
      </enum>
      <enum name="l4">
        <value value="3"/>
        <description>
          <text>L4 (Hash based on the source IP address, destination IP address, source port number, destination port number, and protocol number. If the source IP address and destination IP address of the uplink traffic on the interface board are not evenly distributed, L4 is recommended as the hash factor.).</text>
        </description>
      </enum>
    </type>
    <description>
      <text>Load balancing hash material.</text>
    </description>
  </typedef>
  <typedef name="cx-hash-arithmetic">
    <type name="enumeration">
      <enum name="arithmetic1">
        <value value="1"/>
        <description>
          <text>Arithmetic 1.</text>
        </description>
      </enum>
      <enum name="arithmetic2">
        <value value="2"/>
        <description>
          <text>Arithmetic 2.</text>
        </description>
      </enum>
      <enum name="arithmetic3">
        <value value="3"/>
        <description>
          <text>Arithmetic 3.</text>
        </description>
      </enum>
      <enum name="arithmetic4">
        <value value="4"/>
        <description>
          <text>Arithmetic 4.</text>
        </description>
      </enum>
      <enum name="arithmetic5">
        <value value="5"/>
        <description>
          <text>Arithmetic 5.</text>
        </description>
      </enum>
      <enum name="random">
        <value value="6"/>
        <description>
          <text>Random algorithm.</text>
        </description>
      </enum>
    </type>
    <description>
      <text>CX load balancing arithmetic.</text>
    </description>
  </typedef>
  <typedef name="cx-trunk-ecmp">
    <type name="enumeration">
      <enum name="ip">
        <value value="5"/>
        <description>
          <text>IP mode.</text>
        </description>
      </enum>
      <enum name="mac">
        <value value="6"/>
        <description>
          <text>MAC mode.</text>
        </description>
      </enum>
      <enum name="vll">
        <value value="7"/>
        <description>
          <text>VLL mode.</text>
        </description>
      </enum>
      <enum name="tunnel-info">
        <value value="8"/>
        <description>
          <text>Tunnel information.</text>
        </description>
      </enum>
      <enum name="tunnel-inner-ip">
        <value value="9"/>
        <description>
          <text>Tunnel inner IP information.</text>
        </description>
      </enum>
      <enum name="gtp">
        <value value="10"/>
        <description>
          <text>GTP tunnel.</text>
        </description>
      </enum>
    </type>
    <description>
      <text>CX load balancing trunk ecmp.</text>
    </description>
  </typedef>
  <typedef name="cx-hash-material">
    <type name="enumeration">
      <enum name="l2">
        <value value="1"/>
        <description>
          <text>L2 (Hash based on the source MAC address and destination MAC address. If the source IP address and destination IP address of the uplink traffic on the interface board remain unchanged but the MAC address changes, L2 is recommended as the hash factor.).</text>
        </description>
      </enum>
      <enum name="l3">
        <value value="2"/>
        <description>
          <text>L3 (Hash based on the source IP address and destination IP address. If the source IP address and destination IP address of the uplink traffic on the interface board are evenly distributed, L3 is recommended as the hash factor.).</text>
        </description>
      </enum>
      <enum name="l4">
        <value value="3"/>
        <description>
          <text>L4 (Hash based on the source IP address, destination IP address, source port number, destination port number, and protocol number. If the source IP address and destination IP address of the uplink traffic on the interface board are not evenly distributed, L4 is recommended as the hash factor.).</text>
        </description>
      </enum>
      <enum name="undo-disable">
        <value value="4"/>
        <description>
          <text>Enable the tunnel information function for the hash factor when an IP tunnel's fragmented packets are balanced.</text>
        </description>
      </enum>
      <enum name="disable">
        <value value="5"/>
        <description>
          <text>Disable the tunnel information function for the hash factor when an IP tunnel's fragmented packets are balanced.</text>
        </description>
      </enum>
      <enum name="label-ip">
        <value value="6"/>
        <description>
          <text>Label-IP.</text>
        </description>
      </enum>
      <enum name="label">
        <value value="7"/>
        <description>
          <text>Pw-label in VLL.</text>
        </description>
      </enum>
    </type>
    <description>
      <text>CX load balancing hash material.</text>
    </description>
  </typedef>
  <typedef name="cx-mulpe-flag">
    <type name="enumeration">
      <enum name="enable">
        <value value="0"/>
        <description>
          <text>Enable multi-path load balancing.</text>
        </description>
      </enum>
      <enum name="disable">
        <value value="255"/>
        <description>
          <text>Disable multi-path load balancing.</text>
        </description>
      </enum>
    </type>
    <description>
      <text>CX load balancing multi-path.</text>
    </description>
  </typedef>
  <typedef name="hash-ip-type">
    <type name="enumeration">
      <enum name="destination-ip">
        <value value="4"/>
        <description>
          <text>Use destination IP addresses as hash key.</text>
        </description>
      </enum>
      <enum name="source-ip">
        <value value="5"/>
        <description>
          <text>Use source IP addresses as hash key.</text>
        </description>
      </enum>
    </type>
    <description>
      <text>Hash key type.</text>
    </description>
  </typedef>
  <typedef name="cfg-type">
    <type name="enumeration">
      <enum name="all">
        <value value="0"/>
        <description>
          <text>Query load balancing hash information on all boards.</text>
        </description>
      </enum>
      <enum name="slot">
        <value value="1"/>
        <description>
          <text>Query load balancing hash information on a board.</text>
        </description>
      </enum>
    </type>
    <description>
      <text>Query mode.</text>
    </description>
  </typedef>
  <ext:task-name value="forwarding"/>
  <container name="loadbalance">
    <description>
      <text>Load balancing configuration.</text>
    </description>
    <container name="global-attribute">
      <description>
        <text>Configure global attribute.</text>
      </description>
      <leaf name="ucmp-enable">
        <type name="boolean"/>
        <default value="false"/>
        <description>
          <text>Enable/disable UCMP globally.</text>
        </description>
      </leaf>
      <leaf name="mpls-ucmp-enable">
        <type name="boolean"/>
        <default value="false"/>
        <description>
          <text>Enable/disable MPLS UCMP.</text>
        </description>
      </leaf>
      <leaf name="vxlan-l2vni-enable">
        <type name="boolean"/>
        <default value="false"/>
        <description>
          <text>Enable/disable L2VXLAN VNI-based load balancing.</text>
        </description>
      </leaf>
      <leaf name="vxlan-l3vni-enable">
        <type name="boolean"/>
        <default value="false"/>
        <description>
          <text>Enable/disable L3VXLAN VNI-based load balancing.</text>
        </description>
      </leaf>
      <leaf name="vxlan-l2deep-hash-enable">
        <type name="boolean"/>
        <default value="false"/>
        <description>
          <text>Enable/disable L2VXLAN DEEP HASH load balancing.</text>
        </description>
      </leaf>
      <leaf name="trunk-multicast-enable">
        <type name="boolean"/>
        <default value="false"/>
        <description>
          <text>Enable/disable trunk multicast load balancing.</text>
        </description>
      </leaf>
      <leaf name="mpls-te-convergence-enable">
        <type name="boolean"/>
        <default value="false"/>
        <description>
          <text>Enable/disable MPLS TE convergence separate.</text>
        </description>
      </leaf>
      <leaf name="mpls-loadblc-wtr">
        <type name="uint32">
          <range value="0|5..60"/>
        </type>
        <units name="s"/>
        <default value="0"/>
        <description>
          <text>Configures the delay time for MPLS equal-cost multiple path (ECMP) switchback.</text>
        </description>
      </leaf>
      <leaf name="tunnel-info-gtp-enable">
        <type name="boolean"/>
        <default value="true"/>
        <description>
          <text>Enable/disable GTP deep hash load balancing. This configuration does not support the/5880/or VSUF.</text>
        </description>
      </leaf>
    </container>
    <container name="hash-key-ip">
      <description>
        <text>Configure a device to use source or destination IP addresses as hash key to balance all incoming IP packets on a specific or all interface boards.</text>
      </description>
      <leaf name="ip-type">
        <type name="hash-ip-type"/>
        <description>
          <text>Set IP hash type.</text>
        </description>
      </leaf>
    </container>
    <container name="hash-key-ip-slots">
      <description>
        <text>List of configurations that enable a device to use source or destination IP addresses as hash key to balance all incoming IP packets on a specific or all interface boards.</text>
      </description>
      <list name="hash-key-ip-slot">
        <key value="slot-id"/>
        <description>
          <text>Configure a device to use source or destination IP addresses as hash key to balance all incoming IP packets on a specific or all interface boards.</text>
        </description>
        <leaf name="slot-id">
          <type name="string">
            <length value="1..32"/>
          </type>
          <description>
            <text>Slot ID of an interface board. The value range varies according to router hardware. NULL is for all slot.</text>
          </description>
        </leaf>
        <leaf name="ip-type">
          <type name="hash-ip-type"/>
          <mandatory value="true"/>
          <description>
            <text>Set IP hash type.</text>
          </description>
        </leaf>
      </list>
    </container>
    <container name="hash-instructions">
      <config value="false"/>
      <description>
        <text>List of load balancing hash information on a specified board or on all boards.</text>
      </description>
      <list name="hash-instruction">
        <key value="slot-id query-type"/>
        <config value="false"/>
        <description>
          <text>Statistics of load balancing hash information on a specified board or on all boards.</text>
        </description>
        <leaf name="slot-id">
          <type name="string">
            <length value="0..32"/>
          </type>
          <config value="false"/>
          <description>
            <text>Slot ID of an interface board. The value range varies according to router hardware.</text>
          </description>
        </leaf>
        <leaf name="query-type">
          <type name="cfg-type"/>
          <config value="false"/>
          <description>
            <text>Query mode of load balancing hash information.</text>
          </description>
        </leaf>
        <container name="infos">
          <config value="false"/>
          <description>
            <text>Statistics of load balancing hash-related configurations.</text>
          </description>
          <leaf name="info">
            <type name="string">
              <length value="1..127"/>
            </type>
            <config value="false"/>
            <status value="deprecated"/>
            <description>
              <text>Load balancing hash information. To check load balancing information, querying the load-balancing configuration node is recommended.</text>
            </description>
          </leaf>
        </container>
        <leaf name="tunnel-gtp-enable">
          <type name="boolean"/>
          <config value="false"/>
          <description>
            <text>This node displays whether tunnel information is used as a hash factor during hash calculation for GTP tunnel load balancing.</text>
          </description>
        </leaf>
      </list>
    </container>
    <container name="ecmp-stateful">
      <must condition="maximum&gt;minimum or not(maximum) or not(minimum)"/>
      <presence value="Configure ECMP stateful load balancing."/>
      <description>
        <text>Configure ECMP stateful load balancing.</text>
      </description>
      <leaf name="minimum">
        <type name="uint32">
          <range value="1..63"/>
        </type>
        <default value="1"/>
        <description>
          <text>Minimum interface number.</text>
        </description>
      </leaf>
      <leaf name="maximum">
        <type name="uint32">
          <range value="2..64"/>
        </type>
        <default value="64"/>
        <description>
          <text>Maximum interface number.</text>
        </description>
      </leaf>
      <leaf name="accuracy">
        <type name="uint32">
          <range value="1..4"/>
        </type>
        <default value="1"/>
        <description>
          <text>Accuracy of ECMP load balancing.</text>
        </description>
      </leaf>
    </container>
  </container>
  <augment target-node="/ifm:ifm/ifm:interfaces/ifm:interface">
    <description>
      <text>Load balancing configuration to the ifm module.</text>
    </description>
    <container name="loadbalance">
      <description>
        <text>Configure Load balancing.</text>
      </description>
      <container name="ucmp">
        <when condition="../../ifm:type = 'GigabitEthernet' or ../../ifm:type = 'Pos' or ../../ifm:type = '40GE' or ../../ifm:type = '100GE' or ../../ifm:type = 'XGigabitEthernet' or ../../ifm:type = 'ATM' or ../../ifm:type = '50|100GE' or ../../ifm:type = '50GE' or ../../ifm:type = '400GE' or ../../ifm:type = '25GE' or ../../ifm:type = '200GE' or ../../ifm:type = '10GE' or ../../ifm:type = 'FlexE' or ../../ifm:type = '4x10GE' or ../../ifm:type = '10x10GE' or ../../ifm:type = '3x40GE' or ../../ifm:type = '4x25GE' or ../../ifm:type = 'Ethernet'"/>
        <presence value="Enable UCMP on the interface"/>
        <description>
          <text>Enable/disable UCMP on an interface. To implement UCMP on equal-cost links with different bandwidth values, you can configure this function on each interface. Enabling or disabling UCMP on a physical interface takes effect only after the interface is restarted. UCMP is only for equal-cost routes. UCMP applies only to equal-cost routes and is independent of routing protocols, such as an IGP or BGP.</text>
        </description>
      </container>
      <container name="packet">
        <when condition="../../ifm:type = 'Ethernet' or ../../ifm:type = '100GE' or ../../ifm:type = '400GE' or ../../ifm:type = '40GE' or ../../ifm:type = 'GigabitEthernet' or ../../ifm:type = 'XGigabitEthernet' or ../../ifm:type = 'Ip-Trunk' or ../../ifm:type = 'Eth-Trunk' or ../../ifm:type = '50|100GE' or ../../ifm:type = '50GE' or ../../ifm:type = '25GE' or ../../ifm:type = '200GE' or ../../ifm:type = '10GE' or ../../ifm:type = 'FlexE' or ../../ifm:type = '4x10GE' or ../../ifm:type = '10x10GE' or ../../ifm:type = '3x40GE' or ../../ifm:type = '4x25GE'"/>
        <presence value="Enable per-packet load balancing on an interface"/>
        <description>
          <text>Enable/disable per-packet load balancing on specified interfaces.</text>
        </description>
      </container>
    </container>
  </augment>
  <augment target-node="/devm:devm/devm:lpu-boards/devm:lpu-board">
    <description>
      <text>Load balancing configuration to the devm module.</text>
    </description>
    <container name="loadbalance">
      <description>
        <text>Configure load balancing.</text>
      </description>
      <container name="dynamic-adjust">
        <description>
          <text>Configure dynamic load balancing.</text>
        </description>
        <leaf name="enable">
          <type name="boolean"/>
          <default value="false"/>
          <description>
            <text>Enable/disable dynamic load balancing.</text>
          </description>
        </leaf>
      </container>
      <container name="hash-arithmetic">
        <description>
          <text>Configure FE1 hash arithmetic on a specified board.</text>
        </description>
        <leaf name="arithmetic">
          <type name="cx-hash-arithmetic"/>
          <default value="random"/>
          <description>
            <text>Set hash algorithm.</text>
          </description>
        </leaf>
        <leaf name="second-hash-flag">
          <type name="boolean"/>
          <default value="false"/>
          <description>
            <text>Enable/disable second hash flag.</text>
          </description>
        </leaf>
      </container>
      <container name="hash-fields">
        <description>
          <text>List of FE1 hash fields configuration on a specified board.</text>
        </description>
        <list name="hash-field">
          <key value="trunk-ecmp"/>
          <description>
            <text>Configure hash mode, that is, the box attribute, indicating which load balancing mode is applicable to the box.</text>
          </description>
          <ext:generated-by value="system">
            <description>
              <text>The all instances are generated automatically.</text>
            </description>
          </ext:generated-by>
          <ext:operation-exclude value="create|delete">
            <description>
              <text>The all instances cannot be created or deleted.</text>
            </description>
          </ext:operation-exclude>
          <leaf name="trunk-ecmp">
            <type name="cx-trunk-ecmp"/>
            <description>
              <text>Hash mode.</text>
            </description>
          </leaf>
          <leaf name="material">
            <type name="cx-hash-material"/>
            <ext:dynamic-default>
              <ext:default-value value="l4">
                <when condition="../trunk-ecmp='ip' or ../trunk-ecmp='mac' or ../trunk-ecmp='vll'"/>
                <description>
                  <text>The default value is l4 when trunk-ecmp is IP or MAC or VLL.</text>
                </description>
              </ext:default-value>
              <ext:default-value value="disable">
                <when condition="../trunk-ecmp='tunnel-inner-ip'"/>
                <description>
                  <text>The default value is disable when trunk-ecmp is tunnel-inner-ip.</text>
                </description>
              </ext:default-value>
              <ext:default-value value="undo-disable">
                <when condition="../trunk-ecmp='tunnel-info' or ../trunk-ecmp='gtp'"/>
                <description>
                  <text>The default value is enable when trunk-ecmp is tunnel-info or GTP.</text>
                </description>
              </ext:default-value>
            </ext:dynamic-default>
            <must condition="(../trunk-ecmp='ip' and (../material='l2' or ../material='l3' or ../material='l4') ) or (../trunk-ecmp='mac' and (../material='l2' or ../material='l3' or ../material='l4' or ../material='label-ip') ) or ( (../trunk-ecmp='tunnel-info'  or ../trunk-ecmp='tunnel-inner-ip' or ../trunk-ecmp='gtp') and (../material='undo-disable' or ../material='disable') ) or (../trunk-ecmp='vll' and (../material='l2' or ../material='l3' or ../material='l4' or ../material='label-ip' or ../material='label') )"/>
            <description>
              <text>Set hash material. Please query the hash-instructions/hash-instruction/tunnel-gtp-enable node to check load balancing among GTP tunnels.</text>
            </description>
            <ext:support-filter value="true"/>
          </leaf>
        </list>
      </container>
      <container name="hash-seed">
        <presence value="FE1 hash seed configuration on a specified board."/>
        <description>
          <text>Enable/disable FE1 hash seed on a specified board.</text>
        </description>
        <leaf name="random-flag">
          <type name="boolean"/>
          <default value="false"/>
          <description>
            <text>Enable/disable random flag.</text>
          </description>
        </leaf>
        <leaf name="custom-seed">
          <type name="pub-type:hex-binary"/>
          <must condition="../custom-seed='0x0' or ../random-flag='false'"/>
          <default value="0x0"/>
          <description>
            <text>User-defined hash seed random number.</text>
          </description>
        </leaf>
      </container>
      <container name="hash-multipe">
        <description>
          <text>Configure FE1 hash Multi-path on a specified board.</text>
        </description>
        <leaf name="multipe-flag">
          <type name="cx-mulpe-flag"/>
          <default value="disable"/>
          <description>
            <text>Enable multi-path load balancing.</text>
          </description>
        </leaf>
      </container>
    </container>
  </augment>
  <augment target-node="/devm:devm/devm:mpu-boards/devm:mpu-board">
    <description>
      <text>Load balancing configuration to the devm module.</text>
    </description>
    <container name="loadbalance">
      <description>
        <text>Configure load balancing.</text>
      </description>
      <container name="dynamic-adjust">
        <description>
          <text>Configure dynamic load balancing.</text>
        </description>
        <leaf name="enable">
          <type name="boolean"/>
          <default value="false"/>
          <description>
            <text>Enable/disable dynamic load balancing.</text>
          </description>
        </leaf>
      </container>
      <container name="hash-arithmetic">
        <description>
          <text>Configure FE1 hash arithmetic on a specified board.</text>
        </description>
        <leaf name="arithmetic">
          <type name="cx-hash-arithmetic"/>
          <default value="random"/>
          <description>
            <text>Arithmetic.</text>
          </description>
        </leaf>
        <leaf name="second-hash-flag">
          <type name="boolean"/>
          <default value="false"/>
          <description>
            <text>Enable/disable second hash.</text>
          </description>
        </leaf>
      </container>
      <container name="hash-fields">
        <description>
          <text>List of FE1 hash fields configuration on a specified board.</text>
        </description>
        <list name="hash-field">
          <key value="trunk-ecmp"/>
          <description>
            <text>Configure hash mode, that is, the box attribute, indicating which load balancing mode is applicable to the box.</text>
          </description>
          <ext:generated-by value="system">
            <description>
              <text>The all instances are generated automatically.</text>
            </description>
          </ext:generated-by>
          <ext:operation-exclude value="create|delete">
            <description>
              <text>The all instances cannot be created or deleted.</text>
            </description>
          </ext:operation-exclude>
          <leaf name="trunk-ecmp">
            <type name="cx-trunk-ecmp"/>
            <description>
              <text>Hash mode.</text>
            </description>
          </leaf>
          <leaf name="material">
            <type name="cx-hash-material"/>
            <ext:dynamic-default>
              <ext:default-value value="l4">
                <when condition="../trunk-ecmp='ip' or ../trunk-ecmp='mac' or ../trunk-ecmp='vll'"/>
                <description>
                  <text>The default value is l4 when trunk-ecmp is IP or MAC or VLL.</text>
                </description>
              </ext:default-value>
              <ext:default-value value="disable">
                <when condition="../trunk-ecmp='tunnel-inner-ip'"/>
                <description>
                  <text>The default value is disable when trunk-ecmp is tunnel-inner-ip.</text>
                </description>
              </ext:default-value>
              <ext:default-value value="undo-disable">
                <when condition="../trunk-ecmp='tunnel-info' or ../trunk-ecmp='gtp'"/>
                <description>
                  <text>The default value is enable when trunk-ecmp is tunnel-info or GTP.</text>
                </description>
              </ext:default-value>
            </ext:dynamic-default>
            <must condition="(../trunk-ecmp='ip' and (../material='l2' or ../material='l3' or ../material='l4') ) or (../trunk-ecmp='mac' and (../material='l2' or ../material='l3' or ../material='l4' or ../material='label-ip') ) or ( (../trunk-ecmp='tunnel-info'  or ../trunk-ecmp='tunnel-inner-ip' or ../trunk-ecmp='gtp') and (../material='undo-disable' or ../material='disable') ) or (../trunk-ecmp='vll' and (../material='l2' or ../material='l3' or ../material='l4' or ../material='label-ip' or ../material='label') )"/>
            <description>
              <text>Set hash material. Please query the hash-instructions/hash-instruction/tunnel-gtp-enable node to check load balancing among GTP tunnels.</text>
            </description>
            <ext:support-filter value="true"/>
          </leaf>
        </list>
      </container>
      <container name="hash-seed">
        <presence value="FE1 hash seed configuration on a specified board."/>
        <description>
          <text>Enable/disable FE1 hash seed on a specified board.</text>
        </description>
        <leaf name="random-flag">
          <type name="boolean"/>
          <default value="false"/>
          <description>
            <text>Enable/disable random flag.</text>
          </description>
        </leaf>
        <leaf name="custom-seed">
          <type name="pub-type:hex-binary"/>
          <must condition="../custom-seed='0x0' or ../random-flag='false'"/>
          <default value="0x0"/>
          <description>
            <text>User-defined hash seed random number.</text>
          </description>
        </leaf>
      </container>
      <container name="hash-multipe">
        <description>
          <text>Configure FE1 hash Multi-PE on a specified board.</text>
        </description>
        <leaf name="multipe-flag">
          <type name="cx-mulpe-flag"/>
          <default value="disable"/>
          <description>
            <text>Multi-path load balancing.</text>
          </description>
        </leaf>
      </container>
    </container>
  </augment>
  <augment target-node="/devm-vnf:devm-vnf/devm-vnf:vnf-boards/devm-vnf:vnf-board">
    <description>
      <text>Load balancing configuration to the devm module.</text>
    </description>
    <container name="loadbalance">
      <description>
        <text>Configure load balance.</text>
      </description>
      <container name="hash-arithmetic">
        <description>
          <text>Configure FE1 hash arithmetic on a specified board.</text>
        </description>
        <leaf name="arithmetic">
          <type name="cx-hash-arithmetic"/>
          <default value="random"/>
          <description>
            <text>Set hash algorithm.</text>
          </description>
        </leaf>
        <leaf name="second-hash-flag">
          <type name="boolean"/>
          <default value="false"/>
          <description>
            <text>Enable/disable second hash.</text>
          </description>
        </leaf>
      </container>
      <container name="hash-fields">
        <description>
          <text>List of FE1 hash fields configuration on a specified board.</text>
        </description>
        <list name="hash-field">
          <key value="trunk-ecmp"/>
          <description>
            <text>Configure hash mode, that is, the box attribute, indicating which load balancing mode is applicable to the box.</text>
          </description>
          <ext:generated-by value="system">
            <description>
              <text>The all instances are generated automatically.</text>
            </description>
          </ext:generated-by>
          <ext:operation-exclude value="create|delete">
            <description>
              <text>The all instances cannot be created or deleted.</text>
            </description>
          </ext:operation-exclude>
          <leaf name="trunk-ecmp">
            <type name="cx-trunk-ecmp"/>
            <description>
              <text>Hash mode.</text>
            </description>
          </leaf>
          <leaf name="material">
            <type name="cx-hash-material"/>
            <ext:dynamic-default>
              <ext:default-value value="l4">
                <when condition="../trunk-ecmp='ip'"/>
                <description>
                  <text>The default value is l4 when trunk-ecmp is IP or MAC or VLL.</text>
                </description>
              </ext:default-value>
              <ext:default-value value="undo-disable">
                <when condition="../trunk-ecmp='tunnel-info' or ../trunk-ecmp='gtp'"/>
                <description>
                  <text>The default value is enable when trunk-ecmp is tunnel-info or GTP.</text>
                </description>
              </ext:default-value>
            </ext:dynamic-default>
            <must condition="(../trunk-ecmp='ip' and (../material='l2' or ../material='l3' or ../material='l4') ) or ( (../trunk-ecmp='tunnel-info' or ../trunk-ecmp='gtp') and (../material='undo-disable' or ../material='disable') )"/>
            <description>
              <text>Set hash material. Please query the hash-instructions/hash-instruction/tunnel-gtp-enable node to check load balancing among GTP tunnels.</text>
            </description>
            <ext:support-filter value="true"/>
          </leaf>
        </list>
      </container>
      <container name="hash-seed">
        <presence value="FE1 hash seed configuration on a specified board."/>
        <description>
          <text>Enable/disable FE1 hash seed on a specified board.</text>
        </description>
        <leaf name="random-flag">
          <type name="boolean"/>
          <default value="false"/>
          <description>
            <text>Enable/disable random flag.</text>
          </description>
        </leaf>
        <leaf name="custom-seed">
          <type name="pub-type:hex-binary"/>
          <must condition="../custom-seed='0x0' or ../random-flag='false'"/>
          <default value="0x0"/>
          <description>
            <text>User-defined hash seed random number.</text>
          </description>
        </leaf>
      </container>
    </container>
  </augment>
</module>
