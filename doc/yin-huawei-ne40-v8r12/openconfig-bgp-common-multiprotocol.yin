<?xml version="1.0" encoding="UTF-8"?>
<submodule name="openconfig-bgp-common-multiprotocol"
           xmlns="urn:ietf:params:xml:ns:yang:yin:1"
           xmlns:oc-bgp="http://openconfig.net/yang/bgp"
           xmlns:oc-ext="http://openconfig.net/yang/openconfig-ext"
           xmlns:oc-bgp-types="http://openconfig.net/yang/bgp-types"
           xmlns:oc-rpol="http://openconfig.net/yang/routing-policy"
           xmlns:oc-types="http://openconfig.net/yang/openconfig-types">
  <belongs-to module="openconfig-bgp">
    <prefix value="oc-bgp"/>
  </belongs-to>
  <import module="openconfig-extensions">
    <prefix value="oc-ext"/>
  </import>
  <import module="openconfig-bgp-types">
    <prefix value="oc-bgp-types"/>
  </import>
  <import module="openconfig-routing-policy">
    <prefix value="oc-rpol"/>
  </import>
  <import module="openconfig-types">
    <prefix value="oc-types"/>
  </import>
  <include module="openconfig-bgp-common"/>
  <organization>
    <text>OpenConfig working group</text>
  </organization>
  <contact>
    <text>OpenConfig working group
netopenconfig@googlegroups.com</text>
  </contact>
  <description>
    <text>This sub-module contains groupings that are related to support
for multiple protocols in BGP. The groupings are common across
multiple contexts.</text>
  </description>
  <oc-ext:openconfig-version semver="6.0.0"/>
  <revision date="2019-07-10">
    <description>
      <text>Normalise timestamp units to nanoseconds.</text>
    </description>
    <reference>
      <text>6.0.0</text>
    </reference>
  </revision>
  <revision date="2019-05-28">
    <description>
      <text>Clarify prefix counter descriptions, add received-pre-policy
counter.</text>
    </description>
    <reference>
      <text>5.2.0</text>
    </reference>
  </revision>
  <revision date="2019-04-16">
    <description>
      <text>Add BGP RIB to the top-level BGP container</text>
    </description>
    <reference>
      <text>5.1.0</text>
    </reference>
  </revision>
  <revision date="2018-11-21">
    <description>
      <text>Add OpenConfig module metadata extensions.</text>
    </description>
    <reference>
      <text>5.0.2</text>
    </reference>
  </revision>
  <revision date="2018-08-20">
    <description>
      <text>Correct description of AFI-SAFI enabled leaf.</text>
    </description>
    <reference>
      <text>5.0.1</text>
    </reference>
  </revision>
  <revision date="2018-04-11">
    <description>
      <text>Correct naming of BGP maximum prefix warning percentage leaf.</text>
    </description>
    <reference>
      <text>5.0.0</text>
    </reference>
  </revision>
  <revision date="2018-03-20">
    <description>
      <text>Added SR-TE policy SAFI</text>
    </description>
    <reference>
      <text>4.1.0</text>
    </reference>
  </revision>
  <revision date="2017-07-30">
    <description>
      <text>Clarification of add-paths send-max leaf</text>
    </description>
    <reference>
      <text>4.0.1</text>
    </reference>
  </revision>
  <revision date="2017-07-10">
    <description>
      <text>Add error notifications; moved add-paths config; add AS
prepend policy features; removed unneeded config leaves</text>
    </description>
    <reference>
      <text>4.0.0</text>
    </reference>
  </revision>
  <revision date="2017-02-02">
    <description>
      <text>Bugfix to remove remaining global-level policy data</text>
    </description>
    <reference>
      <text>3.0.1</text>
    </reference>
  </revision>
  <revision date="2017-01-26">
    <description>
      <text>Add dynamic neighbor support, migrate to OpenConfig types</text>
    </description>
    <reference>
      <text>3.0.0</text>
    </reference>
  </revision>
  <revision date="2016-06-21">
    <description>
      <text>OpenConfig BGP refactor</text>
    </description>
    <reference>
      <text>2.1.1</text>
    </reference>
  </revision>
  <grouping name="bgp-common-mp-afi-safi-graceful-restart-config">
    <description>
      <text>BGP graceful restart parameters that apply on a per-AFI-SAFI
basis</text>
    </description>
    <leaf name="enabled">
      <type name="boolean"/>
      <default value="false"/>
      <description>
        <text>This leaf indicates whether graceful-restart is enabled for
this AFI-SAFI</text>
      </description>
    </leaf>
  </grouping>
  <grouping name="bgp-common-mp-afi-safi-config">
    <description>
      <text>Configuration parameters used for all BGP AFI-SAFIs</text>
    </description>
    <leaf name="afi-safi-name">
      <type name="identityref">
        <base name="oc-bgp-types:AFI_SAFI_TYPE"/>
      </type>
      <description>
        <text>AFI,SAFI</text>
      </description>
    </leaf>
    <leaf name="enabled">
      <type name="boolean"/>
      <default value="false"/>
      <description>
        <text>This leaf indicates whether the AFI-SAFI is
enabled for the neighbour or group</text>
      </description>
    </leaf>
  </grouping>
  <grouping name="bgp-common-mp-all-afi-safi-list-contents">
    <description>
      <text>A common grouping used for contents of the list that is used
for AFI-SAFI entries</text>
    </description>
    <uses name="oc-rpol:apply-policy-group"/>
    <uses name="bgp-common-mp-ipv4-unicast-group"/>
    <uses name="bgp-common-mp-ipv6-unicast-group"/>
    <uses name="bgp-common-mp-ipv4-labeled-unicast-group"/>
    <uses name="bgp-common-mp-ipv6-labeled-unicast-group"/>
    <uses name="bgp-common-mp-l3vpn-ipv4-unicast-group"/>
    <uses name="bgp-common-mp-l3vpn-ipv6-unicast-group"/>
    <uses name="bgp-common-mp-l3vpn-ipv4-multicast-group"/>
    <uses name="bgp-common-mp-l3vpn-ipv6-multicast-group"/>
    <uses name="bgp-common-mp-l2vpn-vpls-group"/>
    <uses name="bgp-common-mp-l2vpn-evpn-group"/>
    <uses name="bgp-common-mp-srte-policy-ipv4-group"/>
    <uses name="bgp-common-mp-srte-policy-ipv6-group"/>
  </grouping>
  <grouping name="bgp-common-mp-ipv4-unicast-group">
    <description>
      <text>Group for IPv4 Unicast configuration options</text>
    </description>
    <container name="ipv4-unicast">
      <when condition="../afi-safi-name = 'oc-bgp-types:IPV4_UNICAST'">
        <description>
          <text>Include this container for IPv4 Unicast specific
configuration</text>
        </description>
      </when>
      <description>
        <text>IPv4 unicast configuration options</text>
      </description>
      <uses name="bgp-common-mp-ipv4-ipv6-unicast-common"/>
    </container>
  </grouping>
  <grouping name="bgp-common-mp-ipv6-unicast-group">
    <description>
      <text>Group for IPv6 Unicast configuration options</text>
    </description>
    <container name="ipv6-unicast">
      <when condition="../afi-safi-name = 'oc-bgp-types:IPV6_UNICAST'">
        <description>
          <text>Include this container for IPv6 Unicast specific
configuration</text>
        </description>
      </when>
      <description>
        <text>IPv6 unicast configuration options</text>
      </description>
      <uses name="bgp-common-mp-ipv4-ipv6-unicast-common"/>
    </container>
  </grouping>
  <grouping name="bgp-common-mp-ipv4-labeled-unicast-group">
    <description>
      <text>Group for IPv4 Labeled Unicast configuration options</text>
    </description>
    <container name="ipv4-labeled-unicast">
      <when condition="../afi-safi-name = 'oc-bgp-types:IPV4_LABELED_UNICAST'">
        <description>
          <text>Include this container for IPv4 Labeled Unicast specific
configuration</text>
        </description>
      </when>
      <description>
        <text>IPv4 Labeled Unicast configuration options</text>
      </description>
      <uses name="bgp-common-mp-all-afi-safi-common"/>
    </container>
  </grouping>
  <grouping name="bgp-common-mp-ipv6-labeled-unicast-group">
    <description>
      <text>Group for IPv6 Labeled Unicast configuration options</text>
    </description>
    <container name="ipv6-labeled-unicast">
      <when condition="../afi-safi-name = 'oc-bgp-types:IPV6_LABELED_UNICAST'">
        <description>
          <text>Include this container for IPv6 Labeled Unicast specific
configuration</text>
        </description>
      </when>
      <description>
        <text>IPv6 Labeled Unicast configuration options</text>
      </description>
      <uses name="bgp-common-mp-all-afi-safi-common"/>
    </container>
  </grouping>
  <grouping name="bgp-common-mp-l3vpn-ipv4-unicast-group">
    <description>
      <text>Group for IPv4 Unicast L3VPN configuration options</text>
    </description>
    <container name="l3vpn-ipv4-unicast">
      <when condition="../afi-safi-name = 'oc-bgp-types:L3VPN_IPV4_UNICAST'">
        <description>
          <text>Include this container for IPv4 Unicast L3VPN specific
configuration</text>
        </description>
      </when>
      <description>
        <text>Unicast IPv4 L3VPN configuration options</text>
      </description>
      <uses name="bgp-common-mp-l3vpn-ipv4-ipv6-unicast-common"/>
    </container>
  </grouping>
  <grouping name="bgp-common-mp-l3vpn-ipv6-unicast-group">
    <description>
      <text>Group for IPv6 Unicast L3VPN configuration options</text>
    </description>
    <container name="l3vpn-ipv6-unicast">
      <when condition="../afi-safi-name = 'oc-bgp-types:L3VPN_IPV6_UNICAST'">
        <description>
          <text>Include this container for unicast IPv6 L3VPN specific
configuration</text>
        </description>
      </when>
      <description>
        <text>Unicast IPv6 L3VPN configuration options</text>
      </description>
      <uses name="bgp-common-mp-l3vpn-ipv4-ipv6-unicast-common"/>
    </container>
  </grouping>
  <grouping name="bgp-common-mp-l3vpn-ipv4-multicast-group">
    <description>
      <text>Group for IPv4 L3VPN multicast configuration options</text>
    </description>
    <container name="l3vpn-ipv4-multicast">
      <when condition="../afi-safi-name = 'oc-bgp-types:L3VPN_IPV4_MULTICAST'">
        <description>
          <text>Include this container for multicast IPv6 L3VPN specific
configuration</text>
        </description>
      </when>
      <description>
        <text>Multicast IPv4 L3VPN configuration options</text>
      </description>
      <uses name="bgp-common-mp-l3vpn-ipv4-ipv6-multicast-common"/>
    </container>
  </grouping>
  <grouping name="bgp-common-mp-l3vpn-ipv6-multicast-group">
    <description>
      <text>Group for IPv6 L3VPN multicast configuration options</text>
    </description>
    <container name="l3vpn-ipv6-multicast">
      <when condition="../afi-safi-name = 'oc-bgp-types:L3VPN_IPV6_MULTICAST'">
        <description>
          <text>Include this container for multicast IPv6 L3VPN specific
configuration</text>
        </description>
      </when>
      <description>
        <text>Multicast IPv6 L3VPN configuration options</text>
      </description>
      <uses name="bgp-common-mp-l3vpn-ipv4-ipv6-multicast-common"/>
    </container>
  </grouping>
  <grouping name="bgp-common-mp-l2vpn-vpls-group">
    <description>
      <text>Group for BGP-signalled VPLS configuration options</text>
    </description>
    <container name="l2vpn-vpls">
      <when condition="../afi-safi-name = 'oc-bgp-types:L2VPN_VPLS'">
        <description>
          <text>Include this container for BGP-signalled VPLS specific
configuration</text>
        </description>
      </when>
      <description>
        <text>BGP-signalled VPLS configuration options</text>
      </description>
      <uses name="bgp-common-mp-l2vpn-common"/>
    </container>
  </grouping>
  <grouping name="bgp-common-mp-l2vpn-evpn-group">
    <description>
      <text>Group for BGP EVPN configuration options</text>
    </description>
    <container name="l2vpn-evpn">
      <when condition="../afi-safi-name = 'oc-bgp-types:L2VPN_EVPN'">
        <description>
          <text>Include this container for BGP EVPN specific
configuration</text>
        </description>
      </when>
      <description>
        <text>BGP EVPN configuration options</text>
      </description>
      <uses name="bgp-common-mp-l2vpn-common"/>
    </container>
  </grouping>
  <grouping name="bgp-common-mp-all-afi-safi-common">
    <description>
      <text>Grouping for configuration common to all AFI,SAFI</text>
    </description>
    <container name="prefix-limit">
      <description>
        <text>Configure the maximum number of prefixes that will be
accepted from a peer</text>
      </description>
      <container name="config">
        <description>
          <text>Configuration parameters relating to the prefix
limit for the AFI-SAFI</text>
        </description>
        <uses name="bgp-common-mp-all-afi-safi-common-prefix-limit-config"/>
      </container>
      <container name="state">
        <config value="false"/>
        <description>
          <text>State information relating to the prefix-limit for the
AFI-SAFI</text>
        </description>
        <uses name="bgp-common-mp-all-afi-safi-common-prefix-limit-config"/>
      </container>
    </container>
  </grouping>
  <grouping name="bgp-common-mp-ipv4-ipv6-unicast-common">
    <description>
      <text>Common configuration that is applicable for IPv4 and IPv6
unicast</text>
    </description>
    <uses name="bgp-common-mp-all-afi-safi-common"/>
    <container name="config">
      <description>
        <text>Configuration parameters for common IPv4 and IPv6 unicast
AFI-SAFI options</text>
      </description>
      <uses name="bgp-common-mp-ipv4-ipv6-unicast-common-config"/>
    </container>
    <container name="state">
      <config value="false"/>
      <description>
        <text>State information for common IPv4 and IPv6 unicast
parameters</text>
      </description>
      <uses name="bgp-common-mp-ipv4-ipv6-unicast-common-config"/>
    </container>
  </grouping>
  <grouping name="bgp-common-mp-l3vpn-ipv4-ipv6-unicast-common">
    <description>
      <text>Common configuration applied across L3VPN for IPv4
and IPv6</text>
    </description>
    <uses name="bgp-common-mp-all-afi-safi-common"/>
  </grouping>
  <grouping name="bgp-common-mp-l3vpn-ipv4-ipv6-multicast-common">
    <description>
      <text>Common configuration applied across L3VPN for IPv4
and IPv6</text>
    </description>
    <uses name="bgp-common-mp-all-afi-safi-common"/>
  </grouping>
  <grouping name="bgp-common-mp-l2vpn-common">
    <description>
      <text>Common configuration applied across L2VPN address
families</text>
    </description>
    <uses name="bgp-common-mp-all-afi-safi-common"/>
  </grouping>
  <grouping name="bgp-common-mp-srte-policy-ipv4-group">
    <description>
      <text>Grouping for SR-TE for AFI 1</text>
    </description>
    <container name="srte-policy-ipv4">
      <when condition="../afi-safi-name = 'oc-bgp-types:SRTE_POLICY_IPV4'">
        <description>
          <text>Only include this container when the address family is
specified to be SR-TE Policy SAFI for the IPv4 unicast
address family.</text>
        </description>
      </when>
      <description>
        <text>Configuration and operational state parameters relating to
the SR-TE Policy SAFI for IPv4 Unicast.</text>
      </description>
      <uses name="bgp-common-mp-all-afi-safi-common"/>
    </container>
  </grouping>
  <grouping name="bgp-common-mp-srte-policy-ipv6-group">
    <description>
      <text>Grouping for SR-TE for AFI 2</text>
    </description>
    <container name="srte-policy-ipv6">
      <when condition="../afi-safi-name = 'oc-bgp-types:SRTE_POLICY_IPV6'">
        <description>
          <text>Only include this container when the address family is
specified to be SR-TE Policy SAFI for the IPv6 unicast
address family.</text>
        </description>
      </when>
      <description>
        <text>Configuration and operational state parameters relating to
the SR-TE Policy SAFI for IPv6 Unicast.</text>
      </description>
      <uses name="bgp-common-mp-all-afi-safi-common"/>
    </container>
  </grouping>
  <grouping name="bgp-common-mp-all-afi-safi-common-prefix-limit-config">
    <description>
      <text>Configuration parameters relating to prefix-limits for an
AFI-SAFI</text>
    </description>
    <leaf name="max-prefixes">
      <type name="uint32"/>
      <description>
        <text>Maximum number of prefixes that will be accepted
from the neighbour</text>
      </description>
    </leaf>
    <leaf name="prevent-teardown">
      <type name="boolean"/>
      <default value="false"/>
      <description>
        <text>Do not tear down the BGP session when the maximum
prefix limit is exceeded, but rather only log a
warning. The default of this leaf is false, such
that when it is not specified, the session is torn
down.</text>
      </description>
    </leaf>
    <leaf name="warning-threshold-pct">
      <type name="oc-types:percentage"/>
      <description>
        <text>Threshold on number of prefixes that can be received
from a neighbour before generation of warning messages
or log entries. Expressed as a percentage of
max-prefixes</text>
      </description>
    </leaf>
    <leaf name="restart-timer">
      <type name="decimal64">
        <fraction-digits value="2"/>
      </type>
      <units name="seconds"/>
      <description>
        <text>Time interval in seconds after which the BGP session
is re-established after being torn down due to exceeding
the max-prefix limit.</text>
      </description>
    </leaf>
  </grouping>
  <grouping name="bgp-common-mp-ipv4-ipv6-unicast-common-config">
    <description>
      <text>Common configuration parameters for IPv4 and IPv6 Unicast
address families</text>
    </description>
    <leaf name="send-default-route">
      <type name="boolean"/>
      <default value="false"/>
      <description>
        <text>If set to true, send the default-route to the neighbour(s)</text>
      </description>
    </leaf>
  </grouping>
</submodule>
