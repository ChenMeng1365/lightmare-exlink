<?xml version="1.0" encoding="UTF-8"?>
<module name="huawei-evpn"
        xmlns="urn:ietf:params:xml:ns:yang:yin:1"
        xmlns:evpn="urn:huawei:yang:huawei-evpn"
        xmlns:acl="urn:huawei:yang:huawei-acl"
        xmlns:ni="urn:huawei:yang:huawei-network-instance"
        xmlns:l3vpn="urn:huawei:yang:huawei-l3vpn"
        xmlns:bd="urn:huawei:yang:huawei-bd"
        xmlns:ifm="urn:huawei:yang:huawei-ifm"
        xmlns:pub-type="urn:huawei:yang:huawei-pub-type"
        xmlns:rtp="urn:huawei:yang:huawei-routing-policy"
        xmlns:inet="urn:ietf:params:xml:ns:yang:ietf-inet-types"
        xmlns:ext="urn:huawei:yang:huawei-extension"
        xmlns:evpl="urn:huawei:yang:huawei-evpl"
        xmlns:bfd="urn:huawei:yang:huawei-bfd"
        xmlns:bgp="urn:huawei:yang:huawei-bgp"
        xmlns:bgp-evpn="urn:huawei:yang:huawei-bgp-evpn"
        xmlns:tnlm="urn:huawei:yang:huawei-tunnel-management"
        xmlns:l2vpn="urn:huawei:yang:huawei-l2vpn"
        xmlns:nvo3="urn:huawei:yang:huawei-nvo3"
        xmlns:yang="urn:ietf:params:xml:ns:yang:ietf-yang-types">
  <namespace uri="urn:huawei:yang:huawei-evpn"/>
  <prefix value="evpn"/>
  <import module="huawei-acl">
    <prefix value="acl"/>
  </import>
  <import module="huawei-network-instance">
    <prefix value="ni"/>
  </import>
  <import module="huawei-l3vpn">
    <prefix value="l3vpn"/>
  </import>
  <import module="huawei-bd">
    <prefix value="bd"/>
  </import>
  <import module="huawei-ifm">
    <prefix value="ifm"/>
  </import>
  <import module="huawei-pub-type">
    <prefix value="pub-type"/>
  </import>
  <import module="huawei-routing-policy">
    <prefix value="rtp"/>
  </import>
  <import module="ietf-inet-types">
    <prefix value="inet"/>
  </import>
  <import module="huawei-extension">
    <prefix value="ext"/>
  </import>
  <import module="huawei-evpl">
    <prefix value="evpl"/>
  </import>
  <import module="huawei-bfd">
    <prefix value="bfd"/>
  </import>
  <import module="huawei-bgp">
    <prefix value="bgp"/>
  </import>
  <import module="huawei-bgp-evpn">
    <prefix value="bgp-evpn"/>
  </import>
  <import module="huawei-tunnel-management">
    <prefix value="tnlm"/>
  </import>
  <import module="huawei-l2vpn">
    <prefix value="l2vpn"/>
  </import>
  <import module="huawei-nvo3">
    <prefix value="nvo3"/>
  </import>
  <import module="ietf-yang-types">
    <prefix value="yang"/>
  </import>
  <include module="huawei-evpn-type"/>
  <organization>
    <text>Huawei Technologies Co., Ltd.</text>
  </organization>
  <contact>
    <text>Huawei Industrial Base
Bantian, Longgang
Shenzhen 518129
People's Republic of China
Website: http://www.huawei.com
Email: support@huawei.com</text>
  </contact>
  <description>
    <text>EVPN configuration.</text>
  </description>
  <revision date="2020-05-04">
    <description>
      <text>Add container evpl-peer-info, add leaf local-ctrl-word in container evpl-info.</text>
    </description>
    <reference>
      <text>Huawei private.</text>
    </reference>
  </revision>
  <revision date="2020-04-20">
    <description>
      <text>Add node tunnel-policy-name, modify descriptions of YANG module.</text>
    </description>
    <reference>
      <text>Huawei private.</text>
    </reference>
  </revision>
  <revision date="2019-03-22">
    <description>
      <text>Initial revision.</text>
    </description>
    <reference>
      <text>Huawei private.</text>
    </reference>
  </revision>
  <ext:task-name value="evpnbgp"/>
  <container name="evpn">
    <description>
      <text>Configure of EVPN.</text>
    </description>
    <container name="base-process">
      <description>
        <text>Configure of EVPN base process.</text>
      </description>
      <leaf name="redundancy-mode">
        <type name="redundancy-mode"/>
        <default value="all-active"/>
        <description>
          <text>Redundancy mode.</text>
        </description>
      </leaf>
      <leaf name="source-address">
        <ext:operation-exclude value="update"/>
        <type name="inet:ipv4-address-no-zone"/>
        <description>
          <text>Source address.</text>
        </description>
      </leaf>
    </container>
    <container name="site">
      <presence value="evpn view"/>
      <description>
        <text>Enable/disable global EVPN configuration.</text>
      </description>
      <leaf name="df-election-mode">
        <type name="df-election-mode"/>
        <default value="per-interface"/>
        <description>
          <text>Global configuration DF election mode.</text>
        </description>
      </leaf>
      <leaf name="vpws-df-election-mode">
        <type name="vpws-df-election-mode"/>
        <default value="per-interface"/>
        <description>
          <text>VPWS DF select mode.</text>
        </description>
      </leaf>
      <leaf name="ac-influnced-enable">
        <type name="boolean"/>
        <default value="false"/>
        <description>
          <text>Enable/disable AC state influenced DF mode.</text>
        </description>
      </leaf>
      <leaf name="ad-per-es-split">
        <type name="ad-per-es-route-divmode"/>
        <default value="dont-divide-rt"/>
        <description>
          <text>EVPN AD per ES route split.</text>
        </description>
      </leaf>
      <leaf name="irb-reoriginated">
        <type name="boolean"/>
        <default value="false"/>
        <description>
          <text>Enable/disable IRB reoriginated without bridge domain.</text>
        </description>
      </leaf>
      <leaf name="vlan-extend-private-enable">
        <type name="boolean"/>
        <default value="false"/>
        <description>
          <text>Enable/disable VLAN extend extcommunity to carry VLAN in MAC routes.</text>
        </description>
      </leaf>
      <leaf name="vlan-extend-redirect-enable">
        <type name="boolean"/>
        <default value="false"/>
        <description>
          <text>Enable/disable VLAN extend extcommunity to redirect to the same ESI interface.</text>
        </description>
      </leaf>
      <leaf name="local-remote-frr-enable">
        <type name="boolean"/>
        <default value="false"/>
        <description>
          <text>Enable/disable local MAC and remote MAC to form FRR.</text>
        </description>
      </leaf>
      <leaf name="bypass-vxlan-enable">
        <type name="boolean"/>
        <default value="false"/>
        <description>
          <text>Enable/disable bypass VXLAN extcommunity, use for allow all-active device to form bypass VXLAN.</text>
        </description>
      </leaf>
      <leaf name="alm-threshold">
        <type name="uint32">
          <range value="1..4294967295"/>
        </type>
        <description>
          <text>Specify the alarm route threshold.</text>
        </description>
      </leaf>
      <leaf name="recovery-percentage">
        <when condition="../alm-threshold"/>
        <type name="uint32">
          <range value="1..95"/>
        </type>
        <units name="%"/>
        <default value="80"/>
        <description>
          <text>Specify the alarm route recovery percentage.</text>
        </description>
      </leaf>
      <leaf name="local-remote-vpws-frr-enable">
        <type name="boolean"/>
        <default value="false"/>
        <description>
          <text>Enable/disable the local and remote FRR for EVPN VPWS.</text>
        </description>
      </leaf>
      <leaf name="remote-vpws-frr-enable">
        <type name="boolean"/>
        <default value="false"/>
        <description>
          <text>Enable/disable the remote FRR for EVPN VPWS.</text>
        </description>
      </leaf>
      <leaf name="irb-split-group">
        <type name="boolean"/>
        <default value="true"/>
        <description>
          <text>Enable/disable IRB advertise under split group.</text>
        </description>
      </leaf>
      <leaf name="compatible">
        <type name="boolean"/>
        <default value="false"/>
        <description>
          <text>Enable/disable IRB routing rebirth into ARP routing and prefix routing.</text>
        </description>
      </leaf>
      <leaf name="advertising-vxlan-tunnel-mac">
        <type name="boolean"/>
        <default value="false"/>
        <description>
          <text>Enable/disable advertising MAC routes learned by VXLAN tunnel.</text>
        </description>
      </leaf>
      <leaf name="advertise-suppressed-route">
        <type name="boolean"/>
        <default value="false"/>
        <description>
          <text>Enable/disable advertising suppressed detail route.</text>
        </description>
      </leaf>
      <leaf name="routerid-extend-private-enable">
        <type name="boolean"/>
        <default value="false"/>
        <description>
          <text>Enable/disable router ID extend extcommunity for carrying router ID in EVPN routes.</text>
        </description>
      </leaf>
      <container name="mac-duplication">
        <description>
          <text>Configure MAC duplication.</text>
        </description>
        <leaf name="period">
          <type name="uint8">
            <range value="3..10"/>
          </type>
          <default value="5"/>
          <description>
            <text>Number of times that MAC duplication is detected in a period.</text>
          </description>
        </leaf>
        <leaf name="cycle">
          <type name="uint16">
            <range value="60..900"/>
          </type>
          <units name="s"/>
          <must condition="../cycle mod 10 = 0"/>
          <default value="180"/>
          <description>
            <text>Interval at which MAC duplication is detected.</text>
          </description>
        </leaf>
        <leaf name="recycle">
          <type name="uint16">
            <range value="120..3600"/>
          </type>
          <units name="s"/>
          <must condition="../recycle mod 10 = 0"/>
          <default value="540"/>
          <description>
            <text>Period after which suppression on MAC duplication is removed.</text>
          </description>
        </leaf>
      </container>
      <container name="static-esis">
        <description>
          <text>List of static ESI.</text>
        </description>
        <list name="static-esi">
          <key value="esi"/>
          <description>
            <text>Configure instance of static ESI.</text>
          </description>
          <leaf name="esi">
            <type name="esi"/>
            <description>
              <text>Static ESI, in the format of 00xx.xxxx.xxxx.xxxx.xxxx, in which x ranges from 0 to F. A static ESI cannot be all 0s. To clear a static ESI, enter a space.</text>
            </description>
          </leaf>
          <leaf name="redundancy-mode">
            <type name="esi-redundancy-mode"/>
            <default value="none"/>
            <description>
              <text>Redundancy mode.</text>
            </description>
          </leaf>
          <leaf name="df-election-type">
            <type name="df-election-type"/>
            <default value="default"/>
            <description>
              <text>The DF election type of ESI.</text>
            </description>
          </leaf>
          <leaf name="preference">
            <when condition="../df-election-type='preference-based'"/>
            <type name="uint16">
              <range value="0..65535"/>
            </type>
            <default value="32767"/>
            <description>
              <text>The preference of ESI.</text>
            </description>
          </leaf>
          <leaf name="non-revertive">
            <when condition="../df-election-type='preference-based'"/>
            <type name="boolean"/>
            <default value="false"/>
            <description>
              <text>Enable/disable non-revertive mode.</text>
            </description>
          </leaf>
        </list>
      </container>
      <container name="dynamic-esis">
        <description>
          <text>List of dynamic ESI.</text>
        </description>
        <list name="dynamic-esi">
          <key value="esi-name"/>
          <description>
            <text>Configure instance of dynamic ESI.</text>
          </description>
          <leaf name="esi-name">
            <type name="string">
              <length value="1..31"/>
            </type>
            <description>
              <text>Dynamic ESI name is a string of 1 to 31 characters, which begins with a-z or A-Z.</text>
            </description>
          </leaf>
          <leaf name="redundancy-mode">
            <type name="esi-redundancy-mode"/>
            <default value="none"/>
            <description>
              <text>Redundancy mode.</text>
            </description>
          </leaf>
          <leaf name="df-election-type">
            <type name="df-election-type"/>
            <default value="default"/>
            <description>
              <text>The DF election type of ESI.</text>
            </description>
          </leaf>
          <leaf name="preference">
            <when condition="../df-election-type='preference-based'"/>
            <type name="uint16">
              <range value="0..65535"/>
            </type>
            <default value="32767"/>
            <description>
              <text>The preference of ESI.</text>
            </description>
          </leaf>
          <leaf name="non-revertive">
            <when condition="../df-election-type='preference-based'"/>
            <type name="boolean"/>
            <default value="false"/>
            <description>
              <text>Enable/disable non-revertive mode.</text>
            </description>
          </leaf>
        </list>
      </container>
    </container>
    <container name="instances">
      <description>
        <text>List of EVPN instance.</text>
      </description>
      <list name="instance">
        <key value="name"/>
        <unique tag="normal-evpn/rd"/>
        <unique tag="b-evpn/rd"/>
        <unique tag="bd-evpn/rd"/>
        <unique tag="vpws-evpn/rd"/>
        <description>
          <text>Configure EVPN instance.</text>
        </description>
        <leaf name="name">
          <type name="name-type">
            <length value="1..31"/>
          </type>
          <must condition="../name!='_public_'"/>
          <description>
            <text>EVPN instance name.</text>
          </description>
        </leaf>
        <leaf name="type">
          <ext:operation-exclude value="update|delete"/>
          <type name="evpn-type"/>
          <default value="normal"/>
          <description>
            <text>The value specifies the type of EVPN instance.</text>
          </description>
        </leaf>
        <container name="normal-evpn">
          <when condition="../type = 'normal'"/>
          <description>
            <text>Configure normal mode of EVPN instance.</text>
          </description>
          <leaf name="description">
            <type name="string">
              <length value="1..63"/>
              <pattern value="([^?]*)"/>
            </type>
            <description>
              <text>The description for EVPN instance.</text>
            </description>
          </leaf>
          <leaf name="rd">
            <ext:operation-exclude value="update"/>
            <type name="string">
              <length value="3..21"/>
            </type>
            <description>
              <text>An EVPN instance address family takes effect only after it is configured with an RD. The RD can be in any of the following formats:
1. 16-bit AS number:32-bit user-defined number, 101:3 for example. A 16-bit AS number ranges from 0 to 65535, and a user-defined number ranges from 0 to 4294967295. The AS number and user-defined number cannot be both 0s. This means that the RD value cannot be 0:0.
2. 32-bit IP address:16-bit user-defined number, 192.168.122.15:1 for example. The IP address ranges from 0.0.0.0 to 255.255.255.255, and the user-defined number ranges from 0 to 65535.
3. 32-bit AS number:16-bit user-defined number, 10.11:3 for example. A 32-bit AS number ranges from 0.0 to 65535.65535 or from 0 to 4294967295, and a user-defined number ranges from 0 to 65535. The AS number and user-defined number cannot be both 0s. This means that the RD value cannot be 0.0:0.</text>
            </description>
          </leaf>
          <leaf name="tunnel-policy-name">
            <when condition="../rd"/>
            <type name="leafref">
              <path value="/tnlm:tunnel-management/tnlm:tunnel-policys/tnlm:tunnel-policy/tnlm:name"/>
            </type>
            <must condition="not(/tnlm:tunnel-management/tnlm:tunnel-policys/tnlm:tunnel-policy[tnlm:name=current()]/tnlm:ipv6-set/tnlm:select-sequence/tnlm:select-tunnel-types/tnlm:select-tunnel-type) and /tnlm:tunnel-management/tnlm:tunnel-policys/tnlm:tunnel-policy[tnlm:name=current()]/tnlm:ipv4-set/tnlm:select-sequence/tnlm:select-tunnel-types/tnlm:select-tunnel-type[tnlm:type!='gre']"/>
            <description>
              <text>Tunnel policy name.</text>
            </description>
          </leaf>
          <leaf name="import-policy-name">
            <when condition="../rd"/>
            <type name="leafref">
              <path value="/rtp:routing-policy/rtp:policy-definitions/rtp:policy-definition/rtp:name"/>
            </type>
            <description>
              <text>The name of specify import route policy.</text>
            </description>
          </leaf>
          <leaf name="export-policy-name">
            <when condition="../rd"/>
            <type name="leafref">
              <path value="/rtp:routing-policy/rtp:policy-definitions/rtp:policy-definition/rtp:name"/>
            </type>
            <description>
              <text>The name of specify export route policy.</text>
            </description>
          </leaf>
          <leaf name="local-remote-frr">
            <type name="local-remote-frr-enable-type"/>
            <default value="default"/>
            <description>
              <text>Enable/disable local MAC and remote MAC to form FRR.</text>
            </description>
          </leaf>
          <leaf name="mac-balance-enable">
            <type name="boolean"/>
            <default value="false"/>
            <description>
              <text>Enable/disable MAC balance.</text>
            </description>
          </leaf>
          <leaf name="isolate-spoken">
            <type name="isolate-spoken-type"/>
            <default value="default"/>
            <description>
              <text>Forwarding isolation between AC interfaces under EVPN.</text>
            </description>
          </leaf>
          <leaf name="export-acl-name-or-id">
            <type name="leafref">
              <path value="/acl:acl/acl:groups/acl:group/acl:identity"/>
            </type>
            <description>
              <text>Name or number of an IPv4 ACL used by a filtering policy to filter the routes to be advertised to a specified peer. The number ranges from 4000 to 4999, and the name must start with a letter.</text>
            </description>
          </leaf>
          <leaf name="import-acl-name-or-id">
            <type name="leafref">
              <path value="/acl:acl/acl:groups/acl:group/acl:identity"/>
            </type>
            <description>
              <text>Name or number of an IPv4 ACL used by a filtering policy to filter the routes received from a specified peer. The number ranges from 4000 to 4999, and the name must start with a letter. By default, no ACL-based filtering policy is configured, and therefore all EVN BGP routes can be accepted.</text>
            </description>
          </leaf>
          <leaf name="etree-enable">
            <type name="boolean"/>
            <default value="false"/>
            <description>
              <text>Enable/disable EVPN E-Tree.</text>
            </description>
          </leaf>
          <leaf name="control-word">
            <type name="boolean"/>
            <default value="false"/>
            <description>
              <text>Enable/disable EVPN control word.</text>
            </description>
          </leaf>
          <container name="rts">
            <when condition="../rd"/>
            <description>
              <text>List of RTs.</text>
            </description>
            <list name="rt">
              <key value="vrf-rt-type vrf-rt-value"/>
              <description>
                <text>Configure RTs to control route advertisement between network nodes. Before sending a VPN route to a PE, the local PE adds an Export RT to the route. After receiving a route from another PE, the local PE compares the local Import RT and the Export RT carried in the VPN route and adds the route to the VPN instance only when the two RTs are the same.</text>
              </description>
              <leaf name="vrf-rt-type">
                <type name="vrf-rt-type"/>
                <description>
                  <text>RT type (export-extcommunity or import-extcommunity)
export-extcommunity: Specifies the value of the extended community attribute of the route from an outbound interface to the destination VPN.
import-extcommunity: Specifies the value of the extended community attribute. Routes with such an extended community value can be accepted.</text>
                </description>
              </leaf>
              <leaf name="vrf-rt-value">
                <type name="string">
                  <length value="3..21"/>
                </type>
                <description>
                  <text>RT value, in any of the following formats:
1. 16-bit AS number:32-bit user-defined number, 1:3 for example. A 16-bit AS number ranges from 0 to 65535, and a user-defined number ranges from 0 to 4294967295. The AS number and user-defined number cannot be both 0s. This means that the VPN Target value cannot be 0:0.
2. 32-bit IP address:16-bit user-defined number, 192.168.122.15:1 for example. The IP address ranges from 0.0.0.0 to 255.255.255.255, and the user-defined number ranges from 0 to 65535.
3. 32-bit AS number:16-bit user-defined number, 10.11:3 for example. A 32-bit AS number ranges from 0.0 to 65535.65535 or from 0 to 4294967295, and a user-defined number ranges from 0 to 65535. The AS number and user-defined number cannot be both 0s. This means that the VPN Target value cannot be 0.0:0.</text>
                </description>
              </leaf>
            </list>
          </container>
          <container name="mac-duplication">
            <presence value="normal MAC duplication"/>
            <description>
              <text>Enable/disable MAC duplication.</text>
            </description>
            <leaf name="period">
              <type name="uint8">
                <range value="3..10"/>
              </type>
              <must condition="(../period and ../cycle) or (not(../period) and not(../cycle))"/>
              <description>
                <text>Number of times that MAC duplication is detected in a period.</text>
              </description>
            </leaf>
            <leaf name="cycle">
              <type name="uint16">
                <range value="60..900"/>
              </type>
              <units name="s"/>
              <must condition="(../cycle mod 10 = 0) and ((../period and ../cycle) or (not(../period) and not(../cycle)))"/>
              <description>
                <text>Interval at which MAC duplication is detected. The value must be a multiple of 10.</text>
              </description>
            </leaf>
            <leaf name="recycle">
              <type name="uint16">
                <range value="120..3600"/>
              </type>
              <units name="s"/>
              <must condition="../recycle mod 10 = 0"/>
              <description>
                <text>Period after which suppression on MAC duplication is removed. The value must be a multiple of 10.</text>
              </description>
            </leaf>
            <leaf name="blackhole">
              <type name="boolean"/>
              <default value="false"/>
              <description>
                <text>Enable/disable a blackhole flag.</text>
              </description>
            </leaf>
          </container>
        </container>
        <container name="b-evpn">
          <when condition="../type = 'b-evpn'"/>
          <description>
            <text>Configure backbone mode of EVPN instance.</text>
          </description>
          <leaf name="description">
            <type name="string">
              <length value="1..63"/>
              <pattern value="([^?]*)"/>
            </type>
            <description>
              <text>The description for EVPN instance.</text>
            </description>
          </leaf>
          <leaf name="rd">
            <ext:operation-exclude value="update"/>
            <type name="string">
              <length value="3..21"/>
            </type>
            <description>
              <text>An EVPN instance address family takes effect only after it is configured with an RD. The RD can be in any of the following formats:
1. 16-bit AS number:32-bit user-defined number, 101:3 for example. A 16-bit AS number ranges from 0 to 65535, and a user-defined number ranges from 0 to 4294967295. The AS number and user-defined number cannot be both 0s. This means that the RD value cannot be 0:0.
2. 32-bit IP address:16-bit user-defined number, 192.168.122.15:1 for example. The IP address ranges from 0.0.0.0 to 255.255.255.255, and the user-defined number ranges from 0 to 65535.
3. 32-bit AS number:16-bit user-defined number, 10.11:3 for example. A 32-bit AS number ranges from 0.0 to 65535.65535 or from 0 to 4294967295, and a user-defined number ranges from 0 to 65535. The AS number and user-defined number cannot be both 0s. This means that the RD value cannot be 0.0:0.</text>
            </description>
          </leaf>
          <leaf name="bmac">
            <when condition="../rd"/>
            <type name="pub-type:mac-address">
              <length value="0..255"/>
            </type>
            <description>
              <text>Backbone bridging source MAC.</text>
            </description>
          </leaf>
          <leaf name="tunnel-policy-name">
            <when condition="../rd"/>
            <type name="leafref">
              <path value="/tnlm:tunnel-management/tnlm:tunnel-policys/tnlm:tunnel-policy/tnlm:name"/>
            </type>
            <must condition="not(/tnlm:tunnel-management/tnlm:tunnel-policys/tnlm:tunnel-policy[tnlm:name=current()]/tnlm:ipv6-set/tnlm:select-sequence/tnlm:select-tunnel-types/tnlm:select-tunnel-type) and /tnlm:tunnel-management/tnlm:tunnel-policys/tnlm:tunnel-policy[tnlm:name=current()]/tnlm:ipv4-set/tnlm:select-sequence/tnlm:select-tunnel-types/tnlm:select-tunnel-type[tnlm:type!='gre'] and /tnlm:tunnel-management/tnlm:tunnel-policys/tnlm:tunnel-policy[tnlm:name=current()]/tnlm:ipv4-set/tnlm:select-sequence/tnlm:select-tunnel-types/tnlm:select-tunnel-type[tnlm:type!='sr-te-policy'] and /tnlm:tunnel-management/tnlm:tunnel-policys/tnlm:tunnel-policy[tnlm:name=current()]/tnlm:ipv4-set/tnlm:select-sequence/tnlm:select-tunnel-types/tnlm:select-tunnel-type[tnlm:type!='bgp']"/>
            <description>
              <text>Tunnel policy name.</text>
            </description>
          </leaf>
          <container name="rts">
            <when condition="../rd"/>
            <description>
              <text>List of RTs.</text>
            </description>
            <list name="rt">
              <key value="vrf-rt-type vrf-rt-value"/>
              <description>
                <text>Configure RTs to control route advertisement between network nodes. Before sending a VPN route to a PE, the local PE adds an Export RT to the route. After receiving a route from another PE, the local PE compares the local Import RT and the Export RT carried in the VPN route and adds the route to the VPN instance only when the two RTs are the same.</text>
              </description>
              <leaf name="vrf-rt-type">
                <type name="vrf-rt-type"/>
                <description>
                  <text>RT type (export-extcommunity or import-extcommunity)
export-extcommunity: Specifies the value of the extended community attribute of the route from an outbound interface to the destination VPN.
import-extcommunity: Specifies the value of the extended community attribute. Routes with such an extended community value can be accepted.</text>
                </description>
              </leaf>
              <leaf name="vrf-rt-value">
                <type name="string">
                  <length value="3..21"/>
                </type>
                <description>
                  <text>RT value, in any of the following formats:
1. 16-bit AS number:32-bit user-defined number, 1:3 for example. A 16-bit AS number ranges from 0 to 65535, and a user-defined number ranges from 0 to 4294967295. The AS number and user-defined number cannot be both 0s. This means that the VPN Target value cannot be 0:0.
2. 32-bit IP address:16-bit user-defined number, 192.168.122.15:1 for example. The IP address ranges from 0.0.0.0 to 255.255.255.255, and the user-defined number ranges from 0 to 65535.
3. 32-bit AS number:16-bit user-defined number, 10.11:3 for example. A 32-bit AS number ranges from 0.0 to 65535.65535 or from 0 to 4294967295, and a user-defined number ranges from 0 to 65535. The AS number and user-defined number cannot be both 0s. This means that the VPN Target value cannot be 0.0:0.</text>
                </description>
              </leaf>
            </list>
          </container>
        </container>
        <container name="bd-evpn">
          <when condition="../type = 'bd-evpn'"/>
          <description>
            <text>Configure BD exclusive mode of EVPN instance.</text>
          </description>
          <leaf name="description">
            <type name="string">
              <length value="1..63"/>
              <pattern value="([^?]*)"/>
            </type>
            <description>
              <text>The description for EVPN instance.</text>
            </description>
          </leaf>
          <leaf name="rd">
            <ext:operation-exclude value="update"/>
            <type name="string">
              <length value="3..21"/>
            </type>
            <description>
              <text>An EVPN instance address family takes effect only after it is configured with an RD. The RD can be in any of the following formats:
1. 16-bit AS number:32-bit user-defined number, 101:3 for example. A 16-bit AS number ranges from 0 to 65535, and a user-defined number ranges from 0 to 4294967295. The AS number and user-defined number cannot be both 0s. This means that the RD value cannot be 0:0.
2. 32-bit IP address:16-bit user-defined number, 192.168.122.15:1 for example. The IP address ranges from 0.0.0.0 to 255.255.255.255, and the user-defined number ranges from 0 to 65535.
3. 32-bit AS number:16-bit user-defined number, 10.11:3 for example. A 32-bit AS number ranges from 0.0 to 65535.65535 or from 0 to 4294967295, and a user-defined number ranges from 0 to 65535. The AS number and user-defined number cannot be both 0s. This means that the RD value cannot be 0.0:0.</text>
            </description>
          </leaf>
          <leaf name="import-policy-name">
            <when condition="../rd"/>
            <type name="leafref">
              <path value="/rtp:routing-policy/rtp:policy-definitions/rtp:policy-definition/rtp:name"/>
            </type>
            <description>
              <text>The name of specify import route policy.</text>
            </description>
          </leaf>
          <leaf name="export-policy-name">
            <when condition="../rd"/>
            <type name="leafref">
              <path value="/rtp:routing-policy/rtp:policy-definitions/rtp:policy-definition/rtp:name"/>
            </type>
            <description>
              <text>The name of specify export route policy.</text>
            </description>
          </leaf>
          <leaf name="tunnel-policy-name">
            <when condition="../rd"/>
            <type name="leafref">
              <path value="/tnlm:tunnel-management/tnlm:tunnel-policys/tnlm:tunnel-policy/tnlm:name"/>
            </type>
            <must condition="(not(/tnlm:tunnel-management/tnlm:tunnel-policys/tnlm:tunnel-policy[tnlm:name=current()]/tnlm:ipv6-set/tnlm:select-sequence) or (/tnlm:tunnel-management/tnlm:tunnel-policys/tnlm:tunnel-policy[tnlm:name=current()]/tnlm:ipv6-set/tnlm:select-sequence and /tnlm:tunnel-management/tnlm:tunnel-policys/tnlm:tunnel-policy[tnlm:name=current()]/tnlm:ipv6-set/tnlm:select-sequence/tnlm:select-tunnel-types/tnlm:select-tunnel-type[tnlm:type!='srv6-te-policy-group'])) and (not(/tnlm:tunnel-management/tnlm:tunnel-policys/tnlm:tunnel-policy[tnlm:name=current()]/tnlm:ipv4-set/tnlm:select-sequence) or (/tnlm:tunnel-management/tnlm:tunnel-policys/tnlm:tunnel-policy[tnlm:name=current()]/tnlm:ipv4-set/tnlm:select-sequence and /tnlm:tunnel-management/tnlm:tunnel-policys/tnlm:tunnel-policy[tnlm:name=current()]/tnlm:ipv4-set/tnlm:select-sequence/tnlm:select-tunnel-types/tnlm:select-tunnel-type[tnlm:type!='gre']))"/>
            <description>
              <text>Tunnel policy name.</text>
            </description>
          </leaf>
          <leaf name="local-remote-frr">
            <type name="local-remote-frr-enable-type"/>
            <default value="default"/>
            <description>
              <text>Enable local MAC and remote MAC to form FRR.</text>
            </description>
          </leaf>
          <leaf name="default-color">
            <when condition="../rd"/>
            <type name="uint32">
              <range value="0..4294967295"/>
            </type>
            <description>
              <text>Set default color for nexthop iteration.</text>
            </description>
          </leaf>
          <leaf name="mac-balance-enable">
            <type name="boolean"/>
            <default value="false"/>
            <description>
              <text>Enable/disable MAC balance.</text>
            </description>
          </leaf>
          <leaf name="export-acl-name-or-id">
            <type name="leafref">
              <path value="/acl:acl/acl:groups/acl:group/acl:identity"/>
            </type>
            <description>
              <text>Name or number of an IPv4 ACL used by a filtering policy to filter the routes to be advertised to a specified peer. The number ranges from 4000 to 4999, and the name must start with a letter. By default, no ACL-based filtering policy is configured, and therefore all EVN BGP routes can be advertised.</text>
            </description>
          </leaf>
          <leaf name="import-acl-name-or-id">
            <type name="leafref">
              <path value="/acl:acl/acl:groups/acl:group/acl:identity"/>
            </type>
            <description>
              <text>Name or number of an IPv4 ACL used by a filtering policy to filter the routes received from a specified peer. The number ranges from 4000 to 4999, and the name must start with a letter. By default, no ACL-based filtering policy is configured, and therefore all EVN BGP routes can be accepted.</text>
            </description>
          </leaf>
          <leaf name="bypass-vxlan">
            <type name="bypass-vxlan-enable-type"/>
            <default value="default"/>
            <description>
              <text>Enable bypass VXLAN capability.</text>
            </description>
          </leaf>
          <leaf name="etree-enable">
            <type name="boolean"/>
            <default value="false"/>
            <description>
              <text>Enable/disable EVPN E-Tree.</text>
            </description>
          </leaf>
          <leaf name="srv6-mode">
            <when condition="../rd"/>
            <type name="srv6-mode"/>
            <must condition="../control-word!='true'"/>
            <description>
              <text>SRv6 iteration mode.</text>
            </description>
          </leaf>
          <leaf name="down-switch">
            <when condition="../rd and ../srv6-mode='te'"/>
            <type name="boolean"/>
            <default value="false"/>
            <description>
              <text>Enable/disable switch TE to BE if the associated TE tunnel goes down.</text>
            </description>
          </leaf>
          <leaf name="control-word">
            <type name="boolean"/>
            <must condition="(../control-word='true' and not(../srv6-mode)) or ../control-word!='true'"/>
            <default value="false"/>
            <description>
              <text>Enable/disable EVPN control word.</text>
            </description>
          </leaf>
          <leaf name="mac-route-advertise">
            <type name="mac-route-no-advertise-type"/>
            <default value="enable"/>
            <description>
              <text>Enable/disable local MAC routes from being advertised.</text>
            </description>
          </leaf>
          <container name="rts">
            <when condition="../rd"/>
            <description>
              <text>List of RTs.</text>
            </description>
            <list name="rt">
              <key value="vrf-rt-type vrf-rt-value"/>
              <description>
                <text>Configure RTs to control route advertisement between network nodes. Before sending a VPN route to a PE, the local PE adds an Export RT to the route. After receiving a route from another PE, the local PE compares the local Import RT and the Export RT carried in the VPN route and adds the route to the VPN instance only when the two RTs are the same.</text>
              </description>
              <leaf name="vrf-rt-type">
                <type name="vrf-rt-type"/>
                <description>
                  <text>RT type (export-extcommunity or import-extcommunity)
export-extcommunity: Specifies the value of the extended community attribute of the route from an outbound interface to the destination VPN.
import-extcommunity: Specifies the value of the extended community attribute. Routes with such an extended community value can be accepted.</text>
                </description>
              </leaf>
              <leaf name="vrf-rt-value">
                <type name="string">
                  <length value="3..21"/>
                </type>
                <description>
                  <text>RT value, in any of the following formats:
1. 16-bit AS number:32-bit user-defined number, 1:3 for example. A 16-bit AS number ranges from 0 to 65535, and a user-defined number ranges from 0 to 4294967295. The AS number and user-defined number cannot be both 0s. This means that the VPN Target value cannot be 0:0.
2. 32-bit IP address:16-bit user-defined number, 192.168.122.15:1 for example. The IP address ranges from 0.0.0.0 to 255.255.255.255, and the user-defined number ranges from 0 to 65535.
3. 32-bit AS number:16-bit user-defined number, 10.11:3 for example. A 32-bit AS number ranges from 0.0 to 65535.65535 or from 0 to 4294967295, and a user-defined number ranges from 0 to 65535. The AS number and user-defined number cannot be both 0s. This means that the VPN Target value cannot be 0.0:0.</text>
                </description>
              </leaf>
            </list>
          </container>
          <container name="mac-duplication">
            <presence value="bd MAC duplication"/>
            <description>
              <text>Enable/disable MAC duplication.</text>
            </description>
            <leaf name="period">
              <type name="uint8">
                <range value="3..10"/>
              </type>
              <must condition="(../period and ../cycle) or (not(../period) and not(../cycle))"/>
              <description>
                <text>Number of times that MAC duplication is detected in a period.</text>
              </description>
            </leaf>
            <leaf name="cycle">
              <type name="uint16">
                <range value="60..900"/>
              </type>
              <units name="s"/>
              <must condition="(../cycle mod 10 = 0) and ((../period and ../cycle) or (not(../period) and not(../cycle)))"/>
              <description>
                <text>Interval at which MAC duplication is detected. The value must be a multiple of 10.</text>
              </description>
            </leaf>
            <leaf name="recycle">
              <type name="uint16">
                <range value="120..3600"/>
              </type>
              <units name="s"/>
              <must condition="../recycle mod 10 = 0"/>
              <description>
                <text>Period after which suppression on MAC duplication is removed. The value must be a multiple of 10.</text>
              </description>
            </leaf>
            <leaf name="blackhole">
              <type name="boolean"/>
              <default value="false"/>
              <description>
                <text>Enable/disable a blackhole flag.</text>
              </description>
            </leaf>
            <leaf name="source-blackhole">
              <when condition="../blackhole='true'"/>
              <type name="boolean"/>
              <default value="false"/>
              <description>
                <text>Enable/disable blackhole flag. After MAC duplication is suppressed, if a blackhole flag is set, the source port is blocked. If no blackhole flag is set, the source port is not blocked.</text>
              </description>
            </leaf>
          </container>
          <container name="inclusive-provider-tunnel">
            <presence value="EVI-IPMSI view"/>
            <description>
              <text>Enable/disable mLDP P2MP configuration.</text>
            </description>
            <container name="root">
              <presence value="EVI-IPMSI view"/>
              <description>
                <text>Enable/disable mLDP P2MP root configuration.</text>
              </description>
              <leaf name="data-switch-disable">
                <type name="boolean"/>
                <default value="false"/>
                <description>
                  <text>Enable/disable data switch configuration.</text>
                </description>
              </leaf>
              <leaf name="data-delay-time">
                <type name="uint32">
                  <range value="1..300"/>
                </type>
                <units name="s"/>
                <description>
                  <text>Set a hold-off time for an mLDP P2MP tunnel to go Up.</text>
                </description>
              </leaf>
              <container name="p2mp">
                <presence value="MLDP P2MP view"/>
                <description>
                  <text>Enable/disable mLDP P2MP configuration.</text>
                </description>
                <leaf name="root-ip">
                  <type name="inet:ipv4-address-no-zone"/>
                  <description>
                    <text>Root address of P2MP tunnel.</text>
                  </description>
                </leaf>
              </container>
            </container>
            <container name="leaf">
              <presence value="EVI-IPMSI view"/>
              <description>
                <text>Enable/disable mLDP P2MP leaf configuration.</text>
              </description>
              <container name="use-next-hops">
                <description>
                  <text>List of root addresses for leaf node.</text>
                </description>
                <list name="use-next-hop">
                  <key value="root-ip"/>
                  <description>
                    <text>Configure root address for leaf node.</text>
                  </description>
                  <leaf name="root-ip">
                    <type name="inet:ipv4-address-no-zone"/>
                    <description>
                      <text>Root address for leaf node.</text>
                    </description>
                  </leaf>
                </list>
              </container>
            </container>
          </container>
        </container>
        <container name="vpws-evpn">
          <when condition="../type = 'vpws-evpn'"/>
          <description>
            <text>Configure VPWS mode of EVPN instance.</text>
          </description>
          <leaf name="description">
            <type name="string">
              <length value="1..63"/>
              <pattern value="([^?]*)"/>
            </type>
            <description>
              <text>The description for EVPN instance.</text>
            </description>
          </leaf>
          <leaf name="rd">
            <ext:operation-exclude value="update"/>
            <type name="string">
              <length value="3..21"/>
            </type>
            <description>
              <text>An EVPN instance address family takes effect only after it is configured with an RD. The RD can be in any of the following formats:
1. 16-bit AS number:32-bit user-defined number, 101:3 for example. A 16-bit AS number ranges from 0 to 65535, and a user-defined number ranges from 0 to 4294967295. The AS number and user-defined number cannot be both 0s. This means that the RD value cannot be 0:0.
2. 32-bit IP address:16-bit user-defined number, 192.168.122.15:1 for example. The IP address ranges from 0.0.0.0 to 255.255.255.255, and the user-defined number ranges from 0 to 65535.
3. 32-bit AS number:16-bit user-defined number, 10.11:3 for example. A 32-bit AS number ranges from 0.0 to 65535.65535 or from 0 to 4294967295, and a user-defined number ranges from 0 to 65535. The AS number and user-defined number cannot be both 0s. This means that the RD value cannot be 0.0:0.</text>
            </description>
          </leaf>
          <leaf name="import-policy-name">
            <when condition="../rd"/>
            <type name="leafref">
              <path value="/rtp:routing-policy/rtp:policy-definitions/rtp:policy-definition/rtp:name"/>
            </type>
            <description>
              <text>The name of specify import route policy.</text>
            </description>
          </leaf>
          <leaf name="export-policy-name">
            <when condition="../rd"/>
            <type name="leafref">
              <path value="/rtp:routing-policy/rtp:policy-definitions/rtp:policy-definition/rtp:name"/>
            </type>
            <description>
              <text>The name of specify export route policy.</text>
            </description>
          </leaf>
          <leaf name="tunnel-policy-name">
            <when condition="../rd"/>
            <type name="leafref">
              <path value="/tnlm:tunnel-management/tnlm:tunnel-policys/tnlm:tunnel-policy/tnlm:name"/>
            </type>
            <must condition="(not(/tnlm:tunnel-management/tnlm:tunnel-policys/tnlm:tunnel-policy[tnlm:name=current()]/tnlm:ipv6-set/tnlm:select-sequence) or (/tnlm:tunnel-management/tnlm:tunnel-policys/tnlm:tunnel-policy[tnlm:name=current()]/tnlm:ipv6-set/tnlm:select-sequence and /tnlm:tunnel-management/tnlm:tunnel-policys/tnlm:tunnel-policy[tnlm:name=current()]/tnlm:ipv6-set/tnlm:select-sequence/tnlm:select-tunnel-types/tnlm:select-tunnel-type[tnlm:type!='srv6-te-policy-group'])) and (not(/tnlm:tunnel-management/tnlm:tunnel-policys/tnlm:tunnel-policy[tnlm:name=current()]/tnlm:ipv4-set/tnlm:select-sequence) or (/tnlm:tunnel-management/tnlm:tunnel-policys/tnlm:tunnel-policy[tnlm:name=current()]/tnlm:ipv4-set/tnlm:select-sequence and /tnlm:tunnel-management/tnlm:tunnel-policys/tnlm:tunnel-policy[tnlm:name=current()]/tnlm:ipv4-set/tnlm:select-sequence/tnlm:select-tunnel-types/tnlm:select-tunnel-type[tnlm:type!='gre']))"/>
            <description>
              <text>Tunnel policy name.</text>
            </description>
          </leaf>
          <leaf name="local-remote-frr">
            <type name="local-remote-frr-enable-type"/>
            <default value="default"/>
            <description>
              <text>Enable local MAC and remote MAC to form FRR.</text>
            </description>
          </leaf>
          <leaf name="remote-frr">
            <type name="local-remote-frr-enable-type"/>
            <default value="default"/>
            <description>
              <text>Enable remote MAC to form FRR.</text>
            </description>
          </leaf>
          <leaf name="default-color">
            <when condition="../rd"/>
            <type name="uint32">
              <range value="0..4294967295"/>
            </type>
            <description>
              <text>Set default color for nexthop iteration.</text>
            </description>
          </leaf>
          <leaf name="export-acl-name-or-id">
            <type name="leafref">
              <path value="/acl:acl/acl:groups/acl:group/acl:identity"/>
            </type>
            <description>
              <text>Name or number of an IPv4 ACL used by a filtering policy to filter the routes to be advertised to a specified peer. The number ranges from 4000 to 4999, and the name must start with a letter. By default, no ACL-based filtering policy is configured, and therefore all EVN BGP routes can be advertised.</text>
            </description>
          </leaf>
          <leaf name="import-acl-name-or-id">
            <type name="leafref">
              <path value="/acl:acl/acl:groups/acl:group/acl:identity"/>
            </type>
            <description>
              <text>Name or number of an IPv4 ACL used by a filtering policy to filter the routes received from a specified peer. The number ranges from 4000 to 4999, and the name must start with a letter. By default, no ACL-based filtering policy is configured, and therefore all EVN BGP routes can be accepted.</text>
            </description>
          </leaf>
          <leaf name="timer-revert-delay">
            <when condition="../rd"/>
            <type name="uint32">
              <range value="0..3600"/>
            </type>
            <units name="s"/>
            <default value="0"/>
            <description>
              <text>Set delay time of selecting routes in production.</text>
            </description>
          </leaf>
          <leaf name="srv6-mode">
            <when condition="../rd"/>
            <type name="srv6-mode"/>
            <description>
              <text>SRv6 iteration mode.</text>
            </description>
          </leaf>
          <leaf name="down-switch">
            <when condition="../rd and ../srv6-mode='te'"/>
            <type name="boolean"/>
            <default value="false"/>
            <description>
              <text>Enable/disable TE to BE if the associated TE tunnel goes down.</text>
            </description>
          </leaf>
          <container name="rts">
            <when condition="../rd"/>
            <description>
              <text>List of RTs.</text>
            </description>
            <list name="rt">
              <key value="vrf-rt-type vrf-rt-value"/>
              <description>
                <text>Configure RTs to control route advertisement between network nodes. Before sending a VPN route to a PE, the local PE adds an Export RT to the route. After receiving a route from another PE, the local PE compares the local Import RT and the Export RT carried in the VPN route and adds the route to the VPN instance only when the two RTs are the same.</text>
              </description>
              <leaf name="vrf-rt-type">
                <type name="vrf-rt-type"/>
                <description>
                  <text>RT type (export-extcommunity or import-extcommunity)
export-extcommunity: Specifies the value of the extended community attribute of the route from an outbound interface to the destination VPN.
import-extcommunity: Specifies the value of the extended community attribute. Routes with such an extended community value can be accepted.</text>
                </description>
              </leaf>
              <leaf name="vrf-rt-value">
                <type name="string">
                  <length value="3..21"/>
                </type>
                <description>
                  <text>RT value, in any of the following formats:
1. 16-bit AS number:32-bit user-defined number, 1:3 for example. A 16-bit AS number ranges from 0 to 65535, and a user-defined number ranges from 0 to 4294967295. The AS number and user-defined number cannot be both 0s. This means that the VPN Target value cannot be 0:0.
2. 32-bit IP address:16-bit user-defined number, 192.168.122.15:1 for example. The IP address ranges from 0.0.0.0 to 255.255.255.255, and the user-defined number ranges from 0 to 65535.
3. 32-bit AS number:16-bit user-defined number, 10.11:3 for example. A 32-bit AS number ranges from 0.0 to 65535.65535 or from 0 to 4294967295, and a user-defined number ranges from 0 to 65535. The AS number and user-defined number cannot be both 0s. This means that the VPN Target value cannot be 0.0:0.</text>
                </description>
              </leaf>
            </list>
          </container>
        </container>
        <container name="tunnel-infos">
          <config value="false"/>
          <description>
            <text>List of tunnel informations.</text>
          </description>
          <list name="tunnel-info">
            <key value="type peer-ip id"/>
            <description>
              <text>Operational state of tunnel informations.</text>
            </description>
            <leaf name="type">
              <type name="tunnel-type"/>
              <description>
                <text>Tunnel's type.</text>
              </description>
            </leaf>
            <leaf name="peer-ip">
              <type name="inet:ip-address-no-zone"/>
              <description>
                <text>Nexthop address through which the packet has to be sent.</text>
              </description>
            </leaf>
            <leaf name="id">
              <type name="uint32">
                <range value="0..4294967295"/>
              </type>
              <description>
                <text>Tunnel's ID.</text>
              </description>
            </leaf>
            <leaf name="color">
              <type name="uint32">
                <range value="0..4294967295"/>
              </type>
              <description>
                <text>Color information for tunnel.</text>
              </description>
            </leaf>
            <leaf name="name">
              <type name="string">
                <length value="0..256"/>
              </type>
              <description>
                <text>Tunnel's name.</text>
              </description>
            </leaf>
          </list>
        </container>
      </list>
    </container>
    <container name="remote-sids">
      <config value="false"/>
      <description>
        <text>List of remote SID.</text>
      </description>
      <list name="remote-sid">
        <key value="remote-sid"/>
        <description>
          <text>Operational data of remote SID.</text>
        </description>
        <leaf name="remote-sid">
          <type name="inet:ipv6-address-no-zone"/>
          <description>
            <text>Remote SID attribute.</text>
          </description>
        </leaf>
        <leaf name="locator-sid">
          <type name="inet:ipv6-address-no-zone"/>
          <description>
            <text>Locator SID.</text>
          </description>
        </leaf>
        <leaf name="locator-mask-length">
          <type name="uint8">
            <range value="0..128"/>
          </type>
          <description>
            <text>Specify the mask length of a locator SID.</text>
          </description>
        </leaf>
        <leaf name="evpn-type">
          <type name="evpn-type"/>
          <description>
            <text>The value specifies the Type of EVPN instance. The value must be normal/i-evpn/b-evpn/bd-evpn/vpws-evpn.</text>
          </description>
        </leaf>
        <leaf name="evpn-name">
          <type name="name-type">
            <length value="1..31"/>
          </type>
          <description>
            <text>EVPN instance name.</text>
          </description>
        </leaf>
        <leaf name="bd-id">
          <type name="uint32">
            <range value="0..16777215"/>
          </type>
          <description>
            <text>The identification of the BD.</text>
          </description>
        </leaf>
        <leaf name="evpl-id">
          <type name="uint32">
            <range value="1..16777215"/>
          </type>
          <description>
            <text>The identification of the EVPL instance.</text>
          </description>
        </leaf>
      </list>
    </container>
  </container>
  <augment target-node="/bd:bd/bd:instances/bd:instance">
    <description>
      <text>BD bound to an EVPN instance.</text>
    </description>
    <container name="evpn">
      <description>
        <text>Configure BD bound to an EVPN instance.</text>
      </description>
      <leaf name="name">
        <type name="leafref">
          <path value="/evpn:evpn/evpn:instances/evpn:instance/evpn:name"/>
        </type>
        <must condition="/evpn:evpn/evpn:instances/evpn:instance[name = current()]/evpn:type='bd-evpn'"/>
        <description>
          <text>Configure BD instances bound to an BD exclusive mode EVPN instance.</text>
        </description>
      </leaf>
      <leaf name="esi">
        <when condition="../name and ../../nvo3:nvo3/nvo3:vni-list/nvo3:vni[../nvo3:split-horizon='true']"/>
        <type name="esi">
          <length value="1..24"/>
        </type>
        <description>
          <text>Static ESI, in the format of 00xx.xxxx.xxxx.xxxx.xxxx, in which x ranges from 0 to F. A static ESI cannot be all 0s. To clear a static ESI, enter a space.</text>
        </description>
      </leaf>
      <leaf name="tag">
        <when condition="../name"/>
        <type name="uint16">
          <range value="1..4094"/>
        </type>
        <ext:operation-exclude value="update"/>
        <description>
          <text>Specify the BD tag.</text>
        </description>
      </leaf>
      <container name="interface-track-peers">
        <when condition="(../name and ../../nvo3:nvo3/nvo3:vni-list/nvo3:vni[../nvo3:split-horizon='true'])"/>
        <description>
          <text>List of track peer.</text>
        </description>
        <list name="interface-track-peer">
          <key value="es-track-address"/>
          <description>
            <text>Configure track peer information.</text>
          </description>
          <leaf name="es-track-address">
            <type name="leafref">
              <path value="/ni:network-instance/ni:instances/ni:instance/bgp:bgp/bgp:base-process/bgp:peers/bgp:peer/bgp:address"/>
            </type>
            <must condition="/ni:network-instance/ni:instances/ni:instance/bgp:bgp/bgp:base-process/bgp:peers/bgp:peer/bgp:afs/bgp:af/bgp-evpn:l2vpn-evpn"/>
            <description>
              <text>Track peer address.</text>
            </description>
          </leaf>
        </list>
      </container>
    </container>
  </augment>
  <augment target-node="/bd:bd/bd:instances/bd:instance/bd:service-points/bd:service-point">
    <description>
      <text>Configure the E-Tree leaf attribute of BD.</text>
    </description>
    <container name="evpn">
      <description>
        <text>Configure the E-Tree leaf attribute of BD.</text>
      </description>
      <leaf name="e-tree-leaf">
        <type name="boolean"/>
        <must condition="(../e-tree-leaf = 'true' and ../../../../evpn:evpn/evpn:name and /evpn:evpn/evpn:instances/evpn:instance[evpn:name=current()/../../../../evpn:evpn/evpn:name]/evpn:bd-evpn/evpn:etree-enable = 'true') or (../e-tree-leaf = 'false')"/>
        <default value="false"/>
        <description>
          <text>Enable/disable the E-Tree leaf attribute of BD.</text>
        </description>
      </leaf>
    </container>
  </augment>
  <augment target-node="/ni:network-instance/ni:instances/ni:instance/l3vpn:afs/l3vpn:af">
    <description>
      <text>Configure EVPN.</text>
    </description>
    <container name="evpn">
      <when condition="../l3vpn:route-distinguisher"/>
      <description>
        <text>Configure EVPN.</text>
      </description>
      <leaf name="import-policy-name">
        <type name="leafref">
          <path value="/rtp:routing-policy/rtp:policy-definitions/rtp:policy-definition/rtp:name"/>
        </type>
        <description>
          <text>The specify name of import route.</text>
        </description>
      </leaf>
      <leaf name="export-policy-name">
        <type name="leafref">
          <path value="/rtp:routing-policy/rtp:policy-definitions/rtp:policy-definition/rtp:name"/>
        </type>
        <description>
          <text>The name of specify export route policy.</text>
        </description>
      </leaf>
      <leaf name="mpls-routing">
        <type name="boolean"/>
        <default value="false"/>
        <description>
          <text>Enable/disable the EVPN MPLS layer 3 routing function.</text>
        </description>
      </leaf>
      <leaf name="tunnel-policy-name">
        <type name="leafref">
          <path value="/tnlm:tunnel-management/tnlm:tunnel-policys/tnlm:tunnel-policy/tnlm:name"/>
        </type>
        <description>
          <text>Specify tunnel policy name for EVPN.</text>
        </description>
      </leaf>
      <leaf name="default-color">
        <type name="uint32">
          <range value="0..4294967295"/>
        </type>
        <description>
          <text>Set default color for nexthop iteration.</text>
        </description>
      </leaf>
      <leaf name="irb2ip">
        <type name="irb2ip-enable-type"/>
        <default value="default"/>
        <description>
          <text>Enable/disable IRB routing rebirth into prefix routing.</text>
        </description>
      </leaf>
      <container name="extend-vpn-targets">
        <when condition="../../l3vpn:route-distinguisher"/>
        <description>
          <text>List of extended RTs.</text>
        </description>
        <list name="extend-vpn-target">
          <key value="vrf-rt-value vrf-rt-type"/>
          <description>
            <text>Configure RT (VPN Target) to control route advertisement between network nodes. Before sending a VPN route to a PE, the local PE adds an Export RT to the route. After receiving a route from another PE, the local PE determines whether the route will be added to the VPN instance based on the local Import RT and the Export RT that is added to the VPN route.</text>
          </description>
          <leaf name="vrf-rt-value">
            <type name="string">
              <length value="3..21"/>
            </type>
            <description>
              <text>The formats of a VPN target value are as follows:
(1) 16-bit AS number : 32-bit user-defined number, for example, 1:3. An AS number ranges from 0 to 65535, and a user-defined number ranges from 0 to 4294967295. The AS number and user-defined number cannot be both 0s. This means that the VPN Target value cannot be 0:0.
(2) 32-bit IP address: 16-bit user-defined number, for example: 192.168.122.15:1.The IP address ranges from 0.0.0.0 to 255.255.255.255, and the user-defined number ranges from 0 to 65535.
(3) 32-bit AS number :16-bit user-defined number, for example, 10.11:3. An AS number ranges from 0.0 to 65535.65535 or 0 to 4294967295, and a user-defined number ranges from 0 to 65535. The AS number and user-defined number cannot be both 0s. This means that the VPN Target value cannot be 0.0:0.</text>
            </description>
          </leaf>
          <leaf name="vrf-rt-type">
            <type name="vrf-rt-type"/>
            <description>
              <text>RT types are as follows:
export-extcommunity: Specifies the value of the extended community attribute of the route from an outbound interface to the destination VPN. import-extcommunity: Receives routes that carry the specified extended community attribute value.</text>
            </description>
          </leaf>
        </list>
      </container>
      <container name="state">
        <config value="false"/>
        <description>
          <text>Operational state of EVPN attribute.</text>
        </description>
        <leaf name="label">
          <type name="uint32"/>
          <config value="false"/>
          <description>
            <text>EVPN label of the VPN instance address family.</text>
          </description>
        </leaf>
      </container>
    </container>
  </augment>
  <augment target-node="/evpl:evpl/evpl:instances/evpl:instance">
    <description>
      <text>EVPL instance bound to an EVPN instance.</text>
    </description>
    <container name="evpn">
      <presence value="evpl evpn"/>
      <description>
        <text>Configure EVPL instance bound to an EVPN instance.</text>
      </description>
      <leaf name="name">
        <when condition="../../evpl:mode!='vxlan-mode'"/>
        <type name="leafref">
          <path value="/evpn:evpn/evpn:instances/evpn:instance/evpn:name"/>
        </type>
        <must condition="/evpn:evpn/evpn:instances/evpn:instance[name=current()]/evpn:type='vpws-evpn' and /evpn:evpn/evpn:instances/evpn:instance[name=current()]/evpn:vpws-evpn/evpn:rd"/>
        <description>
          <text>Configure EVPL instances bound to an EVPN instance.</text>
        </description>
      </leaf>
      <leaf name="local-service-id">
        <ext:operation-exclude value="update"/>
        <when condition="../name"/>
        <type name="uint32">
          <range value="1..16777215"/>
        </type>
        <must condition="(../local-service-id and ../remote-service-id) or (not(../local-service-id) and not(../remote-service-id))"/>
        <mandatory value="true"/>
        <description>
          <text>Configure the local SID.</text>
        </description>
      </leaf>
      <leaf name="remote-service-id">
        <ext:operation-exclude value="update"/>
        <when condition="../name"/>
        <type name="uint32">
          <range value="1..16777215"/>
        </type>
        <must condition="(../local-service-id and ../remote-service-id) or (not(../local-service-id) and not(../remote-service-id))"/>
        <mandatory value="true"/>
        <description>
          <text>Configure the remote SID.</text>
        </description>
      </leaf>
      <leaf name="ignore-match-mtu">
        <when condition="../name"/>
        <type name="boolean"/>
        <default value="false"/>
        <description>
          <text>Enable/disable the ignore flag of matching MTU from peer device.</text>
        </description>
      </leaf>
      <leaf name="balancing-ignore-esi">
        <when condition="../name"/>
        <type name="boolean"/>
        <default value="false"/>
        <description>
          <text>Enable/disable the ignore flag of ESI for load balance.</text>
        </description>
      </leaf>
      <leaf name="control-word">
        <when condition="../name"/>
        <type name="boolean"/>
        <must condition="(../control-word='true' and ../../evpl:mode='mpls-mode') or ../control-word!='true'"/>
        <default value="false"/>
        <description>
          <text>Enable/disable EVPL control word.</text>
        </description>
      </leaf>
      <container name="evpl-info">
        <config value="false"/>
        <description>
          <text>Operational state of EVPL info.</text>
        </description>
        <leaf name="ac-interface">
          <type name="leafref">
            <path value="/ifm:ifm/ifm:interfaces/ifm:interface/ifm:name"/>
          </type>
          <description>
            <text>The AC interface bound to EVPL instance.</text>
          </description>
        </leaf>
        <leaf name="evpl-state">
          <type name="evpl-state"/>
          <description>
            <text>The state of EVPL instance.</text>
          </description>
        </leaf>
        <leaf name="local-ctrl-word">
          <type name="boolean"/>
          <description>
            <text>The local control word.</text>
          </description>
        </leaf>
        <leaf name="local-mtu">
          <type name="uint16">
            <range value="0..65535"/>
          </type>
          <units name="Byte"/>
          <description>
            <text>The value of local MTU, just from the interface which bound to the EVPL instance. If MTU is 0, it means the ignore flag of checking MTU is enabled.</text>
          </description>
        </leaf>
        <leaf name="local-reduancy-mode">
          <type name="redundancy-mode"/>
          <description>
            <text>The local reduancy mode, which includes single-active and all-active modes.</text>
          </description>
        </leaf>
        <leaf name="local-df-state">
          <type name="df-state"/>
          <description>
            <text>The local DF state.</text>
          </description>
        </leaf>
        <leaf name="remote-reduancy-mode">
          <type name="redundancy-mode"/>
          <description>
            <text>The remote reduancy mode, which includes single-active and all-active modes.</text>
          </description>
        </leaf>
        <leaf name="remote-pri-df-num">
          <type name="uint32">
            <range value="0..4294967295"/>
          </type>
          <description>
            <text>Number of primary DFs.</text>
          </description>
        </leaf>
        <leaf name="remote-back-df-num">
          <type name="uint32">
            <range value="0..4294967295"/>
          </type>
          <description>
            <text>Number of backup DFs.</text>
          </description>
        </leaf>
        <leaf name="remote-none-df-num">
          <type name="uint32">
            <range value="0..4294967295"/>
          </type>
          <description>
            <text>Number of none DFs.</text>
          </description>
        </leaf>
        <leaf name="tunnel-type">
          <type name="evpn-tunnel-type"/>
          <description>
            <text>The tunnel type of EVPN network.</text>
          </description>
        </leaf>
        <leaf name="evpl-type">
          <type name="evpn-evpl-type"/>
          <description>
            <text>The type of EVPL.</text>
          </description>
        </leaf>
        <leaf name="if-last-up-time">
          <type name="yang:date-and-time"/>
          <description>
            <text>The last up time of AC interface.</text>
          </description>
        </leaf>
        <leaf name="last-pri-time">
          <type name="yang:date-and-time"/>
          <description>
            <text>The last time to be primary DF.</text>
          </description>
        </leaf>
        <leaf name="last-backup-time">
          <type name="yang:date-and-time"/>
          <description>
            <text>The last time to be backup DF.</text>
          </description>
        </leaf>
      </container>
      <container name="evpl-peer-info">
        <config value="false"/>
        <description>
          <text>Operational state of EVPL peer info.</text>
        </description>
        <leaf name="peer-ip">
          <type name="inet:ip-address-no-zone"/>
          <description>
            <text>Peer IP address.</text>
          </description>
        </leaf>
        <leaf name="nexthop-ip">
          <type name="inet:ip-address-no-zone"/>
          <description>
            <text>Original nexthop IP address.</text>
          </description>
        </leaf>
        <leaf name="remote-df-state">
          <type name="df-state"/>
          <description>
            <text>Remote DF status.</text>
          </description>
        </leaf>
        <leaf name="remote-mtu">
          <type name="uint32">
            <range value="1..4294967295"/>
          </type>
          <units name="Byte"/>
          <description>
            <text>The value of remote MTU, just from the interface which bound to the EVPL instance. If MTU is 0, it means the ignore flag of checking MTU is enabled.</text>
          </description>
        </leaf>
        <leaf name="remote-ctrl-word">
          <type name="boolean"/>
          <description>
            <text>The remote control word.</text>
          </description>
        </leaf>
        <leaf name="remote-esi">
          <type name="esi">
            <length value="1..24"/>
          </type>
          <description>
            <text>Remote ESI.</text>
          </description>
        </leaf>
        <leaf name="eline-role">
          <type name="eline-role"/>
          <description>
            <text>The E-Line role.</text>
          </description>
        </leaf>
      </container>
    </container>
  </augment>
  <augment target-node="/ifm:ifm/ifm:interfaces/ifm:interface">
    <description>
      <text>Configure EVPN with the interface.</text>
    </description>
    <container name="evpn">
      <description>
        <text>Configure ESI interface.</text>
      </description>
      <leaf name="name">
        <type name="leafref">
          <path value="/evpn:evpn/evpn:instances/evpn:instance/evpn:name"/>
        </type>
        <must condition="/evpn:evpn/evpn:instances/evpn:instance[evpn:name=current()]/evpn:type='i-evpn' or /evpn:evpn/evpn:instances/evpn:instance[evpn:name=current()]/evpn:type='normal'"/>
        <description>
          <text>Configure EVPL instances bound to an EVPN instance.</text>
        </description>
      </leaf>
      <leaf name="pbb-source-mac">
        <when condition="../name"/>
        <type name="pub-type:mac-address"/>
        <must condition="/evpn:evpn/evpn:instances/evpn:instance[evpn:name=current()/../evpn:name]/evpn:type='i-evpn'"/>
        <description>
          <text>Specifies a B-MAC address.</text>
        </description>
      </leaf>
      <leaf name="esi">
        <type name="esi">
          <length value="1..24"/>
          <pattern value="( *(00([0-9a-fA-F]){2}\.(([0-9a-fA-F]){4}\.){3}(([0-9a-fA-F]){4}))? *)"/>
        </type>
        <description>
          <text>Static ESI, in the format of 00xx.xxxx.xxxx.xxxx.xxxx, in which x ranges from 0 to F. A static ESI cannot be all 0s. To clear a static ESI, enter a space.</text>
        </description>
      </leaf>
      <leaf name="esi-name">
        <when condition="../../ifm:type='Eth-Trunk'"/>
        <type name="leafref">
          <path value="/evpn:evpn/evpn:site/evpn:dynamic-esis/evpn:dynamic-esi/evpn:esi-name"/>
        </type>
        <description>
          <text>Dynamic ESI name is a string of 1 to 31 characters, which begins with a-z or A-Z.</text>
        </description>
      </leaf>
      <leaf name="es-recovery-timer">
        <when condition="(../../ifm:type='Eth-Trunk') or (../../ifm:type='PW-VE')"/>
        <type name="uint32">
          <range value="3..1200"/>
        </type>
        <units name="s"/>
        <description>
          <text>ES recovery timer.</text>
        </description>
      </leaf>
      <leaf name="track-bfd-name">
        <when condition="(../../ifm:type='Eth-Trunk') or (../../ifm:type='PW-VE')"/>
        <type name="leafref">
          <path value="/bfd:bfd/bfd:sessions/bfd:session/bfd:name"/>
        </type>
        <description>
          <text>Specify the BFD that track ESI peer.</text>
        </description>
      </leaf>
      <leaf name="e-tree-leaf">
        <when condition="../name"/>
        <type name="boolean"/>
        <must condition="(../e-tree-leaf = 'true' and /evpn:evpn/evpn:instances/evpn:instance[evpn:name=current()/../evpn:name]/evpn:normal-evpn/evpn:etree-enable='true') or (../e-tree-leaf = 'false')"/>
        <default value="false"/>
        <description>
          <text>Enable/disable the E-Tree leaf attribute of interface.</text>
        </description>
      </leaf>
    </container>
  </augment>
  <augment target-node="/l2vpn:l2vpn/l2vpn:instances/l2vpn:instance/l2vpn:vpls/l2vpn:ldp-signaling/l2vpn:pws/l2vpn:pw">
    <description>
      <text>Configure the EVPN attributes of a PW.</text>
    </description>
    <container name="evpn">
      <description>
        <text>Configure the EVPN attributes of a PW.</text>
      </description>
      <leaf name="etree-leaf-enable">
        <when condition="../../../../../l2vpn:work-mode='bd-mode' and ../../l2vpn:upe='true' and ../../l2vpn:name"/>
        <type name="boolean"/>
        <must condition="(../etree-leaf-enable='true' and ../../../../../l2vpn:bds/l2vpn:bd/l2vpn:id and /bd:bd/bd:instances/bd:instance[bd:id=current()/../../../../../l2vpn:bds/l2vpn:bd/l2vpn:id]/evpn:evpn/evpn:name and /evpn:evpn/evpn:instances/evpn:instance[evpn:name=/bd:bd/bd:instances/bd:instance[bd:id=current()/../../../../../l2vpn:bds/l2vpn:bd/l2vpn:id]/evpn:evpn/evpn:name]/evpn:type='bd-evpn' and /evpn:evpn/evpn:instances/evpn:instance[evpn:name=/bd:bd/bd:instances/bd:instance[bd:id=current()/../../../../../l2vpn:bds/l2vpn:bd/l2vpn:id]/evpn:evpn/evpn:name]/evpn:bd-evpn/evpn:etree-enable='true') or ../etree-leaf-enable='false'"/>
        <default value="false"/>
        <description>
          <text>Enable/disable the E-Tree leaf attribute of a PW.</text>
        </description>
      </leaf>
      <leaf name="esi">
        <when condition="../../../../../l2vpn:work-mode='bd-mode' and ../../l2vpn:upe='true' and ../../l2vpn:name"/>
        <type name="leafref">
          <path value="/evpn:evpn/evpn:site/evpn:static-esis/evpn:static-esi/evpn:esi"/>
        </type>
        <must condition="/evpn:evpn/evpn:site/evpn:static-esis/evpn:static-esi[evpn:esi=current()/../evpn:esi]/evpn:redundancy-mode='single-active'"/>
        <description>
          <text>Static ESI, in the format of 00xx.xxxx.xxxx.xxxx.xxxx, in which x ranges from 0 to F. A static ESI cannot be all 0s. To clear a static ESI, enter a space.</text>
        </description>
      </leaf>
    </container>
  </augment>
</module>
