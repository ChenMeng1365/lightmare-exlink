<?xml version="1.0" encoding="UTF-8"?>
<module name="huawei-mpls-static"
        xmlns="urn:ietf:params:xml:ns:yang:yin:1"
        xmlns:mpls-static="urn:huawei:yang:huawei-mpls-static"
        xmlns:inet="urn:ietf:params:xml:ns:yang:ietf-inet-types"
        xmlns:mpls="urn:huawei:yang:huawei-mpls"
        xmlns:ext="urn:huawei:yang:huawei-extension"
        xmlns:pub-type="urn:huawei:yang:huawei-pub-type"
        xmlns:ifm="urn:huawei:yang:huawei-ifm">
  <namespace uri="urn:huawei:yang:huawei-mpls-static"/>
  <prefix value="mpls-static"/>
  <import module="ietf-inet-types">
    <prefix value="inet"/>
  </import>
  <import module="huawei-mpls">
    <prefix value="mpls"/>
  </import>
  <import module="huawei-extension">
    <prefix value="ext"/>
  </import>
  <import module="huawei-pub-type">
    <prefix value="pub-type"/>
  </import>
  <import module="huawei-ifm">
    <prefix value="ifm"/>
  </import>
  <organization>
    <text>Huawei Technologies Co., Ltd.</text>
  </organization>
  <contact>
    <text>Huawei Industrial Base
Bantian, Longgang
Shenzhen 518129
People's Republic of China
Website: http://www.huawei.com
Email: support@huawei.com</text>
  </contact>
  <description>
    <text>Specifies the multi-protocol label switching protocol.</text>
  </description>
  <revision date="2020-02-26">
    <description>
      <text>Added an extension of one node.</text>
    </description>
    <reference>
      <text>Huawei private.</text>
    </reference>
  </revision>
  <revision date="2019-11-20">
    <description>
      <text>Modify the static lsp model.</text>
    </description>
    <reference>
      <text>Huawei private.</text>
    </reference>
  </revision>
  <revision date="2019-03-27">
    <description>
      <text>Initial revision.</text>
    </description>
    <reference>
      <text>Huawei private.</text>
    </reference>
  </revision>
  <ext:task-name value="mpls-ldp"/>
  <typedef name="lsr-role-type">
    <type name="enumeration">
      <enum name="ingress">
        <value value="1"/>
        <description>
          <text>The role of the current LSR is ingress.</text>
        </description>
      </enum>
      <enum name="transit">
        <value value="2"/>
        <description>
          <text>The role of the current LSR is transit.</text>
        </description>
      </enum>
      <enum name="egress">
        <value value="3"/>
        <description>
          <text>The role of the current LSR is egress.</text>
        </description>
      </enum>
    </type>
    <description>
      <text>LSR role type.</text>
    </description>
  </typedef>
  <typedef name="lsp-status-type">
    <type name="enumeration">
      <enum name="down">
        <value value="0"/>
        <description>
          <text>The status of the LSP is down.</text>
        </description>
      </enum>
      <enum name="up">
        <value value="1"/>
        <description>
          <text>The status of the LSP is up.</text>
        </description>
      </enum>
    </type>
    <description>
      <text>LSP status type.</text>
    </description>
  </typedef>
  <augment target-node="/mpls:mpls">
    <description>
      <text>MPLS static configuration information augment to module MPLS.</text>
    </description>
    <container name="static">
      <when condition="/mpls:mpls/mpls:common/mpls:global/mpls:mpls-enable='true'"/>
      <description>
        <text>Configure MPLS static LSP.</text>
      </description>
      <container name="lsps">
        <description>
          <text>List of statist static LSPs.</text>
        </description>
        <list name="lsp">
          <key value="lsp-name"/>
          <unique tag="transit/in-label"/>
          <unique tag="egress/in-label"/>
          <description>
            <text>Configure a list of defined static LSPs.</text>
          </description>
          <leaf name="lsp-name">
            <type name="string">
              <length value="1..19"/>
            </type>
            <description>
              <text>The name of an LSP.</text>
            </description>
          </leaf>
          <leaf name="lsr-type">
            <ext:operation-exclude value="update"/>
            <type name="lsr-role-type"/>
            <mandatory value="true"/>
            <description>
              <text>The LSR role of an LSP.</text>
            </description>
          </leaf>
          <container name="ingress">
            <when condition="../lsr-type='ingress'"/>
            <must condition="(out-interface-name or next-hop)"/>
            <description>
              <text>Configure ingress.</text>
            </description>
            <leaf name="fec-address">
              <type name="inet:ipv4-address-no-zone"/>
              <mandatory value="true"/>
              <description>
                <text>The destination IP address.</text>
              </description>
            </leaf>
            <leaf name="prefix-length">
              <type name="uint8">
                <range value="0..32"/>
              </type>
              <mandatory value="true"/>
              <description>
                <text>The mask length of the destination IP address.</text>
              </description>
            </leaf>
            <leaf name="out-interface-name">
              <type name="leafref">
                <path value="/ifm:ifm/ifm:interfaces/ifm:interface/ifm:name"/>
              </type>
              <description>
                <text>The outbound interface.</text>
              </description>
            </leaf>
            <leaf name="next-hop">
              <type name="inet:ipv4-address-no-zone"/>
              <description>
                <text>The next-hop address.</text>
              </description>
            </leaf>
            <leaf name="out-label">
              <type name="uint32">
                <range value="16..1048575"/>
              </type>
              <mandatory value="true"/>
              <description>
                <text>The value of an outgoing label.</text>
              </description>
            </leaf>
          </container>
          <container name="transit">
            <when condition="../lsr-type='transit'"/>
            <must condition="(out-interface-name or next-hop)"/>
            <description>
              <text>Configure transit.</text>
            </description>
            <leaf name="in-interface-name">
              <type name="leafref">
                <path value="/ifm:ifm/ifm:interfaces/ifm:interface/ifm:name"/>
              </type>
              <description>
                <text>The inbound interface.</text>
              </description>
            </leaf>
            <leaf name="out-interface-name">
              <type name="leafref">
                <path value="/ifm:ifm/ifm:interfaces/ifm:interface/ifm:name"/>
              </type>
              <description>
                <text>The outbound interface.</text>
              </description>
            </leaf>
            <leaf name="next-hop">
              <type name="inet:ipv4-address-no-zone"/>
              <description>
                <text>The next-hop address.</text>
              </description>
            </leaf>
            <leaf name="in-label">
              <type name="uint32">
                <range value="16..32783"/>
              </type>
              <must condition="count(../../../lsp[egress/in-label=current()])=0"/>
              <mandatory value="true"/>
              <description>
                <text>The value of an incoming label.
Special explanation:
Incoming label Range is the max configured value, the actual value is dynamic according to different devices.</text>
              </description>
            </leaf>
            <leaf name="out-label">
              <type name="uint32">
                <range value="16..1048575"/>
              </type>
              <mandatory value="true"/>
              <description>
                <text>The value of an outgoing label.</text>
              </description>
            </leaf>
          </container>
          <container name="egress">
            <when condition="../lsr-type='egress'"/>
            <description>
              <text>Configure egress.</text>
            </description>
            <leaf name="in-interface-name">
              <type name="leafref">
                <path value="/ifm:ifm/ifm:interfaces/ifm:interface/ifm:name"/>
              </type>
              <description>
                <text>The inbound interface.</text>
              </description>
            </leaf>
            <leaf name="in-label">
              <type name="uint32">
                <range value="16..32783"/>
              </type>
              <must condition="count(../../../lsp[transit/in-label=current()])=0"/>
              <mandatory value="true"/>
              <description>
                <text>The value of an incoming label.
Special explanation:
Incoming label Range is the max configured value, the actual value is dynamic according to different devices.</text>
              </description>
            </leaf>
          </container>
        </list>
        <list name="lsp-state">
          <key value="name"/>
          <config value="false"/>
          <description>
            <text>MPLS static lsp state.</text>
          </description>
          <leaf name="name">
            <type name="string">
              <length value="1..19"/>
            </type>
            <config value="false"/>
            <description>
              <text>The name of an LSP.</text>
            </description>
          </leaf>
          <leaf name="type">
            <type name="lsr-role-type"/>
            <config value="false"/>
            <description>
              <text>The LSR Role of an LSP.</text>
            </description>
          </leaf>
          <leaf name="fec-address">
            <type name="inet:ipv4-address-no-zone"/>
            <config value="false"/>
            <description>
              <text>The destination IP address.</text>
            </description>
          </leaf>
          <leaf name="prefix-length">
            <type name="uint8">
              <range value="0..32"/>
            </type>
            <config value="false"/>
            <description>
              <text>The mask length of the destination IP address.</text>
            </description>
          </leaf>
          <leaf name="status">
            <type name="lsp-status-type"/>
            <config value="false"/>
            <description>
              <text>The status of an LSP.</text>
            </description>
          </leaf>
          <leaf name="index">
            <type name="uint32"/>
            <config value="false"/>
            <description>
              <text>The index of an LSP.</text>
            </description>
          </leaf>
          <leaf name="next-hop">
            <type name="inet:ipv4-address-no-zone"/>
            <config value="false"/>
            <description>
              <text>The next-hop address.</text>
            </description>
          </leaf>
          <leaf name="in-label">
            <type name="uint32">
              <range value="16..1048575"/>
            </type>
            <config value="false"/>
            <description>
              <text>The value of an incoming label.
Special explanation:
Incoming label Range is the max configured value, the actual value is dynamic according to different devices.</text>
            </description>
          </leaf>
          <leaf name="out-label">
            <type name="uint32">
              <range value="16..1048575"/>
            </type>
            <config value="false"/>
            <description>
              <text>The value of an outgoing label.</text>
            </description>
          </leaf>
          <leaf name="incoming-interface">
            <type name="pub-type:if-name"/>
            <config value="false"/>
            <description>
              <text>The incoming interface name.</text>
            </description>
          </leaf>
          <leaf name="outgoing-interface">
            <type name="pub-type:if-name"/>
            <config value="false"/>
            <description>
              <text>The outgoing interface name.</text>
            </description>
          </leaf>
          <leaf name="mtu">
            <type name="uint32">
              <range value="0..65535"/>
            </type>
            <units name="Byte"/>
            <config value="false"/>
            <description>
              <text>The Mtu of an LSP.</text>
            </description>
          </leaf>
          <leaf name="time-stamp">
            <type name="uint32">
              <range value="0..4294967295"/>
            </type>
            <units name="s"/>
            <config value="false"/>
            <description>
              <text>The time stamp of an LSP.</text>
            </description>
          </leaf>
        </list>
      </container>
      <container name="lsp-statistics">
        <config value="false"/>
        <description>
          <text>Statistics of static LSPs.</text>
        </description>
        <leaf name="up-lsp-number">
          <type name="uint32"/>
          <description>
            <text>Total number of static LSPs.</text>
          </description>
        </leaf>
        <leaf name="down-lsp-number">
          <type name="uint32"/>
          <description>
            <text>Number of static LSPs that are in the down state.</text>
          </description>
        </leaf>
        <leaf name="total-lsp-number">
          <type name="uint32"/>
          <description>
            <text>Total number of static LSPs.</text>
          </description>
        </leaf>
      </container>
    </container>
  </augment>
</module>
