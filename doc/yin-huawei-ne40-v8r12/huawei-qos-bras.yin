<?xml version="1.0" encoding="UTF-8"?>
<module name="huawei-qos-bras"
        xmlns="urn:ietf:params:xml:ns:yang:yin:1"
        xmlns:qos-bras="urn:huawei:yang:huawei-qos-bras"
        xmlns:ext="urn:huawei:yang:huawei-extension"
        xmlns:aaa="urn:huawei:yang:huawei-aaa"
        xmlns:bras-basic-access="urn:huawei:yang:huawei-bras-basic-access"
        xmlns:bras-qos="urn:huawei:yang:huawei-bras-qos"
        xmlns:qos="urn:huawei:yang:huawei-qos"
        xmlns:ifm="urn:huawei:yang:huawei-ifm">
  <namespace uri="urn:huawei:yang:huawei-qos-bras"/>
  <prefix value="qos-bras"/>
  <import module="huawei-extension">
    <prefix value="ext"/>
  </import>
  <import module="huawei-aaa">
    <prefix value="aaa"/>
  </import>
  <import module="huawei-bras-basic-access">
    <prefix value="bras-basic-access"/>
  </import>
  <import module="huawei-bras-qos">
    <prefix value="bras-qos"/>
  </import>
  <import module="huawei-qos">
    <prefix value="qos"/>
  </import>
  <import module="huawei-ifm">
    <prefix value="ifm"/>
  </import>
  <organization>
    <text>Huawei Technologies Co., Ltd.</text>
  </organization>
  <contact>
    <text>Huawei Industrial Base
Bantian, Longgang
Shenzhen 518129
People's Republic of China
Website: http://www.huawei.com
Email: support@huawei.com</text>
  </contact>
  <description>
    <text>Quality of service for bras.</text>
  </description>
  <revision date="2020-03-03">
    <description>
      <text>Modify descriptions and add new nodes.</text>
    </description>
    <reference>
      <text>Huawei private.</text>
    </reference>
  </revision>
  <revision date="2019-12-02">
    <description>
      <text>Add new nodes.</text>
    </description>
    <reference>
      <text>Huawei private.</text>
    </reference>
  </revision>
  <revision date="2019-09-20">
    <description>
      <text>Add new nodes.</text>
    </description>
    <reference>
      <text>Huawei private.</text>
    </reference>
  </revision>
  <revision date="2019-04-06">
    <description>
      <text>Initial revision.</text>
    </description>
    <reference>
      <text>Huawei private.</text>
    </reference>
  </revision>
  <ext:task-name value="qos"/>
  <typedef name="aaa-stream-flag">
    <type name="enumeration">
      <enum name="up-stream">
        <value value="1"/>
        <description>
          <text>Trust DS domain.</text>
        </description>
      </enum>
    </type>
    <description>
      <text>Stream flag.</text>
    </description>
  </typedef>
  <typedef name="aaa-map-type">
    <type name="enumeration">
      <enum name="inner-8021p">
        <value value="1"/>
        <description>
          <text>Inner 802.1p Priority.</text>
        </description>
      </enum>
      <enum name="outer-8021p">
        <value value="2"/>
        <description>
          <text>Outer 802.1p Priority.</text>
        </description>
      </enum>
      <enum name="dscp">
        <value value="3"/>
        <description>
          <text>Dscp Type.</text>
        </description>
      </enum>
      <enum name="mpls-exp">
        <value value="4"/>
        <description>
          <text>MPLS-eXP Type.</text>
        </description>
      </enum>
    </type>
    <description>
      <text>Map type.</text>
    </description>
  </typedef>
  <typedef name="aaa-trust-type">
    <type name="enumeration">
      <enum name="trust-8021p-inner">
        <value value="9"/>
        <description>
          <text>Trust-8021p-inner.</text>
        </description>
      </enum>
      <enum name="trust-8021p-outer">
        <value value="10"/>
        <description>
          <text>Trust-8021p-outer.</text>
        </description>
      </enum>
      <enum name="trust-dscp-inner">
        <value value="13"/>
        <description>
          <text>Trust-dscp-inner.</text>
        </description>
      </enum>
      <enum name="trust-dscp-outer">
        <value value="8"/>
        <description>
          <text>Trust-dscp-outer.</text>
        </description>
      </enum>
      <enum name="trust-exp-inner">
        <value value="11"/>
        <description>
          <text>Trust-exp-inner.</text>
        </description>
      </enum>
      <enum name="trust-exp-outer">
        <value value="12"/>
        <description>
          <text>Trust-exp-outer.</text>
        </description>
      </enum>
      <enum name="unchangeable">
        <value value="15"/>
        <description>
          <text>Unchangeable.</text>
        </description>
      </enum>
    </type>
    <description>
      <text>Trust type.</text>
    </description>
  </typedef>
  <typedef name="aaa-direction-type">
    <type name="enumeration">
      <enum name="up-stream">
        <value value="1"/>
        <description>
          <text>Upstream.</text>
        </description>
      </enum>
      <enum name="down-stream">
        <value value="2"/>
        <description>
          <text>Downstream.</text>
        </description>
      </enum>
    </type>
    <description>
      <text>AAA direction type.</text>
    </description>
  </typedef>
  <typedef name="exclude-type">
    <type name="enumeration">
      <enum name="user-queue">
        <value value="1"/>
        <description>
          <text>User queue.</text>
        </description>
      </enum>
      <enum name="car">
        <value value="2"/>
        <description>
          <text>Car.</text>
        </description>
      </enum>
      <enum name="all">
        <value value="0"/>
        <description>
          <text>All.</text>
        </description>
      </enum>
    </type>
    <description>
      <text>Session group exclude type.</text>
    </description>
  </typedef>
  <typedef name="aaa-l2-trust-type">
    <type name="enumeration">
      <enum name="trust-8021p-inner">
        <value value="9"/>
        <description>
          <text>L2 trust 8021p inner.</text>
        </description>
      </enum>
      <enum name="trust-8021p-outer">
        <value value="10"/>
        <description>
          <text>L2 trust 8021p outer.</text>
        </description>
      </enum>
      <enum name="trust-dscp-outer">
        <value value="8"/>
        <description>
          <text>L2 trust dscp outer.</text>
        </description>
      </enum>
    </type>
    <description>
      <text>L2 trust type.</text>
    </description>
  </typedef>
  <typedef name="rate-mode-type">
    <type name="enumeration">
      <enum name="car">
        <value value="0"/>
        <description>
          <text>Car.</text>
        </description>
      </enum>
      <enum name="user-queue">
        <value value="1"/>
        <description>
          <text>User queue.</text>
        </description>
      </enum>
    </type>
    <description>
      <text>Rate limit mode type.</text>
    </description>
  </typedef>
  <typedef name="granularity-type">
    <type name="enumeration">
      <enum name="1">
        <value value="1"/>
        <description>
          <text>1kbps.</text>
        </description>
      </enum>
      <enum name="16">
        <value value="16"/>
        <description>
          <text>16kbps.</text>
        </description>
      </enum>
      <enum name="32">
        <value value="32"/>
        <description>
          <text>32kbps.</text>
        </description>
      </enum>
      <enum name="64">
        <value value="64"/>
        <description>
          <text>64kbps.</text>
        </description>
      </enum>
      <enum name="128">
        <value value="128"/>
        <description>
          <text>128kbps.</text>
        </description>
      </enum>
      <enum name="256">
        <value value="256"/>
        <description>
          <text>256kbps.</text>
        </description>
      </enum>
      <enum name="512">
        <value value="512"/>
        <description>
          <text>512kbps.</text>
        </description>
      </enum>
      <enum name="1024">
        <value value="1024"/>
        <description>
          <text>1024kbps.</text>
        </description>
      </enum>
    </type>
    <description>
      <text>Granularity type.</text>
    </description>
  </typedef>
  <augment target-node="/aaa:aaa/aaa:domains/aaa:domain/bras-basic-access:bas/bras-qos:bras-qos">
    <description>
      <text>Adds aaa domain configuration to bras-qos model.</text>
    </description>
    <container name="trusts">
      <description>
        <text>List of configure trust diffserv domain.</text>
      </description>
      <list name="trust">
        <key value="up-stream-flag"/>
        <description>
          <text>Configure trust diffserv domain.</text>
        </description>
        <leaf name="up-stream-flag">
          <type name="aaa-stream-flag"/>
          <description>
            <text>To select trusting diffserv domain.</text>
          </description>
        </leaf>
        <leaf name="diffserv-domain-name">
          <type name="leafref">
            <path value="/qos:qos/qos:classifier-template/qos:diffserv-domains/qos:diffserv-domain/qos:name"/>
          </type>
          <default value="default"/>
          <description>
            <text>Name of a diffserv domain.</text>
          </description>
        </leaf>
      </list>
    </container>
    <container name="per-hop-behaviors">
      <description>
        <text>List of configure priority mappings.</text>
      </description>
      <list name="per-hop-behavior">
        <key value="type"/>
        <description>
          <text>Configure priority mappings.</text>
        </description>
        <leaf name="type">
          <type name="aaa-map-type"/>
          <description>
            <text>Map type.</text>
          </description>
        </leaf>
      </list>
    </container>
    <container name="user-prioritys">
      <description>
        <text>List of configure user priority.</text>
      </description>
      <list name="user-priority">
        <key value="direction"/>
        <description>
          <text>Configure user priority.</text>
        </description>
        <ext:generated-by value="system">
          <description>
            <text>The instance is generated automatically.</text>
          </description>
        </ext:generated-by>
        <ext:operation-exclude value="create|delete">
          <description>
            <text>The instances cannot be created and deleted.</text>
          </description>
        </ext:operation-exclude>
        <leaf name="direction">
          <type name="aaa-direction-type"/>
          <description>
            <text>Direction.</text>
          </description>
        </leaf>
        <choice name="type">
          <default value="trust"/>
          <description>
            <text>Specify type of user priority.</text>
          </description>
          <case name="trust">
            <description>
              <text>Specify type of user priority choice case as trust.</text>
            </description>
            <leaf name="trust-type">
              <type name="aaa-trust-type"/>
              <default value="unchangeable"/>
              <description>
                <text>Trust type.</text>
              </description>
            </leaf>
          </case>
          <case name="priority">
            <description>
              <text>Specify type of user priority choice case as priority value.</text>
            </description>
            <leaf name="priority-value">
              <type name="uint8">
                <range value="0..7"/>
              </type>
              <description>
                <text>Priority value.</text>
              </description>
            </leaf>
          </case>
        </choice>
      </list>
    </container>
    <container name="profile-applys">
      <description>
        <text>List of configure QoS profile application.</text>
      </description>
      <list name="profile-apply">
        <key value="direction"/>
        <description>
          <text>Configure QoS profile application.</text>
        </description>
        <leaf name="direction">
          <type name="qos:qos-direction-type"/>
          <description>
            <text>Direction.</text>
          </description>
        </leaf>
        <leaf name="profile-name">
          <type name="leafref">
            <path value="/qos:qos/qos:queue-scheduler-template/qos:profiles/qos:profile/qos:name"/>
          </type>
          <must condition="/qos:qos/qos:queue-scheduler-template/qos:profiles/qos:profile[qos:name=current()]/qos:mode='normal'"/>
          <mandatory value="true"/>
          <description>
            <text>Name of Qos Profile.</text>
          </description>
        </leaf>
      </list>
    </container>
    <container name="redirect-diffserv-domain">
      <description>
        <text>Configure redirect diffserv domain.</text>
      </description>
      <leaf name="diffserv-domain-name">
        <type name="leafref">
          <path value="/qos:qos/qos:classifier-template/qos:diffserv-domains/qos:diffserv-domain/qos:name"/>
        </type>
        <description>
          <text>Name of a diffserv domain.</text>
        </description>
      </leaf>
    </container>
    <container name="session-group-excludes">
      <description>
        <text>List of configure session group exclude.</text>
      </description>
      <list name="session-group-exclude">
        <must condition="(./type='all' and not (../session-group-exclude[type='user-queue']) and not(../session-group-exclude[type='car']) or (./type!='all' and not(../session-group-exclude[type='all'])))"/>
        <key value="type direction"/>
        <description>
          <text>Configure session group exclude.</text>
        </description>
        <leaf name="type">
          <type name="exclude-type"/>
          <description>
            <text>Session group exclude type.</text>
          </description>
        </leaf>
        <leaf name="direction">
          <type name="qos:qos-direction-type"/>
          <description>
            <text>Direction.</text>
          </description>
        </leaf>
      </list>
    </container>
    <container name="l2-user-priority">
      <description>
        <text>Configure L2 user priority.</text>
      </description>
      <leaf name="trust-type">
        <type name="aaa-l2-trust-type"/>
        <description>
          <text>Trust type.</text>
        </description>
      </leaf>
    </container>
    <container name="rate-limits">
      <description>
        <text>List of configure rate limit mode.</text>
      </description>
      <list name="rate-limit">
        <key value="direction"/>
        <description>
          <text>Configure rate limit mode.</text>
        </description>
        <leaf name="direction">
          <type name="qos:qos-direction-type"/>
          <description>
            <text>Direction.</text>
          </description>
        </leaf>
        <leaf name="mode">
          <type name="rate-mode-type"/>
          <mandatory value="true"/>
          <description>
            <text>Rate limit mode.</text>
          </description>
        </leaf>
      </list>
    </container>
    <container name="dscp-user-priority">
      <description>
        <text>Configure dscp user priority.</text>
      </description>
      <leaf name="value">
        <type name="uint8">
          <range value="0..63"/>
        </type>
        <description>
          <text>Dscp value.</text>
        </description>
      </leaf>
    </container>
    <container name="link-adjustment">
      <description>
        <text>Configure link adjustment.</text>
      </description>
      <leaf name="enable">
        <type name="qos:enable-type"/>
        <description>
          <text>Link adjustment remote enable.</text>
        </description>
      </leaf>
      <leaf name="adjust-value">
        <type name="int32">
          <range value="-64..-1 | 1..64"/>
        </type>
        <description>
          <text>Adjust value.</text>
        </description>
      </leaf>
      <leaf name="shaping-mode">
        <type name="qos:link-adjustment-type"/>
        <description>
          <text>Shaping mode. If users access the network through PPPoA, the remote link type must be set to cell; if users access the network through PPPoE, the remote link type does not need to be set to cell.</text>
        </description>
      </leaf>
    </container>
    <container name="user-queue-granularitys">
      <description>
        <text>Configure user queue granularity.</text>
      </description>
      <container name="user-queue-granularity">
        <presence value="create user-queue-granularity"/>
        <description>
          <text>Enable/disable user queue granularity.</text>
        </description>
        <leaf name="granularity-value">
          <type name="granularity-type"/>
          <mandatory value="true"/>
          <description>
            <text>Specify the value of granularity (range:1/16/32/64/128/256/512/1024).</text>
          </description>
        </leaf>
      </container>
    </container>
  </augment>
  <augment target-node="/ifm:ifm/ifm:interfaces/ifm:interface/bras-basic-access:bas/bras-basic-access:access-type/bras-basic-access:layer2-subscriber/bras-basic-access:layer2-subscriber">
    <description>
      <text>L2 BAS interface QoS configurations.</text>
    </description>
    <container name="qos-profile-applys">
      <description>
        <text>List of configure profile application.</text>
      </description>
      <list name="qos-profile-apply">
        <must condition="./ce-begin-vlan-id &lt;= ./ce-end-vlan-id"/>
        <key value="direction any-other-type pe-vlan-id ce-begin-vlan-id ce-end-vlan-id"/>
        <description>
          <text>Configure profile application.</text>
        </description>
        <leaf name="direction">
          <type name="qos:all-direction-type"/>
          <description>
            <text>Direction.</text>
          </description>
        </leaf>
        <leaf name="any-other-type">
          <type name="qos:any-other-type"/>
          <description>
            <text>BAS QoS profile apply any other type.</text>
          </description>
        </leaf>
        <leaf name="pe-vlan-id">
          <type name="uint32">
            <range value="0..4094"/>
          </type>
          <description>
            <text>PE VLAN ID.</text>
          </description>
        </leaf>
        <leaf name="ce-begin-vlan-id">
          <type name="uint32">
            <range value="0..4094"/>
          </type>
          <description>
            <text>CE begin VLAN ID.</text>
          </description>
        </leaf>
        <leaf name="ce-end-vlan-id">
          <type name="uint32">
            <range value="0..4094"/>
          </type>
          <description>
            <text>CE end VLAN ID.</text>
          </description>
        </leaf>
        <leaf name="identify-type">
          <type name="qos:bas-profile-identifier-type"/>
          <mandatory value="true"/>
          <description>
            <text>Identify type. The range supported by this node varies according to the interface type.</text>
          </description>
        </leaf>
        <leaf name="profile-name">
          <type name="leafref">
            <path value="/qos:qos/qos:queue-scheduler-template/qos:profiles/qos:profile/qos:name"/>
          </type>
          <must condition="/qos:qos/qos:queue-scheduler-template/qos:profiles/qos:profile[qos:name=current()]/qos:mode='normal'"/>
          <mandatory value="true"/>
          <description>
            <text>QoS profile name.</text>
          </description>
        </leaf>
        <leaf name="group-name">
          <type name="qos:template-name"/>
          <description>
            <text>The name of user queue group.</text>
          </description>
        </leaf>
        <leaf name="session-limit-number">
          <type name="uint32">
            <range value="1..256"/>
          </type>
          <description>
            <text>Session limit number.</text>
          </description>
        </leaf>
      </list>
    </container>
    <container name="user-group-queue-applys">
      <description>
        <text>List of configure user group queue application.</text>
      </description>
      <list name="user-group-queue-apply">
        <key value="direction"/>
        <description>
          <text>Configure user group queue application.</text>
        </description>
        <leaf name="direction">
          <type name="qos:out-direction-type"/>
          <description>
            <text>Group queue direction.</text>
          </description>
        </leaf>
        <leaf name="group-queue-name">
          <ext:operation-exclude value="update">
            <description>
              <text>After the configuration is created, the node cannot be modified.</text>
            </description>
          </ext:operation-exclude>
          <type name="leafref">
            <path value="/qos:qos/qos:queue-scheduler-template/qos:user-group-queues/qos:user-group-queue/qos:name"/>
          </type>
          <must condition="/qos:qos/qos:queue-scheduler-template/qos:user-group-queues/qos:user-group-queue[qos:name=current()]/qos:mode='normal'"/>
          <mandatory value="true"/>
          <description>
            <text>Group queue name.</text>
          </description>
        </leaf>
        <leaf name="group-name">
          <ext:operation-exclude value="create|update|delete">
            <description>
              <text>After the configuration is created, the node cannot be modified and deleted. When the list instance has created without group-name, and the group-name can not be created.</text>
            </description>
          </ext:operation-exclude>
          <type name="string">
            <length value="1..31"/>
          </type>
          <description>
            <text>Group-name.</text>
          </description>
        </leaf>
      </list>
    </container>
  </augment>
</module>
