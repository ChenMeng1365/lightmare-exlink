<?xml version="1.0" encoding="UTF-8"?>
<module name="huawei-flow-recognition"
        xmlns="urn:ietf:params:xml:ns:yang:yin:1"
        xmlns:flow-recognition="urn:huawei:yang:huawei-flow-recognition"
        xmlns:pub-type="urn:huawei:yang:huawei-pub-type"
        xmlns:ext="urn:huawei:yang:huawei-extension"
        xmlns:inet="urn:ietf:params:xml:ns:yang:ietf-inet-types"
        xmlns:ifm="urn:huawei:yang:huawei-ifm"
        xmlns:ethernet="urn:huawei:yang:huawei-ethernet">
  <yang-version value="1"/>
  <namespace uri="urn:huawei:yang:huawei-flow-recognition"/>
  <prefix value="flow-recognition"/>
  <import module="huawei-pub-type">
    <prefix value="pub-type"/>
  </import>
  <import module="huawei-extension">
    <prefix value="ext"/>
  </import>
  <import module="ietf-inet-types">
    <prefix value="inet"/>
  </import>
  <import module="huawei-ifm">
    <prefix value="ifm"/>
  </import>
  <import module="huawei-ethernet">
    <prefix value="ethernet"/>
  </import>
  <organization>
    <text>Huawei Technologies Co., Ltd.</text>
  </organization>
  <contact>
    <text>Huawei Industrial Base
Bantian, Longgang
Shenzhen 518129
People's Republic of China
Website: http://www.huawei.com
Email: support@huawei.com</text>
  </contact>
  <description>
    <text>Flow recognition.</text>
  </description>
  <reference>
    <text>Huawei private.</text>
  </reference>
  <revision date="2020-03-27">
    <description>
      <text>Added configure function to the YANG file.</text>
    </description>
    <reference>
      <text>Huawei private.</text>
    </reference>
  </revision>
  <revision date="2019-06-13">
    <description>
      <text>Initial revision.</text>
    </description>
    <reference>
      <text>Huawei private.</text>
    </reference>
  </revision>
  <ext:task-name value="esqm"/>
  <container name="flow-recognition">
    <description>
      <text>Collect flow information.</text>
    </description>
    <container name="streaminfos">
      <config value="false"/>
      <description>
        <text>List of flow information.</text>
      </description>
      <list name="streaminfo">
        <key value="src-mac dst-mac src-ip-addr dst-ip-addr src-port dst-port protocol"/>
        <description>
          <text>Statistics of flow information.</text>
        </description>
        <leaf name="src-mac">
          <type name="pub-type:mac-address"/>
          <description>
            <text>"Source mac address."</text>
          </description>
        </leaf>
        <leaf name="dst-mac">
          <type name="pub-type:mac-address"/>
          <description>
            <text>"Destination mac address."</text>
          </description>
        </leaf>
        <leaf name="src-ip-addr">
          <type name="inet:ip-address-no-zone"/>
          <description>
            <text>"IP source address."</text>
          </description>
        </leaf>
        <leaf name="dst-ip-addr">
          <type name="inet:ip-address-no-zone"/>
          <description>
            <text>"IP destination address."</text>
          </description>
        </leaf>
        <leaf name="src-port">
          <type name="uint16"/>
          <description>
            <text>"Source port."</text>
          </description>
        </leaf>
        <leaf name="dst-port">
          <type name="uint16"/>
          <description>
            <text>"Destination port."</text>
          </description>
        </leaf>
        <leaf name="protocol">
          <type name="uint8"/>
          <description>
            <text>"Protocol,eg 6 (TCP)."</text>
          </description>
        </leaf>
        <leaf name="direction">
          <type name="uint8"/>
          <description>
            <text>"Direction."</text>
          </description>
        </leaf>
        <leaf name="if-name">
          <type name="pub-type:if-name"/>
          <description>
            <text>"Interface Name."</text>
          </description>
        </leaf>
        <leaf name="time-stamp-sec">
          <type name="uint32"/>
          <units name="s"/>
          <description>
            <text>"Seconds from 1970."</text>
          </description>
        </leaf>
        <leaf name="time-stamp-nsec">
          <type name="uint32"/>
          <units name="ns"/>
          <description>
            <text>"Nano-seconds in 1 sec."</text>
          </description>
        </leaf>
        <leaf name="packet-num">
          <type name="uint64"/>
          <description>
            <text>"The packets num of the flow."</text>
          </description>
        </leaf>
        <leaf name="bytes-num">
          <type name="uint64"/>
          <description>
            <text>"The bytes num of the flow."</text>
          </description>
        </leaf>
      </list>
    </container>
  </container>
  <augment target-node="/ifm:ifm/ifm:interfaces/ifm:interface">
    <description>
      <text>Configure the flow recognition for interface.</text>
    </description>
    <container name="flow-recognition">
      <description>
        <text>Configure the flow recognition management.</text>
      </description>
      <container name="flow-enables">
        <description>
          <text>List of the interface flow recognition.</text>
        </description>
        <list name="flow-enable">
          <must condition="not(../../../ethernet:ethernet/ethernet:main-interface/ethernet:l2-attribute)"/>
          <must condition="../../../ifm:type='100GE' or&#10;../../../ifm:type='25GE' or&#10;../../../ifm:type='200GE' or&#10;../../../ifm:type='400GE' or&#10;../../../ifm:type='40GE' or&#10;../../../ifm:type='10GE' or&#10;../../../ifm:type='50GE' or&#10;../../../ifm:type='10x10GE' or&#10;../../../ifm:type='3x40GE' or&#10;../../../ifm:type='4x10GE' or&#10;../../../ifm:type='4x25GE' or&#10;../../../ifm:type='50|100GE' or&#10;../../../ifm:type='Ethernet' or&#10;../../../ifm:type='GigabitEthernet' or&#10;../../../ifm:type='XGigabitEthernet' or&#10;../../../ifm:type='FlexE'"/>
          <key value="direction"/>
          <leaf name="direction">
            <type name="enumeration">
              <enum name="inbound">
                <value value="0"/>
                <description>
                  <text>Indicates the interface flow recognition inbound mode.</text>
                </description>
              </enum>
            </type>
            <description>
              <text>Direction of interface flow recognition mode.</text>
            </description>
          </leaf>
          <description>
            <text>Configure the interface flow recognition mode.</text>
          </description>
        </list>
      </container>
    </container>
  </augment>
</module>
