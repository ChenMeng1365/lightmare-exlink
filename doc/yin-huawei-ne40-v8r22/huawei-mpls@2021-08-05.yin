<?xml version="1.0" encoding="UTF-8"?>
<module name="huawei-mpls"
        xmlns="urn:ietf:params:xml:ns:yang:yin:1"
        xmlns:mpls="urn:huawei:yang:huawei-mpls"
        xmlns:inet="urn:ietf:params:xml:ns:yang:ietf-inet-types"
        xmlns:pub-type="urn:huawei:yang:huawei-pub-type"
        xmlns:ext="urn:huawei:yang:huawei-extension"
        xmlns:ni="urn:huawei:yang:huawei-network-instance"
        xmlns:ifm="urn:huawei:yang:huawei-ifm">
  <namespace uri="urn:huawei:yang:huawei-mpls"/>
  <prefix value="mpls"/>
  <import module="ietf-inet-types">
    <prefix value="inet"/>
  </import>
  <import module="huawei-pub-type">
    <prefix value="pub-type"/>
  </import>
  <import module="huawei-extension">
    <prefix value="ext"/>
  </import>
  <import module="huawei-network-instance">
    <prefix value="ni"/>
  </import>
  <import module="huawei-ifm">
    <prefix value="ifm"/>
  </import>
  <include module="huawei-mpls-type"/>
  <organization>
    <text>Huawei Technologies Co., Ltd.</text>
  </organization>
  <contact>
    <text>Huawei Industrial Base
Bantian, Longgang
Shenzhen 518129
People's Republic of China
Website: http://www.huawei.com
Email: support@huawei.com</text>
  </contact>
  <description>
    <text>Specifies the multi-protocol label switching protocol.</text>
  </description>
  <revision date="2021-08-05">
    <description>
      <text>Add sr-adjacency-ttl-mode and traffic-statistic-enable nodes.</text>
    </description>
    <reference>
      <text>Huawei private.</text>
    </reference>
  </revision>
  <revision date="2020-07-02">
    <description>
      <text>Modified the must condition of nine containers.</text>
    </description>
    <reference>
      <text>Huawei private.</text>
    </reference>
  </revision>
  <revision date="2020-04-13">
    <description>
      <text>Add TE session CAR nodes.</text>
    </description>
    <reference>
      <text>Huawei private.</text>
    </reference>
  </revision>
  <revision date="2020-03-24">
    <description>
      <text>Added session CAR nodes.</text>
    </description>
    <reference>
      <text>Huawei private.</text>
    </reference>
  </revision>
  <revision date="2020-03-17">
    <description>
      <text>Modified some description.</text>
    </description>
    <reference>
      <text>Huawei private.</text>
    </reference>
  </revision>
  <revision date="2020-02-29">
    <description>
      <text>Modified the value range of one node, and some description.</text>
    </description>
    <reference>
      <text>Huawei private.</text>
    </reference>
  </revision>
  <revision date="2020-02-27">
    <description>
      <text>Modify the description of fragmented-packet-count node.</text>
    </description>
    <reference>
      <text>Huawei private.</text>
    </reference>
  </revision>
  <revision date="2020-02-12">
    <description>
      <text>Added the sr-exp-mode node.</text>
    </description>
    <reference>
      <text>Huawei private.</text>
    </reference>
  </revision>
  <revision date="2019-04-02">
    <description>
      <text>Initial revision.</text>
    </description>
    <reference>
      <text>Huawei private.</text>
    </reference>
  </revision>
  <ext:task-name value="mpls-base"/>
  <container name="mpls">
    <description>
      <text>Specifies the multi-protocol label switching protocol.</text>
    </description>
    <container name="common">
      <description>
        <text>Configure basic MPLS.</text>
      </description>
      <container name="global">
        <description>
          <text>Configure the multi-protocol label switching protocol global attributes.</text>
        </description>
        <leaf name="mpls-enable">
          <type name="boolean"/>
          <default value="false"/>
          <description>
            <text>Enable/disable MPLS.</text>
          </description>
        </leaf>
        <leaf name="lsr-id">
          <type name="inet:ipv4-address-no-zone"/>
          <description>
            <text>MPLS LSR ID. If the MPLS LSR ID uses the primary IP address of the loopback interface, the loopback interface cannot be deleted.</text>
          </description>
        </leaf>
        <leaf name="null-lable-type">
          <when condition="../mpls-enable='true'"/>
          <type name="label-advertise"/>
          <default value="implicit-null"/>
          <description>
            <text>Specifies a null label type. 1. Implicit null label: This type of labels can be popped by using the Penultimate Hop Popping (PHP) feature. The end node assigns an implicit null label 3 to the penultimate node. 2. Explicit null label: This type of labels cannot be popped by using the PHP feature. The end node assigns the explicit null label 0 to the penultimate node. 3. Null label unsupported: The PHP feature cannot be used to pop a label. The end node assigns a non-null label whose value is equal to or larger than 16 to the penultimate node.</text>
          </description>
        </leaf>
        <leaf name="diff-serv-mode">
          <when condition="../mpls-enable='true'"/>
          <type name="diff-serv-mode-type"/>
          <default value="uniform"/>
          <description>
            <text>Specifies the diffserv mode for MPLS.</text>
          </description>
        </leaf>
        <leaf name="sr-exp-mode">
          <when condition="../mpls-enable='true'"/>
          <type name="sr-exp-mode-type"/>
          <default value="pipe"/>
          <description>
            <text>Specifies the EXP mode for SR. The value can be pipe or uniform.</text>
          </description>
        </leaf>
        <leaf name="te-ttl-mode">
          <when condition="../mpls-enable='true'"/>
          <type name="mpls-ttl-mode-type"/>
          <default value="uniform"/>
          <description>
            <text>Specifies the TTL mode for RSVP TE.</text>
          </description>
        </leaf>
        <leaf name="ldp-ttl-mode">
          <when condition="../mpls-enable='true'"/>
          <type name="mpls-ttl-mode-type"/>
          <default value="uniform"/>
          <description>
            <text>Specifies the TTL mode for LDP.</text>
          </description>
        </leaf>
        <leaf name="sr-ttl-mode">
          <when condition="../mpls-enable='true'"/>
          <type name="mpls-ttl-mode-type"/>
          <default value="uniform"/>
          <description>
            <text>SR TTL mode.</text>
          </description>
        </leaf>
        <leaf name="sr-adjacency-ttl-mode">
          <when condition="../mpls-enable='true'"/>
          <type name="mpls-ttl-mode-type"/>
          <default value="uniform"/>
          <description>
            <text>SR Adjacency TTL mode.</text>
          </description>
        </leaf>
        <leaf name="ftn-delay-time">
          <when condition="../mpls-enable='true'"/>
          <type name="uint32">
            <range value="0..120"/>
          </type>
          <units name="s"/>
          <default value="0"/>
          <description>
            <text>Specifies the FEC to NHLFE tunnel delay time.</text>
          </description>
        </leaf>
        <leaf name="mpls-mtu-independent">
          <when condition="../mpls-enable='true'"/>
          <type name="boolean"/>
          <default value="false"/>
          <description>
            <text>Enable/disable of MTU independent.</text>
          </description>
        </leaf>
        <leaf name="entropy-label-capability">
          <when condition="../mpls-enable='true'"/>
          <type name="boolean"/>
          <default value="false"/>
          <description>
            <text>Enable/disable of entropy label capability.</text>
          </description>
        </leaf>
        <leaf name="traffic-statistic-enable">
          <type name="boolean"/>
          <must condition="(current()='false') or (current()='true' and ../mpls-enable='true')"/>
          <default value="false"/>
          <description>
            <text>Enable/disable MPLS traffic statistic.</text>
          </description>
        </leaf>
      </container>
      <container name="threshold-alarm">
        <when condition="/mpls:mpls/mpls:common/mpls:global/mpls:mpls-enable='true'"/>
        <description>
          <text>Configure threshold alarm.</text>
        </description>
        <container name="autobypass-tunnel-number">
          <must condition="(not(upper-value) and not(lower-value)) or upper-value&gt;lower-value"/>
          <description>
            <text>Configure TE bypass tunnel.</text>
          </description>
          <leaf name="upper-value">
            <type name="uint32">
              <range value="1..100"/>
            </type>
            <default value="80"/>
            <description>
              <text>Upper value of the threshold.</text>
            </description>
          </leaf>
          <leaf name="lower-value">
            <type name="uint32">
              <range value="1..100"/>
            </type>
            <default value="75"/>
            <description>
              <text>Lower value of the threshold.</text>
            </description>
          </leaf>
        </container>
        <container name="autoprimary-tunnel-number">
          <must condition="(not(upper-value) and not(lower-value)) or upper-value&gt;lower-value"/>
          <description>
            <text>Configure TE primary tunnel.</text>
          </description>
          <leaf name="upper-value">
            <type name="uint32">
              <range value="1..100"/>
            </type>
            <default value="80"/>
            <description>
              <text>Upper value of the threshold.</text>
            </description>
          </leaf>
          <leaf name="lower-value">
            <type name="uint32">
              <range value="1..100"/>
            </type>
            <default value="75"/>
            <description>
              <text>Lower value of the threshold.</text>
            </description>
          </leaf>
        </container>
        <container name="ldp-lsp-number">
          <must condition="(not(upper-value) and not(lower-value)) or upper-value&gt;lower-value"/>
          <description>
            <text>Configure LDP LSP.</text>
          </description>
          <leaf name="upper-value">
            <type name="uint32">
              <range value="1..100"/>
            </type>
            <default value="80"/>
            <description>
              <text>Upper value of the threshold.</text>
            </description>
          </leaf>
          <leaf name="lower-value">
            <type name="uint32">
              <range value="1..100"/>
            </type>
            <default value="75"/>
            <description>
              <text>Lower value of the threshold.</text>
            </description>
          </leaf>
        </container>
        <container name="outsegment-number">
          <must condition="(not(upper-value) and not(lower-value)) or upper-value&gt;lower-value"/>
          <description>
            <text>Configure LDP outsegment.</text>
          </description>
          <leaf name="upper-value">
            <type name="uint32">
              <range value="1..100"/>
            </type>
            <default value="80"/>
            <description>
              <text>Upper value of the threshold.</text>
            </description>
          </leaf>
          <leaf name="lower-value">
            <type name="uint32">
              <range value="1..100"/>
            </type>
            <default value="75"/>
            <description>
              <text>Lower value of the threshold.</text>
            </description>
          </leaf>
        </container>
        <container name="remote-adjacency-number">
          <must condition="(not(upper-value) and not(lower-value)) or upper-value&gt;lower-value"/>
          <description>
            <text>Configure LDP remote adjancency.</text>
          </description>
          <leaf name="upper-value">
            <type name="uint32">
              <range value="1..100"/>
            </type>
            <default value="80"/>
            <description>
              <text>Upper value of the threshold.</text>
            </description>
          </leaf>
          <leaf name="lower-value">
            <type name="uint32">
              <range value="1..100"/>
            </type>
            <default value="75"/>
            <description>
              <text>Lower value of the threshold.</text>
            </description>
          </leaf>
        </container>
        <container name="mldp-tree-number">
          <must condition="(not(upper-value) and not(lower-value)) or upper-value&gt;lower-value"/>
          <description>
            <text>Configure MLDP P2MP tree.</text>
          </description>
          <leaf name="upper-value">
            <type name="uint32">
              <range value="1..100"/>
            </type>
            <default value="80"/>
            <description>
              <text>Upper value of the threshold.</text>
            </description>
          </leaf>
          <leaf name="lower-value">
            <type name="uint32">
              <range value="1..100"/>
            </type>
            <default value="75"/>
            <description>
              <text>Lower value of the threshold.</text>
            </description>
          </leaf>
        </container>
        <container name="mldp-branch-number">
          <must condition="(not(upper-value) and not(lower-value)) or upper-value&gt;lower-value"/>
          <description>
            <text>Configure MLDP P2MP Branch.</text>
          </description>
          <leaf name="upper-value">
            <type name="uint32">
              <range value="1..100"/>
            </type>
            <default value="80"/>
            <description>
              <text>Upper value of the threshold.</text>
            </description>
          </leaf>
          <leaf name="lower-value">
            <type name="uint32">
              <range value="1..100"/>
            </type>
            <default value="75"/>
            <description>
              <text>Lower value of the threshold.</text>
            </description>
          </leaf>
        </container>
        <container name="rsvp-lsp-number">
          <must condition="(not(upper-value) and not(lower-value)) or upper-value&gt;lower-value"/>
          <description>
            <text>Configure RSVP LSP.</text>
          </description>
          <leaf name="upper-value">
            <type name="uint32">
              <range value="1..100"/>
            </type>
            <default value="80"/>
            <description>
              <text>Upper value of the threshold.</text>
            </description>
          </leaf>
          <leaf name="lower-value">
            <type name="uint32">
              <range value="1..100"/>
            </type>
            <default value="75"/>
            <description>
              <text>Lower value of the threshold.</text>
            </description>
          </leaf>
        </container>
        <container name="dynamic-label-number">
          <must condition="(not(upper-value) and not(lower-value)) or upper-value&gt;lower-value"/>
          <description>
            <text>Configure Dynamic label.</text>
          </description>
          <leaf name="upper-value">
            <type name="uint32">
              <range value="1..100"/>
            </type>
            <default value="80"/>
            <description>
              <text>Upper value of the threshold.</text>
            </description>
          </leaf>
          <leaf name="lower-value">
            <type name="uint32">
              <range value="1..100"/>
            </type>
            <default value="70"/>
            <description>
              <text>Lower value of the threshold.</text>
            </description>
          </leaf>
        </container>
      </container>
      <container name="bit-err-levels">
        <description>
          <text>List of the config for bit error level information.</text>
        </description>
        <list name="bit-err-level">
          <key value="level-number"/>
          <max-elements value="3"/>
          <description>
            <text>Configure bit error level information.</text>
          </description>
          <leaf name="level-number">
            <type name="uint8">
              <range value="1..3"/>
            </type>
            <description>
              <text>Specifies level number.</text>
            </description>
          </leaf>
          <leaf name="switch-coe">
            <type name="uint8">
              <range value="1..9"/>
            </type>
            <must condition="../switch-pow!=../resume-pow or ../switch-coe&gt;=../resume-coe"/>
            <mandatory value="true"/>
            <description>
              <text>Coefficient of switch threshold.</text>
            </description>
          </leaf>
          <leaf name="switch-pow">
            <type name="uint8">
              <range value="1..7"/>
            </type>
            <mandatory value="true"/>
            <description>
              <text>Power of switch threshold.</text>
            </description>
          </leaf>
          <leaf name="resume-coe">
            <type name="uint8">
              <range value="1..9"/>
            </type>
            <mandatory value="true"/>
            <description>
              <text>Coefficient of resume threshold.</text>
            </description>
          </leaf>
          <leaf name="resume-pow">
            <type name="uint8">
              <range value="1..7"/>
            </type>
            <must condition="../resume-pow&gt;=../switch-pow"/>
            <mandatory value="true"/>
            <description>
              <text>Power of resume threshold.</text>
            </description>
          </leaf>
        </list>
      </container>
      <container name="cross-connects">
        <config value="false"/>
        <description>
          <text>List of cross connections.</text>
        </description>
        <list name="cross-connect">
          <key value="xc-index outsegment-index insegment-index"/>
          <description>
            <text>Operational data of a cross connection.</text>
          </description>
          <leaf name="xc-index">
            <type name="uint32"/>
            <description>
              <text>Specifies a cross connection index.</text>
            </description>
          </leaf>
          <leaf name="outsegment-index">
            <type name="uint32"/>
            <description>
              <text>Outsegment index.</text>
            </description>
          </leaf>
          <leaf name="insegment-index">
            <type name="uint32"/>
            <description>
              <text>Insegment index.</text>
            </description>
          </leaf>
          <leaf name="xc-out-interface-name">
            <type name="pub-type:if-name"/>
            <description>
              <text>Out-going interface.</text>
            </description>
          </leaf>
          <leaf name="xc-out-label">
            <type name="uint32"/>
            <description>
              <text>Out-going label.</text>
            </description>
          </leaf>
          <leaf name="xc-next-hop">
            <type name="inet:ipv4-address-no-zone"/>
            <description>
              <text>Next hop.</text>
            </description>
          </leaf>
          <leaf name="xc-in-interface-name">
            <type name="pub-type:if-name"/>
            <description>
              <text>In-coming interface.</text>
            </description>
          </leaf>
          <leaf name="xc-in-label">
            <type name="uint32"/>
            <description>
              <text>In-coming label.</text>
            </description>
          </leaf>
          <leaf name="xc-outgoing-tunnel-id">
            <type name="uint32"/>
            <description>
              <text>Stick Tunnel ID.</text>
            </description>
          </leaf>
          <leaf name="xc-outgoing-tunnel-type">
            <type name="outgoing-tunnel-type"/>
            <description>
              <text>Stick Tunnel Type.</text>
            </description>
          </leaf>
        </list>
      </container>
      <container name="ilm-label-stacks">
        <config value="false"/>
        <description>
          <text>List of incoming label map (ILM) label stacks.</text>
        </description>
        <list name="ilm-label-stack">
          <key value="in-label label-stack level"/>
          <config value="false"/>
          <description>
            <text>Operational data of incoming label map (ILM) label stack.</text>
          </description>
          <leaf name="in-label">
            <type name="uint32"/>
            <description>
              <text>Incoming label.</text>
            </description>
          </leaf>
          <leaf name="label-stack">
            <type name="uint32"/>
            <description>
              <text>ILM label stack number.</text>
            </description>
          </leaf>
          <leaf name="level">
            <type name="uint32"/>
            <description>
              <text>ILM label stack level.</text>
            </description>
          </leaf>
          <leaf name="type">
            <type name="string">
              <length value="1..50"/>
            </type>
            <description>
              <text>LSP type.</text>
            </description>
          </leaf>
          <leaf name="out-label">
            <type name="uint32"/>
            <description>
              <text>Outgoing label. The name is case-insensitive.</text>
            </description>
          </leaf>
          <leaf name="out-interface-name">
            <type name="pub-type:if-name"/>
            <description>
              <text>Outbound interface name.</text>
            </description>
          </leaf>
        </list>
      </container>
      <container name="lsp-statistics">
        <config value="false"/>
        <description>
          <text>List of MPLS LSP statistics.</text>
        </description>
        <list name="lsp-statistic">
          <key value="lsp-type"/>
          <config value="false"/>
          <description>
            <text>Specifies MPLS LSP statistics.</text>
          </description>
          <leaf name="lsp-type">
            <type name="mpls-lsp-type"/>
            <config value="false"/>
            <description>
              <text>Specifies an LSP type.</text>
            </description>
          </leaf>
          <leaf name="ingress-lsp">
            <type name="uint32"/>
            <config value="false"/>
            <description>
              <text>Specifies the number of LSPs whose ingresses are the local node.</text>
            </description>
          </leaf>
          <leaf name="egress-lsp">
            <type name="uint32"/>
            <config value="false"/>
            <description>
              <text>Specifies the number of LSPs whose egresses are the local node.</text>
            </description>
          </leaf>
          <leaf name="transit-lsp">
            <type name="uint32"/>
            <config value="false"/>
            <description>
              <text>Specifies the number of LSPs whose transit nodes are the local node.</text>
            </description>
          </leaf>
          <leaf name="total-lsp">
            <type name="uint32"/>
            <config value="false"/>
            <description>
              <text>Specifies the total number of LSPs.</text>
            </description>
          </leaf>
        </list>
      </container>
      <container name="session-car">
        <description>
          <text>Configure MPLS session CAR.</text>
        </description>
      </container>
    </container>
  </container>
  <augment target-node="/ni:network-instance/ni:instances/ni:instance">
    <description>
      <text>MPLS Configuration information augment to network instance.</text>
    </description>
    <container name="mpls">
      <when condition="/mpls:mpls/mpls:common/mpls:global/mpls:mpls-enable='true'"/>
      <description>
        <text>Configure MPLS.</text>
      </description>
      <container name="common">
        <description>
          <text>Configure common MPLS.</text>
        </description>
        <container name="mpls-interfaces">
          <description>
            <text>List of interfaces on which MPLS is enabled.</text>
          </description>
          <list name="mpls-interface">
            <key value="name"/>
            <description>
              <text>Configure MPLS on an interface. Query, modify, create, or delete the MPLS capability on an interface.</text>
            </description>
            <leaf name="name">
              <type name="leafref">
                <path value="/ifm:ifm/ifm:interfaces/ifm:interface/ifm:name"/>
              </type>
              <must condition="/ifm:ifm/ifm:interfaces/ifm:interface[ifm:name=current()]/ifm:vrf-name=../../../../../ni:name"/>
              <description>
                <text>Specifies an l3vpn vrf name.</text>
              </description>
            </leaf>
            <leaf name="mtu-value">
              <type name="uint32">
                <range value="0..64000"/>
              </type>
              <units name="s"/>
              <description>
                <text>MTU of an MPLS interface. Note: An MTU is the maximum size of a packet that can be sent without being fragmented. The value range of MTU is controlled by the PAF.</text>
              </description>
            </leaf>
            <leaf name="ldp-enable">
              <type name="boolean"/>
              <default value="false"/>
              <config value="false"/>
              <description>
                <text>Enables LDP on interfaces.</text>
              </description>
            </leaf>
            <leaf name="te-enable">
              <type name="boolean"/>
              <default value="false"/>
              <config value="false"/>
              <description>
                <text>MPLS TE capability on an interface.</text>
              </description>
            </leaf>
            <leaf name="rsvp-te-enable">
              <type name="boolean"/>
              <default value="false"/>
              <config value="false"/>
              <description>
                <text>MPLS RSVP TE capability on an interface.</text>
              </description>
            </leaf>
            <container name="statistics">
              <config value="false"/>
              <description>
                <text>Statistics of MPLS interface informations.</text>
              </description>
              <leaf name="fragmented-packet-count">
                <type name="uint32">
                  <range value="0..4294967295"/>
                </type>
                <description>
                  <text>This object counts the number of outgoing MPLS packets that required fragmentation before transmission on this interface. This object MUST count on a per-interface basis regardless of which label space the interface participates in. When the dual-stack statistics collection is enabled, value 0 is returned, indicating that no packet is fragmented on the interface. If the dual-stack statistics collection is disabled, the default value 0 is returned, which is meaningless.</text>
                </description>
              </leaf>
            </container>
          </list>
        </container>
      </container>
    </container>
  </augment>
</module>
