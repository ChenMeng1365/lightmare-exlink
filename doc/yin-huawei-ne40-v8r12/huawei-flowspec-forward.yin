<?xml version="1.0" encoding="UTF-8"?>
<module name="huawei-flowspec-forward"
        xmlns="urn:ietf:params:xml:ns:yang:yin:1"
        xmlns:flowspec-forward="urn:huawei:yang:huawei-flowspec-forward"
        xmlns:ifm="urn:huawei:yang:huawei-ifm"
        xmlns:devm="urn:huawei:yang:huawei-devm"
        xmlns:ext="urn:huawei:yang:huawei-extension"
        xmlns:inet="urn:ietf:params:xml:ns:yang:ietf-inet-types">
  <namespace uri="urn:huawei:yang:huawei-flowspec-forward"/>
  <prefix value="flowspec-forward"/>
  <import module="huawei-ifm">
    <prefix value="ifm"/>
  </import>
  <import module="huawei-devm">
    <prefix value="devm"/>
  </import>
  <import module="huawei-extension">
    <prefix value="ext"/>
  </import>
  <import module="ietf-inet-types">
    <prefix value="inet"/>
  </import>
  <organization>
    <text>Huawei Technologies Co., Ltd.</text>
  </organization>
  <contact>
    <text>Huawei Industrial Base
Bantian, Longgang
Shenzhen 518129
People's Republic of China
Website: http://www.huawei.com
Email: support@huawei.com</text>
  </contact>
  <description>
    <text>Flowspec-forward.</text>
  </description>
  <revision date="2020-03-12">
    <description>
      <text>Descriptive optimization.</text>
    </description>
    <reference>
      <text>Huawei private.</text>
    </reference>
  </revision>
  <revision date="2020-02-25">
    <description>
      <text>The modifications in the schema file are synchronized to the YANG file.</text>
    </description>
    <reference>
      <text>Huawei private.</text>
    </reference>
  </revision>
  <revision date="2019-12-31">
    <description>
      <text>The modifications in the schema file are synchronized to the YANG file.</text>
    </description>
    <reference>
      <text>Huawei private.</text>
    </reference>
  </revision>
  <revision date="2019-11-18">
    <description>
      <text>The modifications in the schema file are synchronized to the YANG file.</text>
    </description>
    <reference>
      <text>Huawei private.</text>
    </reference>
  </revision>
  <revision date="2019-10-24">
    <description>
      <text>The modifications in the schema file are synchronized to the YANG file.</text>
    </description>
    <reference>
      <text>Huawei private.</text>
    </reference>
  </revision>
  <revision date="2019-04-20">
    <description>
      <text>Initial revision.</text>
    </description>
    <reference>
      <text>Huawei private.</text>
    </reference>
  </revision>
  <ext:task-name value="qos"/>
  <container name="flowspec-forward">
    <description>
      <text>Configure flowspec forward.</text>
    </description>
    <leaf name="statistic-enable">
      <type name="boolean"/>
      <default value="false"/>
      <description>
        <text>Enable/disable flowspec statistic.</text>
      </description>
    </leaf>
    <leaf name="vxlan-packet-enable">
      <type name="boolean"/>
      <default value="false"/>
      <description>
        <text>Enable/disable flowspec only for the vxlan packet.</text>
      </description>
    </leaf>
    <leaf name="match-ip-layer">
      <type name="boolean"/>
      <default value="false"/>
      <description>
        <text>Enable/disable flowspec only for the IP layer.</text>
      </description>
    </leaf>
    <container name="protocol-protect-disables">
      <description>
        <text>List of flowspec protocol-protect disable.</text>
      </description>
      <list name="protocol-protect-disable">
        <key value="flow-type"/>
        <description>
          <text>Configure protocol-protect disable instance.</text>
        </description>
        <leaf name="flow-type">
          <type name="enumeration">
            <enum name="ipv4">
              <value value="0"/>
              <description>
                <text>Protocol-protect disable IPv4.</text>
              </description>
            </enum>
            <enum name="ipv6">
              <value value="1"/>
              <description>
                <text>Protocol-protect disable IPv6.</text>
              </description>
            </enum>
          </type>
          <description>
            <text>BGP protocol-protect disable flowtype, The value all is mutually exclusive with IPv4 and IPv6.</text>
          </description>
        </leaf>
      </list>
    </container>
    <container name="flowspec-rules">
      <config value="false"/>
      <description>
        <text>List of flowspec rule.</text>
      </description>
      <list name="flowspec-rule">
        <key value="slot-id flow-route-index index"/>
        <description>
          <text>Operational data of flowspec rule.</text>
        </description>
        <leaf name="slot-id">
          <type name="string">
            <length value="1..16"/>
            <pattern value="(c[cl]c\d+/)?\d+"/>
          </type>
          <description>
            <text>Slot ID.</text>
          </description>
        </leaf>
        <leaf name="flow-route-index">
          <type name="uint32">
            <range value="1..4294967295"/>
          </type>
          <description>
            <text>Specify the flow-route Index.</text>
          </description>
        </leaf>
        <leaf name="index">
          <type name="uint32">
            <range value="1..4294967295"/>
          </type>
          <description>
            <text>Logical index of combination rule.</text>
          </description>
        </leaf>
        <leaf name="source-ip">
          <type name="inet:ipv4-address-no-zone"/>
          <description>
            <text>Source IPv4 address.</text>
          </description>
        </leaf>
        <leaf name="source-ip-prefix">
          <type name="inet:ipv4-prefix"/>
          <description>
            <text>Source IPv4 prefix length.</text>
          </description>
        </leaf>
        <leaf name="destination-ip">
          <type name="inet:ipv4-address-no-zone"/>
          <description>
            <text>Destination IPv4 address.</text>
          </description>
        </leaf>
        <leaf name="destination-ip-prefix">
          <type name="inet:ipv4-prefix"/>
          <description>
            <text>Destination IPv4 prefix length.</text>
          </description>
        </leaf>
        <leaf name="protocol">
          <type name="uint16"/>
          <description>
            <text>Protocol number.</text>
          </description>
        </leaf>
        <leaf name="source-port">
          <type name="uint16"/>
          <description>
            <text>Source port.</text>
          </description>
        </leaf>
        <leaf name="destination-port">
          <type name="uint16"/>
          <description>
            <text>Destination port.</text>
          </description>
        </leaf>
        <leaf name="fragment-flag">
          <type name="uint8"/>
          <description>
            <text>Fragment flag: 0 indicates the non-fragment; 1 indicates the fragment; 2 indicates fragmentation is ignored.</text>
          </description>
        </leaf>
        <leaf name="first-fragment-flag">
          <type name="uint8"/>
          <description>
            <text>First fragment flag: 0 indicates the non-start fragment; 1 indicates the start fragment; 2 indicates whether the first fragment is received is ignored.</text>
          </description>
        </leaf>
        <leaf name="tcp-flag">
          <type name="uint8"/>
          <description>
            <text>Flag of a TCP header.</text>
          </description>
        </leaf>
        <leaf name="dscp">
          <type name="uint8"/>
          <description>
            <text>Identifier of packet priority.</text>
          </description>
        </leaf>
        <leaf name="icmp-type">
          <type name="uint8"/>
          <description>
            <text>ICMP type.</text>
          </description>
        </leaf>
        <leaf name="icmp-code">
          <type name="uint8"/>
          <description>
            <text>ICMP code.</text>
          </description>
        </leaf>
        <leaf name="as">
          <type name="uint8">
            <range value="1..63"/>
          </type>
          <description>
            <text>Number to which an AS number is mapped.</text>
          </description>
        </leaf>
      </list>
    </container>
    <container name="flowspec-ipv6-rules">
      <config value="false"/>
      <description>
        <text>List of flowspec IPv6 rule.</text>
      </description>
      <list name="flowspec-ipv6-rule">
        <key value="slot-id flow-route-index index"/>
        <description>
          <text>Operational data of flowspec IPv6 rule.</text>
        </description>
        <leaf name="slot-id">
          <type name="string">
            <length value="1..16"/>
            <pattern value="(c[cl]c\d+/)?\d+"/>
          </type>
          <description>
            <text>Slot ID.</text>
          </description>
        </leaf>
        <leaf name="flow-route-index">
          <type name="uint32">
            <range value="1..4294967295"/>
          </type>
          <description>
            <text>Specify the flow-route Index.</text>
          </description>
        </leaf>
        <leaf name="index">
          <type name="uint32">
            <range value="1..4294967295"/>
          </type>
          <description>
            <text>Logical index of combination rule.</text>
          </description>
        </leaf>
        <leaf name="source-ip">
          <type name="inet:ipv6-address-no-zone"/>
          <description>
            <text>Source IPv6 address.</text>
          </description>
        </leaf>
        <leaf name="source-ip-prefix">
          <type name="inet:ipv6-prefix"/>
          <description>
            <text>Source IPv6 prefix length.</text>
          </description>
        </leaf>
        <leaf name="destination-ip">
          <type name="inet:ipv6-address-no-zone"/>
          <description>
            <text>Destination IPv6 address.</text>
          </description>
        </leaf>
        <leaf name="destination-ip-prefix">
          <type name="inet:ipv6-prefix"/>
          <description>
            <text>Destination IPv6 prefix length.</text>
          </description>
        </leaf>
        <leaf name="protocol">
          <type name="uint16"/>
          <description>
            <text>Protocol number.</text>
          </description>
        </leaf>
        <leaf name="source-port">
          <type name="uint16"/>
          <description>
            <text>Source port.</text>
          </description>
        </leaf>
        <leaf name="destination-port">
          <type name="uint16"/>
          <description>
            <text>Destination port.</text>
          </description>
        </leaf>
        <leaf name="fragment-flag">
          <type name="uint8"/>
          <description>
            <text>Fragment flag: 0 indicates the non-fragment; 1 indicates the fragment; 2 indicates fragmentation is ignored.</text>
          </description>
        </leaf>
        <leaf name="first-fragment-flag">
          <type name="uint8"/>
          <description>
            <text>First fragment flag: 0 indicates the non-start fragment; 1 indicates the start fragment; 2 indicates whether the first fragment is received is ignored.</text>
          </description>
        </leaf>
        <leaf name="tcp-flag">
          <type name="uint8"/>
          <description>
            <text>Flag of a TCP header.</text>
          </description>
        </leaf>
        <leaf name="dscp">
          <type name="uint8"/>
          <description>
            <text>Identifier of packet priority.</text>
          </description>
        </leaf>
        <leaf name="icmp-type">
          <type name="uint8"/>
          <description>
            <text>ICMP type.</text>
          </description>
        </leaf>
        <leaf name="icmp-code">
          <type name="uint8"/>
          <description>
            <text>ICMP code.</text>
          </description>
        </leaf>
      </list>
    </container>
    <container name="flowspec-rule-statisticss">
      <config value="false"/>
      <description>
        <text>List of flowspec rule statistics.</text>
      </description>
      <list name="flowspec-rule-statistics">
        <key value="slot-id protocol"/>
        <description>
          <text>Flowspec rule statistics.</text>
        </description>
        <leaf name="slot-id">
          <type name="string">
            <length value="1..16"/>
            <pattern value="(c[cl]c\d+/)?\d+"/>
          </type>
          <description>
            <text>Slot ID.</text>
          </description>
        </leaf>
        <leaf name="protocol">
          <type name="inet:ip-version"/>
          <description>
            <text>Ip family type.</text>
          </description>
        </leaf>
        <leaf name="rule-numbers">
          <type name="uint32"/>
          <description>
            <text>Rule numbers.</text>
          </description>
        </leaf>
      </list>
    </container>
  </container>
  <augment target-node="/ifm:ifm/ifm:interfaces/ifm:interface">
    <description>
      <text>Flowspec forward.</text>
    </description>
    <container name="flowspec-forward">
      <description>
        <text>Configure flowspec forward.</text>
      </description>
      <container name="refluence">
        <presence value="create flowspec refluence"/>
        <description>
          <text>Enable/disable flowspec refluence.</text>
        </description>
      </container>
      <container name="tunnel-pop">
        <presence value="create tunnel-pop"/>
        <description>
          <text>Enable/disable flowspec after tunnel pop.</text>
        </description>
      </container>
      <container name="disables">
        <when condition="not(../refluence) and ../../ifm:class='main-interface'"/>
        <description>
          <text>List of flowspec disables.</text>
        </description>
        <list name="disable">
          <must condition="(./flow-type='all' and not(../disable[flow-type='ipv4']) and not(../disable[flow-type='ipv6'])) or (./flow-type!='all' and not(../disable[flow-type='all']))"/>
          <key value="flow-type"/>
          <description>
            <text>Configure flowspec disable instance.</text>
          </description>
          <leaf name="flow-type">
            <type name="enumeration">
              <enum name="all">
                <value value="0"/>
                <description>
                  <text>Flowspec disable.</text>
                </description>
              </enum>
              <enum name="ipv4">
                <value value="1"/>
                <description>
                  <text>Flowspec disable IPv4.</text>
                </description>
              </enum>
              <enum name="ipv6">
                <value value="2"/>
                <description>
                  <text>Flowspec disable IPv6.</text>
                </description>
              </enum>
            </type>
            <description>
              <text>BGP flowspec disable flowtype, The value all is mutually exclusive with IPv4 and IPv6.</text>
            </description>
          </leaf>
        </list>
      </container>
    </container>
  </augment>
  <augment target-node="/devm:devm/devm:lpu-boards/devm:lpu-board">
    <description>
      <text>Flowspec forward.</text>
    </description>
    <container name="flowspec-forward">
      <description>
        <text>Configure flowspec forward.</text>
      </description>
      <container name="ipv6-flowspec-enable">
        <presence value="ipv6-flowspec-enable"/>
        <description>
          <text>Enable/disable IPv6-flowspec.</text>
        </description>
      </container>
    </container>
  </augment>
</module>
