<?xml version="1.0" encoding="UTF-8"?>
<module name="huawei-flexe"
        xmlns="urn:ietf:params:xml:ns:yang:yin:1"
        xmlns:flexe="urn:huawei:yang:huawei-flexe"
        xmlns:devm="urn:huawei:yang:huawei-devm"
        xmlns:ext="urn:huawei:yang:huawei-extension">
  <yang-version value="1"/>
  <namespace uri="urn:huawei:yang:huawei-flexe"/>
  <prefix value="flexe"/>
  <import module="huawei-devm">
    <prefix value="devm"/>
  </import>
  <import module="huawei-extension">
    <prefix value="ext"/>
  </import>
  <organization>
    <text>Huawei Technologies Co., Ltd.</text>
  </organization>
  <contact>
    <text>Huawei Industrial Base
Bantian, Longgang
Shenzhen 518129
People's Republic of China
Website: http://www.huawei.com
Email: support@huawei.com</text>
  </contact>
  <description>
    <text>Global Configuration.</text>
  </description>
  <revision date="2020-02-18">
    <description>
      <text>Initial revision.</text>
    </description>
    <reference>
      <text>Huawei private.</text>
    </reference>
  </revision>
  <typedef name="flexe-sub-ts-granula-type">
    <type name="enumeration">
      <enum name="1G">
        <value value="1"/>
        <description>
          <text>Sub-timeslot granularity 1G.</text>
        </description>
      </enum>
      <enum name="1.25G">
        <value value="2"/>
        <description>
          <text>Sub-timeslot granularity 1.25G.</text>
        </description>
      </enum>
      <enum name="5G">
        <value value="0"/>
        <description>
          <text>Sub-timeslot granularity 5G.</text>
        </description>
      </enum>
    </type>
    <description>
      <text>Sub-timeslot granularity.</text>
    </description>
  </typedef>
  <container name="flexe">
    <description>
      <text>Specify FlexE configuration information.</text>
    </description>
    <container name="card-attributes">
      <description>
        <text>List of FlexE system configs.</text>
      </description>
      <list name="card-attribute">
        <ext:generated-by value="system"/>
        <ext:operation-exclude value="create"/>
        <key value="card-position"/>
        <description>
          <text>Configure FlexE system config.</text>
        </description>
        <leaf name="card-position">
          <type name="string">
            <length value="1..16"/>
          </type>
          <description>
            <text>Card position. The position is expressed in the format of slotID/cardID. For example, 1/0. Here 1/0 is an example. The value may vary with devices.</text>
          </description>
        </leaf>
        <leaf name="config-mode">
          <type name="enumeration">
            <enum name="bandwidth">
              <value value="0"/>
              <description>
                <text>Bandwidth mode.</text>
              </description>
            </enum>
            <enum name="timeslot">
              <value value="1"/>
              <description>
                <text>Timeslot mode.</text>
              </description>
            </enum>
          </type>
          <default value="bandwidth"/>
          <description>
            <text>Config mode.</text>
          </description>
        </leaf>
        <leaf name="sub-timeslot-granula">
          <type name="flexe-sub-ts-granula-type"/>
          <default value="5G"/>
          <description>
            <text>Setting sub-timeslot granularity.</text>
          </description>
        </leaf>
      </list>
    </container>
    <container name="groups">
      <description>
        <text>List of FlexE groups.</text>
      </description>
      <list name="group">
        <key value="index"/>
        <description>
          <text>Configure FlexE group.</text>
        </description>
        <leaf name="index">
          <type name="uint32">
            <range value="1..2147483647"/>
          </type>
          <description>
            <text>FlexE group index.</text>
          </description>
        </leaf>
        <leaf name="number">
          <type name="uint32">
            <range value="1..1048574"/>
          </type>
          <description>
            <text>FlexE group communication ID.</text>
          </description>
        </leaf>
        <leaf name="padding-enable">
          <type name="boolean"/>
          <default value="false"/>
          <description>
            <text>Enable/disable automatic overhead frame padding.</text>
          </description>
        </leaf>
        <leaf name="timeslot-negotiation-enable">
          <type name="boolean"/>
          <default value="true"/>
          <description>
            <text>Enable/disable timeslot negotiation mode.</text>
          </description>
        </leaf>
        <leaf name="total-bandwidth">
          <type name="string">
            <length value="1..9"/>
          </type>
          <config value="false"/>
          <description>
            <text>FlexE group total bandwidth.</text>
          </description>
        </leaf>
        <leaf name="left-bandwidth">
          <type name="string">
            <length value="1..9"/>
          </type>
          <config value="false"/>
          <description>
            <text>FlexE group left bandwidth.</text>
          </description>
        </leaf>
        <container name="physical-ports">
          <description>
            <text>List of physical port information in group.</text>
          </description>
          <list name="physical-port">
            <key value="port-position"/>
            <description>
              <text>Configure physical port information.</text>
            </description>
            <leaf name="port-position">
              <type name="string">
                <length value="1..50"/>
              </type>
              <description>
                <text>Physical port location. The position is expressed in the format of slotID/cardID/portID. For example, 1/0/1. Here 1/0/1 is an example. The value may vary with devices.</text>
              </description>
            </leaf>
          </list>
        </container>
      </list>
    </container>
    <container name="physical-ports">
      <description>
        <text>List of physical port information.</text>
      </description>
      <list name="physical-port">
        <ext:generated-by value="system"/>
        <ext:operation-exclude value="create"/>
        <key value="position"/>
        <description>
          <text>Configure physical port information.</text>
        </description>
        <leaf name="position">
          <type name="leafref">
            <path value="/devm:devm/devm:ports/devm:port/devm:position"/>
          </type>
          <description>
            <text>Port position. The position is expressed in the format of slotID/cardID/portID. For example, 1/0/1. Here 1/0/1 is an example. The value may vary with devices.</text>
          </description>
        </leaf>
        <leaf name="mode-enable">
          <type name="boolean"/>
          <default value="false"/>
          <description>
            <text>Enable/disable FlexE mode.</text>
          </description>
        </leaf>
        <container name="physical-attribute">
          <ext:operation-exclude value="create"/>
          <when condition="../mode-enable='true'"/>
          <description>
            <text>Configure FlexE physical interface information.</text>
          </description>
          <leaf name="number">
            <type name="uint32">
              <range value="1..254"/>
            </type>
            <description>
              <text>Number of a FlexE physical port. The phynumber of a 100G port is an integer ranging from 1 to 254. The phynumber of a 50G port is an integer ranging from 1 to 126. The phynumber of a 400G port is an integer ranging from 1 to 63.</text>
            </description>
          </leaf>
          <leaf name="dcn-auto-nego-enable">
            <ext:dynamic-default/>
            <type name="boolean"/>
            <description>
              <text>Enable/disable DCN auto-negotiation mode.</text>
            </description>
          </leaf>
          <leaf name="mng-channel-mode">
            <type name="enumeration">
              <enum name="union">
                <value value="0"/>
                <description>
                  <text>Union mode.</text>
                </description>
              </enum>
              <enum name="section">
                <value value="1"/>
                <description>
                  <text>Section mode.</text>
                </description>
              </enum>
              <enum name="shim2shim">
                <value value="2"/>
                <description>
                  <text>Shim to shim mode.</text>
                </description>
              </enum>
              <enum name="shim2shimop2">
                <value value="3"/>
                <description>
                  <text>Shim to shim option2 mode.</text>
                </description>
              </enum>
            </type>
            <default value="union"/>
            <description>
              <text>Management channel mode.</text>
            </description>
          </leaf>
          <leaf name="number-to-receive">
            <type name="uint32">
              <range value="1..254"/>
            </type>
            <config value="false"/>
            <description>
              <text>Number received by a FlexE physical port.</text>
            </description>
          </leaf>
          <leaf name="padding-enable">
            <type name="boolean"/>
            <config value="false"/>
            <description>
              <text>Enable/disable automatic overhead frame padding.</text>
            </description>
          </leaf>
          <leaf name="idle-timeslot">
            <type name="string">
              <length value="1..199"/>
            </type>
            <config value="false"/>
            <description>
              <text>Idle timeslot.</text>
            </description>
          </leaf>
          <leaf name="idle-sub-timeslot">
            <type name="string">
              <length value="1..499"/>
            </type>
            <config value="false"/>
            <description>
              <text>Idle sub-timeslot.</text>
            </description>
          </leaf>
          <leaf name="used-timeslot">
            <type name="string">
              <length value="1..199"/>
            </type>
            <config value="false"/>
            <description>
              <text>Big timeslots that have been used up.</text>
            </description>
          </leaf>
          <leaf name="used-sub-timeslot">
            <type name="string">
              <length value="1..499"/>
            </type>
            <config value="false"/>
            <description>
              <text>Sub-timeslots have been used.</text>
            </description>
          </leaf>
          <leaf name="sub-timeslot-scope">
            <type name="string">
              <length value="1..9"/>
            </type>
            <config value="false"/>
            <description>
              <text>Configurable sub-timeslot range.</text>
            </description>
          </leaf>
          <leaf name="physical-mode">
            <type name="enumeration">
              <enum name="flexe">
                <value value="0"/>
                <description>
                  <text>Flexe mode.</text>
                </description>
              </enum>
              <enum name="ethernet">
                <value value="1"/>
                <description>
                  <text>Ethernet mode.</text>
                </description>
              </enum>
            </type>
            <config value="false"/>
            <description>
              <text>Bottom layer working mode of a FlexE physical port.</text>
            </description>
          </leaf>
        </container>
        <container name="flexe-relations">
          <config value="false"/>
          <description>
            <text>List of timeslot information of FlexE port.</text>
          </description>
          <list name="flexe-relation">
            <key value="port-name"/>
            <config value="false"/>
            <description>
              <text>Statistics of timeslot information of a FlexE port.</text>
            </description>
            <leaf name="port-name">
              <type name="string">
                <length value="1..32"/>
              </type>
              <description>
                <text>FlexE port name.</text>
              </description>
            </leaf>
            <leaf name="binding-timeslot">
              <type name="string">
                <length value="1..199"/>
              </type>
              <description>
                <text>Timeslot information bound to a FlexE port.</text>
              </description>
            </leaf>
          </list>
        </container>
      </list>
    </container>
    <container name="clients">
      <description>
        <text>List of FlexE client information.</text>
      </description>
      <list name="client">
        <key value="index group-index business-type port-id"/>
        <description>
          <text>Configure FlexE client information.</text>
        </description>
        <leaf name="index">
          <type name="uint32">
            <range value="1..2147483647"/>
          </type>
          <description>
            <text>FlexE client index.</text>
          </description>
        </leaf>
        <leaf name="group-index">
          <type name="leafref">
            <path value="/flexe:flexe/flexe:groups/flexe:group/flexe:index"/>
          </type>
          <description>
            <text>FlexE group index configured for a client.</text>
          </description>
        </leaf>
        <leaf name="business-type">
          <type name="enumeration">
            <enum name="cross">
              <value value="0"/>
              <description>
                <text>Only the fragmented Ethernet cross-connect service is supported.</text>
              </description>
            </enum>
            <enum name="full-function">
              <value value="1"/>
              <description>
                <text>The packet transmission and fragmented Ethernet cross-connect services are supported.</text>
              </description>
            </enum>
          </type>
          <description>
            <text>Type of services carried on a client.</text>
          </description>
        </leaf>
        <leaf name="port-id">
          <type name="uint32">
            <range value="0..65535"/>
          </type>
          <description>
            <text>FlexE port ID.</text>
          </description>
        </leaf>
        <leaf name="id">
          <type name="uint32">
            <range value="1..65534"/>
          </type>
          <description>
            <text>Client ID.</text>
          </description>
        </leaf>
        <leaf name="min-avail-bandwidth">
          <type name="uint32">
            <range value="1..100"/>
          </type>
          <units name="%"/>
          <description>
            <text>Percentage of the minimum available bandwidth of a FlexE client against the configured bandwidth.</text>
          </description>
        </leaf>
        <leaf name="port-name">
          <type name="string">
            <length value="1..50"/>
          </type>
          <config value="false"/>
          <description>
            <text>Interface name of a FlexE client.</text>
          </description>
        </leaf>
        <leaf name="bandwidth-value">
          <type name="string">
            <length value="1..10"/>
          </type>
          <config value="false"/>
          <description>
            <text>Actual bandwidth value.</text>
          </description>
        </leaf>
        <choice name="binding-type">
          <description>
            <text>Binding bandwidth or relation.</text>
          </description>
          <case name="bandwidth">
            <description>
              <text>Binding bandwidth.</text>
            </description>
            <container name="binding-bandwidth">
              <description>
                <text>Configure bandwith configuration.</text>
              </description>
              <leaf name="bandwidth">
                <type name="string">
                  <length value="1..10"/>
                </type>
                <description>
                  <text>Bandwidth.</text>
                </description>
              </leaf>
            </container>
          </case>
          <case name="timeslots">
            <description>
              <text>Binding timeslots.</text>
            </description>
            <container name="binding-timeslots">
              <description>
                <text>List of binding timeslots.</text>
              </description>
              <list name="binding-timeslot">
                <key value="physical-port-name"/>
                <description>
                  <text>Configure binding timeslots.</text>
                </description>
                <leaf name="physical-port-name">
                  <type name="string">
                    <length value="1..50"/>
                  </type>
                  <description>
                    <text>FlexE physical port name. The name is expressed in the format of slotID/cardID/portID. For example, 1/0/1. Here 1/0/1 is an example. The value may vary with devices.</text>
                  </description>
                </leaf>
                <choice name="binding-timeslot">
                  <mandatory value="true"/>
                  <description>
                    <text>Binding big time slot or sub time slot.</text>
                  </description>
                  <case name="big-timeslot">
                    <description>
                      <text>Binding big-timeslot.</text>
                    </description>
                    <leaf name="timeslot">
                      <type name="string">
                        <length value="1..199"/>
                      </type>
                      <description>
                        <text>Set timeslot. The value is one or more numbers separated by commas (,) or hyphens (-).</text>
                      </description>
                    </leaf>
                  </case>
                  <case name="sub-timeslot">
                    <description>
                      <text>Binding sub-timeslot.</text>
                    </description>
                    <leaf name="big-timeslot">
                      <type name="uint32">
                        <range value="0..199"/>
                      </type>
                      <mandatory value="true"/>
                      <description>
                        <text>Set big timeslot.</text>
                      </description>
                    </leaf>
                    <leaf name="sub-timeslot">
                      <type name="string">
                        <length value="1..9"/>
                      </type>
                      <mandatory value="true"/>
                      <description>
                        <text>Set sub-timeslot. The value is one or more numbers separated by commas (,) or hyphens (-).</text>
                      </description>
                    </leaf>
                    <leaf name="sub-timeslot-scope">
                      <type name="string">
                        <length value="1..9"/>
                      </type>
                      <config value="false"/>
                      <description>
                        <text>Configurable sub-timeslot range.</text>
                      </description>
                    </leaf>
                  </case>
                </choice>
              </list>
            </container>
          </case>
        </choice>
      </list>
    </container>
  </container>
  <rpc name="phy-mode-switch">
    <ext:node-ref value="/flexe/physical-ports/physical-port"/>
    <description>
      <text>Physical Mode Switchover.</text>
    </description>
    <input>
      <leaf name="position">
        <type name="string">
          <length value="1..32"/>
        </type>
        <mandatory value="true"/>
        <description>
          <text>Port position. The position is expressed in the format of slotID/cardID/portID. For example, 1/0/1. Here 1/0/1 is an example. The value may vary with devices.</text>
        </description>
      </leaf>
      <leaf name="phy-mode">
        <type name="enumeration">
          <enum name="flexe">
            <value value="0"/>
            <description>
              <text>Flexe mode.</text>
            </description>
          </enum>
          <enum name="ethernet">
            <value value="1"/>
            <description>
              <text>Ethernet mode.</text>
            </description>
          </enum>
        </type>
        <must condition="((../phy-mode='ethernet') and (not(/flexe:flexe/flexe:physical-ports/flexe:physical-port/flexe:physical-attribute/flexe:dcn-auto-nego-enable))) or (../phy-mode='flexe')"/>
        <description>
          <text>Bottom layer working mode of a FlexE physical port.</text>
        </description>
      </leaf>
    </input>
  </rpc>
  <ext:task-name value="device-mgr"/>
</module>
