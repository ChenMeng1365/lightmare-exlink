<?xml version="1.0" encoding="UTF-8"?>
<module name="huawei-bras-ipv6-basic-access"
        xmlns="urn:ietf:params:xml:ns:yang:yin:1"
        xmlns:bras-ipv6-basic-access="urn:huawei:yang:huawei-bras-ipv6-basic-access"
        xmlns:ifm="urn:huawei:yang:huawei-ifm"
        xmlns:aaa="urn:huawei:yang:huawei-aaa"
        xmlns:ext="urn:huawei:yang:huawei-extension"
        xmlns:bras-basic-access="urn:huawei:yang:huawei-bras-basic-access"
        xmlns:bras-ipv6-address-manage="urn:huawei:yang:huawei-bras-ipv6-address-manage">
  <namespace uri="urn:huawei:yang:huawei-bras-ipv6-basic-access"/>
  <prefix value="bras-ipv6-basic-access"/>
  <import module="huawei-ifm">
    <prefix value="ifm"/>
  </import>
  <import module="huawei-aaa">
    <prefix value="aaa"/>
  </import>
  <import module="huawei-extension">
    <prefix value="ext"/>
  </import>
  <import module="huawei-bras-basic-access">
    <prefix value="bras-basic-access"/>
  </import>
  <import module="huawei-bras-ipv6-address-manage">
    <prefix value="bras-ipv6-address-manage"/>
  </import>
  <organization>
    <text>Huawei Technologies Co., Ltd.</text>
  </organization>
  <contact>
    <text>Huawei Industrial Base
Bantian, Longgang
Shenzhen 518129
People's Republic of China
Website: http://www.huawei.com
Email: support@huawei.com</text>
  </contact>
  <description>
    <text>Bras IPv6 basic access.</text>
  </description>
  <revision date="2020-03-03">
    <description>
      <text>Modify description.</text>
    </description>
    <reference>
      <text>Huawei private.</text>
    </reference>
  </revision>
  <revision date="2019-03-26">
    <description>
      <text>Init revision.</text>
    </description>
    <reference>
      <text>Huawei private.</text>
    </reference>
  </revision>
  <ext:task-name value="bras-control"/>
  <typedef name="bras-ipv6-basic-access-accounting-mode">
    <type name="enumeration">
      <enum name="separate">
        <value value="1"/>
        <description>
          <text>Indicates that traffic of IPv4 and IPv6 users is sent to the server separately and then accounted separately.</text>
        </description>
      </enum>
      <enum name="identical">
        <value value="2"/>
        <description>
          <text>Indicates that traffic of IPv4 and IPv6 users is sent to the server together and then accounted together.</text>
        </description>
      </enum>
    </type>
    <description>
      <text>Accounting mode for IPv4/IPv6 dual-stack users.</text>
    </description>
  </typedef>
  <grouping name="client-option38-group">
    <description>
      <text>The grouping enables the NE40E to trust the information in the Option 38 field of DHCPv6 messages sent by the client.</text>
    </description>
    <container name="client-option38">
      <description>
        <text>Configure the NE40E to trust the information in the Option 38 field of DHCPv6 messages sent by the client.</text>
      </description>
      <leaf name="enable">
        <type name="boolean"/>
        <default value="false"/>
        <description>
          <text>Enable/disable the NE40E to trust the information in the Option 38 field of DHCPv6 messages sent by the client.</text>
        </description>
      </leaf>
      <leaf name="basinfo-insert-mac">
        <type name="boolean"/>
        <must condition="not(../enable='false' and ../basinfo-insert-mac='true')"/>
        <default value="false"/>
        <description>
          <text>Enable/disable insertion of BAS interface information into the Option 38 field of DHCPv6 messages sent by the client.</text>
        </description>
      </leaf>
    </container>
  </grouping>
  <grouping name="nd-proxy-group">
    <description>
      <text>The grouping enables or disable proxy ND on a BAS interface.</text>
    </description>
    <container name="nd-proxy">
      <description>
        <text>Configure proxy ND on a BAS interface.</text>
      </description>
      <leaf name="enable">
        <type name="boolean"/>
        <default value="false"/>
        <description>
          <text>Enable/disable proxy ND on a BAS interface.</text>
        </description>
      </leaf>
    </container>
  </grouping>
  <augment target-node="/aaa:aaa/aaa:domains/aaa:domain/bras-basic-access:bas">
    <description>
      <text>Bras domain configuration.</text>
    </description>
    <container name="ipv6-basic-access">
      <description>
        <text>Configure the IPv6 basic access domain.</text>
      </description>
      <container name="dual-stack-accounting">
        <description>
          <text>Configure the accounting mode for IPv4/IPv6 dual-stack users.</text>
        </description>
        <leaf name="mode">
          <type name="bras-ipv6-basic-access-accounting-mode"/>
          <default value="separate"/>
          <description>
            <text>Configures the accounting mode for IPv4/IPv6 dual-stack users.</text>
          </description>
        </leaf>
      </container>
      <container name="ipv6-pools">
        <description>
          <text>List of IPv6 address pool in an AAA domain.</text>
        </description>
        <list name="ipv6-pool">
          <key value="name"/>
          <max-elements value="1024"/>
          <description>
            <text>Configure an IPv6 address pool to an AAA domain.</text>
          </description>
          <leaf name="name">
            <type name="leafref">
              <path value="/bras-ipv6-address-manage:bras-ipv6-address-manage/bras-ipv6-address-manage:ipv6-pools/bras-ipv6-address-manage:ipv6-pool/bras-ipv6-address-manage:name"/>
            </type>
            <must condition="/bras-ipv6-address-manage:bras-ipv6-address-manage/bras-ipv6-address-manage:ipv6-pools/bras-ipv6-address-manage:ipv6-pool[bras-ipv6-address-manage:name=current()]/bras-ipv6-address-manage:type != 'relay'"/>
            <must condition="/bras-ipv6-address-manage:bras-ipv6-address-manage/bras-ipv6-address-manage:ipv6-pools/bras-ipv6-address-manage:ipv6-pool[bras-ipv6-address-manage:name=current()]/bras-ipv6-address-manage:local/bras-ipv6-address-manage:bind-prefix/bras-ipv6-address-manage:prefix-name or&#10;/bras-ipv6-address-manage:bras-ipv6-address-manage/bras-ipv6-address-manage:ipv6-pools/bras-ipv6-address-manage:ipv6-pool[bras-ipv6-address-manage:name=current()]/bras-ipv6-address-manage:delegation/bras-ipv6-address-manage:bind-prefix/bras-ipv6-address-manage:prefix-name or&#10;/bras-ipv6-address-manage:bras-ipv6-address-manage/bras-ipv6-address-manage:ipv6-pools/bras-ipv6-address-manage:ipv6-pool[bras-ipv6-address-manage:name=current()]/bras-ipv6-address-manage:remote/bras-ipv6-address-manage:bind-prefix/bras-ipv6-address-manage:prefix-name"/>
            <description>
              <text>Specifies the name of an IPv6 address pool.</text>
            </description>
          </leaf>
        </list>
      </container>
      <container name="prefix-assign-mode">
        <description>
          <text>Configure the IPv6 prefix allocation mode.</text>
        </description>
        <leaf name="unshared">
          <type name="boolean"/>
          <default value="false"/>
          <description>
            <text>Enable/disable the IPv6 prefix allocation mode to be the unshared mode. That is, IPv6 users do not share the same IP prefix. By default, the IP prefix allocation mode is the shared mode.</text>
          </description>
        </leaf>
      </container>
      <container name="nd-ra-assign-mode">
        <description>
          <text>Configure the NDRA or DHCPv6 allocation mode.</text>
        </description>
        <leaf name="mode">
          <type name="enumeration">
            <enum name="dhcpv6">
              <value value="0"/>
              <description>
                <text>Indicates that DHCPv6 is used to perform other configurations.</text>
              </description>
            </enum>
            <enum name="nd-ra">
              <value value="1"/>
              <description>
                <text>Indicates that NDRA is used to perform other configurations.</text>
              </description>
            </enum>
            <enum name="dhcpv6-enhance">
              <value value="2"/>
              <description>
                <text>Enable the DHCPv6 enhanced function, which encapes DNS information in the RA packet when DHCPv6 is used to perform other configuration.</text>
              </description>
            </enum>
          </type>
          <default value="dhcpv6"/>
          <description>
            <text>Enables a user to use either NDRA or DHCPv6 to perform other configurations when NDRA is used to allocate IPv6 addresses.</text>
          </description>
        </leaf>
      </container>
      <container name="pppox-assign-mode">
        <description>
          <text>Configure the pppox allocation mode.</text>
        </description>
        <leaf name="mode">
          <type name="enumeration">
            <enum name="dhcpv6-without-interface-id">
              <value value="0"/>
              <description>
                <text>Indicates that the interface ID negotiated not using IPv6CP is specified as the interface ID of the IPv6 address allocated by means of DHCPv6.</text>
              </description>
            </enum>
            <enum name="dhcpv6-with-interface-id">
              <value value="1"/>
              <description>
                <text>Indicates that the interface ID negotiated using IPv6CP is specified as the interface ID of the IPv6 address allocated by means of DHCPv6.</text>
              </description>
            </enum>
            <enum name="nd-ra-without-interface-id">
              <value value="2"/>
              <description>
                <text>NDRA is used as an IP address allocation mode for PPPoX users.</text>
              </description>
            </enum>
          </type>
          <default value="nd-ra-without-interface-id"/>
          <description>
            <text>Sets the IP address allocation mode to DHCPv6 for PPPoX users, and specifies the interface ID negotiated using IPv6CP as the interface ID of the IPv6 address allocated by means of DHCPv6.By default, NDRA is used as an IP address allocation mode for PPPoX users.</text>
          </description>
        </leaf>
      </container>
      <container name="ipv6-nd-ra-halt">
        <description>
          <text>Configure the IPv6 nd ra halt.</text>
        </description>
        <leaf name="enable">
          <type name="boolean"/>
          <default value="false"/>
          <description>
            <text>Enable/disable the halt flag.</text>
          </description>
        </leaf>
      </container>
      <container name="ipv6-nd-ra-unicast">
        <description>
          <text>Configure the IPv6 nd ra unicast.</text>
        </description>
        <leaf name="enable">
          <type name="boolean"/>
          <default value="false"/>
          <description>
            <text>Enable/disable the unicast flag.</text>
          </description>
        </leaf>
      </container>
      <container name="ipv6-usage-threshold">
        <must condition="not(upper) or not(lower) or upper &gt;= lower"/>
        <description>
          <text>Configure an alarm threshold for the IPv6 address usage.</text>
        </description>
        <leaf name="lower">
          <type name="uint8">
            <range value="0..99"/>
          </type>
          <units name="%"/>
          <description>
            <text>Specifies a lower alarm threshold for the IPv6 address usage.</text>
          </description>
        </leaf>
        <leaf name="upper">
          <type name="uint8">
            <range value="1..100"/>
          </type>
          <units name="%"/>
          <description>
            <text>Specifies an upper alarm threshold for the IPv6 address usage.</text>
          </description>
        </leaf>
      </container>
      <container name="ipoe-pd-address-release">
        <description>
          <text>Configure a PD address release policy for IPoE users. The configured PD address can be released separately.</text>
        </description>
        <leaf name="separate">
          <type name="boolean"/>
          <default value="false"/>
          <description>
            <text>Enable/disable the user to separate the PD stack function.</text>
          </description>
        </leaf>
      </container>
      <container name="ipv6-address-authorization">
        <description>
          <text>Configure the pre-authentication web domain authorizes IPv6 addresses for users.</text>
        </description>
        <leaf name="enable">
          <type name="boolean"/>
          <default value="true"/>
          <description>
            <text>Enable/disable the pre-authentication web domain authorizes IPv6 addresses for users.</text>
          </description>
        </leaf>
      </container>
    </container>
  </augment>
  <augment target-node="/ifm:ifm/ifm:interfaces/ifm:interface/bras-basic-access:bas/bras-basic-access:access-type/bras-basic-access:layer2-subscriber/bras-basic-access:layer2-subscriber">
    <description>
      <text>IPv6 basic access configuration of layer2 subscriber.</text>
    </description>
    <container name="authentication-method-ipv6">
      <must condition="bind-authentication or (dot1x-authentication or ppp-authentication or (fast-authentication or web-authentication))"/>
      <description>
        <text>Configure the authentication method on a BAS interface for IPv6 users.</text>
      </description>
      <choice name="authentication-method">
        <default value="unbind"/>
        <description>
          <text>Choice the authentication method on a BAS interface for IPv6 users.</text>
        </description>
        <case name="bind">
          <description>
            <text>Configures the bind authentication method on a BAS interface for IPv6 users.</text>
          </description>
          <leaf name="bind-authentication">
            <type name="empty"/>
            <description>
              <text>Indicates binding authentication.</text>
            </description>
          </leaf>
        </case>
        <case name="unbind">
          <description>
            <text>Configures the unbind authentication method on a BAS interface for IPv6 users.</text>
          </description>
          <leaf name="dot1x-authentication">
            <type name="empty"/>
            <description>
              <text>Indicates 802.1x authentication.</text>
            </description>
          </leaf>
          <leaf name="ppp-authentication">
            <type name="empty"/>
            <description>
              <text>Indicates PPP authentication (default authentication method).</text>
            </description>
          </leaf>
          <choice name="fast-web">
            <description>
              <text>Configures the fast or web authentication method on a BAS interface for IPv6 users.</text>
            </description>
            <case name="fast">
              <description>
                <text>Configures the fast authentication method on a BAS interface for IPv6 users.</text>
              </description>
              <leaf name="fast-authentication">
                <type name="empty"/>
                <description>
                  <text>Indicates fast authentication.</text>
                </description>
              </leaf>
            </case>
            <case name="web">
              <description>
                <text>Configures the web authentication method on a BAS interface for IPv6 users.</text>
              </description>
              <leaf name="web-authentication">
                <type name="empty"/>
                <description>
                  <text>Indicates web authentication.</text>
                </description>
              </leaf>
            </case>
          </choice>
        </case>
      </choice>
    </container>
    <container name="ipv6-nd-trigger">
      <description>
        <text>Configure packet trigger on the BAS interface.</text>
      </description>
      <leaf name="nd">
        <type name="boolean"/>
        <default value="false"/>
        <description>
          <text>Enable/disable nd packet trigger on the BAS interface.</text>
        </description>
      </leaf>
      <leaf name="ipv6">
        <type name="boolean"/>
        <default value="false"/>
        <description>
          <text>Enable/disable IPv6 packet trigger on the BAS interface.</text>
        </description>
      </leaf>
    </container>
    <uses name="client-option38-group"/>
    <uses name="nd-proxy-group"/>
  </augment>
</module>
