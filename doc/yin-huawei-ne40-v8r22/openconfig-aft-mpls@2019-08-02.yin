<?xml version="1.0" encoding="UTF-8"?>
<submodule name="openconfig-aft-mpls"
           xmlns="urn:ietf:params:xml:ns:yang:yin:1"
           xmlns:oc-aft="http://openconfig.net/yang/aft"
           xmlns:oc-ext="http://openconfig.net/yang/openconfig-ext"
           xmlns:oc-mplst="http://openconfig.net/yang/mpls-types">
  <belongs-to module="openconfig-aft">
    <prefix value="oc-aft"/>
  </belongs-to>
  <import module="openconfig-extensions">
    <prefix value="oc-ext"/>
  </import>
  <import module="openconfig-mpls-types">
    <prefix value="oc-mplst"/>
  </import>
  <include module="openconfig-aft-common"/>
  <organization>
    <text>OpenConfig working group</text>
  </organization>
  <contact>
    <text>OpenConfig working group
www.openconfig.net</text>
  </contact>
  <description>
    <text>Submodule containing definitions of groupings for the abstract
forwarding table for MPLS label forwarding.</text>
  </description>
  <oc-ext:openconfig-version semver="0.4.0"/>
  <revision date="2019-08-02">
    <description>
      <text>Add installing protocol for IPv[46] unicast entries.
Add the ability to describe conditional next-hop groups
outside of the policy forwarding module to allow for efficient
handling of CBTS, where many prefixes may share the same next-hop
criteria.</text>
    </description>
    <reference>
      <text>0.4.0</text>
    </reference>
  </revision>
  <revision date="2019-08-01">
    <description>
      <text>Add lsp-name leaf to AFT next-hop.</text>
    </description>
    <reference>
      <text>0.3.3</text>
    </reference>
  </revision>
  <revision date="2018-11-21">
    <description>
      <text>Add OpenConfig module metadata extensions.</text>
    </description>
    <reference>
      <text>0.3.2</text>
    </reference>
  </revision>
  <revision date="2017-08-24">
    <description>
      <text>Formatting fixes</text>
    </description>
    <reference>
      <text>0.3.1</text>
    </reference>
  </revision>
  <revision date="2017-05-10">
    <description>
      <text>Refactor to provide concretised per-AF schemas per AFT.</text>
    </description>
    <reference>
      <text>0.3.0</text>
    </reference>
  </revision>
  <grouping name="aft-mpls-structural">
    <description>
      <text>Structural grouping defining the schema for the MPLS
abstract forwarding table.</text>
    </description>
    <list name="label-entry">
      <key value="label"/>
      <description>
        <text>List of the MPLS entries within the abstract
forwarding table. This list is keyed by the top-most MPLS
label.</text>
      </description>
      <leaf name="label">
        <type name="leafref">
          <path value="../config/label"/>
        </type>
        <description>
          <text>Reference to the top-most MPLS label matched by the
entry.</text>
        </description>
      </leaf>
      <container name="config">
        <description>
          <text>Configuration parameters for the MPLS AFT entry.</text>
        </description>
        <uses name="aft-mpls-entry-config"/>
      </container>
      <container name="state">
        <config value="false"/>
        <description>
          <text>Operational state parameters for the MPLS AFT
entry.</text>
        </description>
        <uses name="aft-mpls-entry-config"/>
        <uses name="aft-mpls-entry-state"/>
      </container>
    </list>
  </grouping>
  <grouping name="aft-mpls-entry-config">
    <description>
      <text>Configuration parameters for the MPLS entry.</text>
    </description>
    <leaf name="label">
      <type name="oc-mplst:mpls-label"/>
      <description>
        <text>The top-most MPLS label that should be matched to
utilise the AFT entry.</text>
      </description>
    </leaf>
  </grouping>
  <grouping name="aft-mpls-entry-state">
    <description>
      <text>Operational state parameters for the MPLS entry.</text>
    </description>
    <uses name="aft-common-entry-state"/>
    <leaf-list name="popped-mpls-label-stack">
      <type name="oc-mplst:mpls-label"/>
      <description>
        <text>The MPLS label stack to be popped from the packet when
switched by the system. The stack is encoded as a leaf-list
such that the first entry is the label that is outer-most (i.e.,
furthest from the bottom of the stack).

If the local system pops the outer-most label 400, then the
value of this list is [400,]. If the local system removes two
labels, the outer-most being 500, and the second of which is
400, then the value of the list is [500, 400].

A swap operation is reflected by entries in the
popped-mpls-label-stack and pushed-mpls-label-stack nodes.</text>
      </description>
    </leaf-list>
  </grouping>
</submodule>
