<?xml version="1.0" encoding="UTF-8"?>
<module name="openconfig-lacp"
        xmlns="urn:ietf:params:xml:ns:yang:yin:1"
        xmlns:oc-lacp="http://openconfig.net/yang/lacp"
        xmlns:oc-if="http://openconfig.net/yang/interfaces"
        xmlns:oc-yang="http://openconfig.net/yang/types/yang"
        xmlns:oc-ext="http://openconfig.net/yang/openconfig-ext">
  <yang-version value="1"/>
  <namespace uri="http://openconfig.net/yang/lacp"/>
  <prefix value="oc-lacp"/>
  <import module="openconfig-interfaces">
    <prefix value="oc-if"/>
  </import>
  <import module="openconfig-yang-types">
    <prefix value="oc-yang"/>
  </import>
  <import module="openconfig-extensions">
    <prefix value="oc-ext"/>
  </import>
  <organization>
    <text>OpenConfig working group</text>
  </organization>
  <contact>
    <text>OpenConfig working group
www.openconfig.net</text>
  </contact>
  <description>
    <text>This module describes configuration and operational state
data for Link Aggregation Control Protocol (LACP) for
managing aggregate interfaces.   It works in conjunction with
the OpenConfig interfaces and aggregate interfaces models.</text>
  </description>
  <oc-ext:openconfig-version semver="1.1.0"/>
  <revision date="2017-05-05">
    <description>
      <text>Add member local and remote port num</text>
    </description>
    <reference>
      <text>1.1.0</text>
    </reference>
  </revision>
  <revision date="2016-05-26">
    <description>
      <text>OpenConfig public release</text>
    </description>
    <reference>
      <text>1.0.2</text>
    </reference>
  </revision>
  <typedef name="lacp-activity-type">
    <type name="enumeration">
      <enum name="ACTIVE">
        <description>
          <text>Interface is an active member, i.e., will detect and
maintain aggregates</text>
        </description>
      </enum>
      <enum name="PASSIVE">
        <description>
          <text>Interface is a passive member, i.e., it participates
with an active partner</text>
        </description>
      </enum>
    </type>
    <description>
      <text>Describes the LACP membership type, active or passive, of the
interface in the aggregate</text>
    </description>
    <reference>
      <text>IEEE 802.1AX-2008</text>
    </reference>
  </typedef>
  <typedef name="lacp-timeout-type">
    <type name="enumeration">
      <enum name="LONG">
        <description>
          <text>Participant wishes to use long timeouts to detect
status of the aggregate, i.e., will expect less frequent
transmissions. Long timeout is 90 seconds.</text>
        </description>
      </enum>
      <enum name="SHORT">
        <description>
          <text>Participant wishes to use short timeouts, i.e., expects
frequent transmissions to aggressively detect status
changes. Short timeout is 3 seconds.</text>
        </description>
      </enum>
    </type>
    <description>
      <text>Type of timeout used, short or long, by LACP participants</text>
    </description>
    <reference>
      <text>IEEE 802.1AX-2008</text>
    </reference>
  </typedef>
  <typedef name="lacp-synchronization-type">
    <type name="enumeration">
      <enum name="IN_SYNC">
        <description>
          <text>Participant is in sync with the system id and key
transmitted</text>
        </description>
      </enum>
      <enum name="OUT_SYNC">
        <description>
          <text>Participant is not in sync with the system id and key
transmitted</text>
        </description>
      </enum>
    </type>
    <description>
      <text>Indicates LACP synchronization state of participant</text>
    </description>
    <reference>
      <text>IEEE 802.1AX-2008</text>
    </reference>
  </typedef>
  <typedef name="lacp-period-type">
    <type name="enumeration">
      <enum name="FAST">
        <description>
          <text>Send LACP packets every second</text>
        </description>
      </enum>
      <enum name="SLOW">
        <description>
          <text>Send LACP packets every 30 seconds</text>
        </description>
      </enum>
    </type>
    <description>
      <text>Defines the period options for the time between sending
LACP messages</text>
    </description>
    <reference>
      <text>IEEE 802.3ad</text>
    </reference>
  </typedef>
  <grouping name="aggregation-lacp-members-config">
    <description>
      <text>Configuration data for lacp member interfaces</text>
    </description>
  </grouping>
  <grouping name="aggregation-lacp-members-state">
    <description>
      <text>Operational status data for the member interfaces</text>
    </description>
    <leaf name="interface">
      <type name="oc-if:base-interface-ref"/>
      <description>
        <text>Reference to interface member of the LACP aggregate</text>
      </description>
    </leaf>
    <leaf name="activity">
      <type name="lacp-activity-type"/>
      <description>
        <text>Indicates participant is active or passive</text>
      </description>
    </leaf>
    <leaf name="timeout">
      <type name="lacp-timeout-type"/>
      <description>
        <text>The timeout type (short or long) used by the
participant</text>
      </description>
    </leaf>
    <leaf name="synchronization">
      <type name="lacp-synchronization-type"/>
      <description>
        <text>Indicates whether the participant is in-sync or
out-of-sync</text>
      </description>
    </leaf>
    <leaf name="aggregatable">
      <type name="boolean"/>
      <description>
        <text>A true value indicates that the participant will allow
the link to be used as part of the aggregate. A false
value indicates the link should be used as an individual
link</text>
      </description>
    </leaf>
    <leaf name="collecting">
      <type name="boolean"/>
      <description>
        <text>If true, the participant is collecting incoming frames
on the link, otherwise false</text>
      </description>
    </leaf>
    <leaf name="distributing">
      <type name="boolean"/>
      <description>
        <text>When true, the participant is distributing outgoing
frames; when false, distribution is disabled</text>
      </description>
    </leaf>
    <leaf name="system-id">
      <type name="oc-yang:mac-address"/>
      <description>
        <text>MAC address that defines the local system ID for the
aggregate interface</text>
      </description>
    </leaf>
    <leaf name="oper-key">
      <type name="uint16"/>
      <description>
        <text>Current operational value of the key for the aggregate
interface</text>
      </description>
    </leaf>
    <leaf name="partner-id">
      <type name="oc-yang:mac-address"/>
      <description>
        <text>MAC address representing the protocol partner's interface
system ID</text>
      </description>
    </leaf>
    <leaf name="partner-key">
      <type name="uint16"/>
      <description>
        <text>Operational value of the protocol partner's key</text>
      </description>
    </leaf>
    <leaf name="port-num">
      <type name="uint16"/>
      <description>
        <text>Port number of the local (actor) aggregation member</text>
      </description>
    </leaf>
    <leaf name="partner-port-num">
      <type name="uint16"/>
      <description>
        <text>Port number of the partner (remote) port for this member
port</text>
      </description>
    </leaf>
  </grouping>
  <grouping name="aggregation-lacp-members-statistics">
    <description>
      <text>LACP packet statistics for the member interfaces</text>
    </description>
    <container name="counters">
      <description>
        <text>LACP protocol counters</text>
      </description>
      <leaf name="lacp-in-pkts">
        <type name="oc-yang:counter64"/>
        <description>
          <text>Number of LACPDUs received</text>
        </description>
      </leaf>
      <leaf name="lacp-out-pkts">
        <type name="oc-yang:counter64"/>
        <description>
          <text>Number of LACPDUs transmitted</text>
        </description>
      </leaf>
      <leaf name="lacp-rx-errors">
        <type name="oc-yang:counter64"/>
        <description>
          <text>Number of LACPDU receive packet errors</text>
        </description>
      </leaf>
      <leaf name="lacp-tx-errors">
        <type name="oc-yang:counter64"/>
        <description>
          <text>Number of LACPDU transmit packet errors</text>
        </description>
      </leaf>
      <leaf name="lacp-unknown-errors">
        <type name="oc-yang:counter64"/>
        <description>
          <text>Number of LACPDU unknown packet errors</text>
        </description>
      </leaf>
      <leaf name="lacp-errors">
        <type name="oc-yang:counter64"/>
        <description>
          <text>Number of LACPDU illegal packet errors</text>
        </description>
      </leaf>
    </container>
  </grouping>
  <grouping name="aggregation-lacp-members-top">
    <description>
      <text>Top-level grouping for aggregate members list</text>
    </description>
    <container name="members">
      <config value="false"/>
      <description>
        <text>Enclosing container for the list of members interfaces of
the aggregate. This list is considered operational state
only so is labeled config false and has no config container</text>
      </description>
      <list name="member">
        <key value="interface"/>
        <description>
          <text>List of member interfaces and their associated status for
a LACP-controlled aggregate interface.  Member list is not
configurable here -- each interface indicates items
its participation in the LAG.</text>
        </description>
        <leaf name="interface">
          <type name="leafref">
            <path value="../state/interface"/>
          </type>
          <description>
            <text>Reference to aggregate member interface</text>
          </description>
        </leaf>
        <container name="state">
          <config value="false"/>
          <description>
            <text>Operational state data for aggregate members</text>
          </description>
          <uses name="aggregation-lacp-members-state"/>
          <uses name="aggregation-lacp-members-statistics"/>
        </container>
      </list>
    </container>
  </grouping>
  <grouping name="lacp-interfaces-config">
    <description>
      <text>Configuration data for each LACP-enabled interface</text>
    </description>
    <leaf name="name">
      <type name="oc-if:base-interface-ref"/>
      <description>
        <text>Reference to the interface on which LACP should be
configured.   The type of the target interface must be
ieee8023adLag</text>
      </description>
    </leaf>
    <leaf name="interval">
      <type name="lacp-period-type"/>
      <default value="SLOW"/>
      <description>
        <text>Set the period between LACP messages -- uses
the lacp-period-type enumeration.</text>
      </description>
    </leaf>
    <leaf name="lacp-mode">
      <type name="lacp-activity-type"/>
      <default value="ACTIVE"/>
      <description>
        <text>ACTIVE is to initiate the transmission of LACP packets.
PASSIVE is to wait for peer to initiate the transmission of
LACP packets.</text>
      </description>
    </leaf>
    <leaf name="system-id-mac">
      <type name="oc-yang:mac-address"/>
      <description>
        <text>The MAC address portion of the node's System ID. This is
combined with the system priority to construct the 8-octet
system-id</text>
      </description>
    </leaf>
    <uses name="aggregation-lacp-global-config"/>
  </grouping>
  <grouping name="lacp-interfaces-state">
    <description>
      <text>Operational state data for each LACP-enabled interface</text>
    </description>
  </grouping>
  <grouping name="lacp-interfaces-top">
    <description>
      <text>Top-level grouping for LACP-enabled interfaces</text>
    </description>
    <container name="interfaces">
      <description>
        <text>Enclosing container for the list of LACP-enabled
interfaces</text>
      </description>
      <list name="interface">
        <key value="name"/>
        <description>
          <text>List of aggregate interfaces managed by LACP</text>
        </description>
        <leaf name="name">
          <type name="leafref">
            <path value="../config/name"/>
          </type>
          <description>
            <text>Reference to the list key</text>
          </description>
        </leaf>
        <container name="config">
          <description>
            <text>Configuration data for each LACP aggregate interface</text>
          </description>
          <uses name="lacp-interfaces-config"/>
        </container>
        <container name="state">
          <config value="false"/>
          <description>
            <text>Operational state data for each LACP aggregate
interface</text>
          </description>
          <uses name="lacp-interfaces-config"/>
          <uses name="lacp-interfaces-state"/>
        </container>
        <uses name="aggregation-lacp-members-top"/>
      </list>
    </container>
  </grouping>
  <grouping name="aggregation-lacp-global-config">
    <description>
      <text>Configuration data for LACP aggregate interfaces</text>
    </description>
    <leaf name="system-priority">
      <type name="uint16"/>
      <description>
        <text>Sytem priority used by the node on this LAG interface.
Lower value is higher priority for determining which node
is the controlling system.</text>
      </description>
    </leaf>
  </grouping>
  <grouping name="aggregation-lacp-global-state">
    <description>
      <text>Operational data for LACP aggregate interfaces</text>
    </description>
  </grouping>
  <grouping name="aggregation-lacp-top">
    <description>
      <text>Top level configuration and state variable containers for
LACP data</text>
    </description>
    <container name="lacp">
      <description>
        <text>Configuration and operational state data for LACP protocol
operation on the aggregate interface</text>
      </description>
      <container name="config">
        <description>
          <text>Configuration data for LACP</text>
        </description>
        <uses name="aggregation-lacp-global-config"/>
      </container>
      <container name="state">
        <config value="false"/>
        <description>
          <text>Operational state data for LACP</text>
        </description>
        <uses name="aggregation-lacp-global-config"/>
        <uses name="aggregation-lacp-global-state"/>
      </container>
      <uses name="lacp-interfaces-top"/>
    </container>
  </grouping>
  <uses name="aggregation-lacp-top"/>
</module>
