<?xml version="1.0" encoding="UTF-8"?>
<module name="openconfig-alarms"
        xmlns="urn:ietf:params:xml:ns:yang:yin:1"
        xmlns:oc-alarms="http://openconfig.net/yang/alarms"
        xmlns:oc-alarm-types="http://openconfig.net/yang/alarms/types"
        xmlns:oc-ext="http://openconfig.net/yang/openconfig-ext"
        xmlns:oc-types="http://openconfig.net/yang/openconfig-types"
        xmlns:oc-platform="http://openconfig.net/yang/platform">
  <yang-version value="1"/>
  <namespace uri="http://openconfig.net/yang/alarms"/>
  <prefix value="oc-alarms"/>
  <import module="openconfig-alarm-types">
    <prefix value="oc-alarm-types"/>
  </import>
  <import module="openconfig-extensions">
    <prefix value="oc-ext"/>
  </import>
  <import module="openconfig-types">
    <prefix value="oc-types"/>
  </import>
  <import module="openconfig-platform">
    <prefix value="oc-platform"/>
  </import>
  <organization>
    <text>OpenConfig working group</text>
  </organization>
  <contact>
    <text>OpenConfig working group
www.openconfig.net</text>
  </contact>
  <description>
    <text>This module defines operational state data related to alarms
that the device is reporting.

This model reuses some data items defined in the draft IETF
YANG Alarm Module:
https://tools.ietf.org/html/draft-vallin-netmod-alarm-module-02

Portions of this code were derived from the draft IETF YANG Alarm
Module. Please reproduce this note if possible.

IETF code is subject to the following copyright and license:
Copyright (c) IETF Trust and the persons identified as authors of
the code.
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, is permitted pursuant to, and subject to the license
terms contained in, the Simplified BSD License set forth in
Section 4.c of the IETF Trust's Legal Provisions Relating
to IETF Documents (http://trustee.ietf.org/license-info).</text>
  </description>
  <oc-ext:openconfig-version semver="0.3.0"/>
  <revision date="2018-01-16">
    <description>
      <text>Moved alarm identities into separate types module</text>
    </description>
    <reference>
      <text>0.3.0</text>
    </reference>
  </revision>
  <revision date="2018-01-10">
    <description>
      <text>Make alarms list read only</text>
    </description>
    <reference>
      <text>0.2.0</text>
    </reference>
  </revision>
  <revision date="2017-08-24">
    <description>
      <text>Initial public release</text>
    </description>
    <reference>
      <text>0.1.0</text>
    </reference>
  </revision>
  <grouping name="alarm-state">
    <description>
      <text>Operational state data for device alarms</text>
    </description>
    <leaf name="id">
      <type name="string"/>
      <description>
        <text>Unique ID for the alarm -- this will not be a
configurable parameter on many implementations</text>
      </description>
    </leaf>
    <leaf name="resource">
      <type name="string"/>
      <description>
        <text>The item that is under alarm within the device. The
resource may be a reference to an item which is
defined elsewhere in the model. For example, it
may be a platform/component, interfaces/interface,
terminal-device/logical-channels/channel, etc. In this
case the system should match the name of the referenced
item exactly. The referenced item could alternatively be
the path of the item within the model.</text>
      </description>
      <reference>
        <text>IETF YANG Alarm Module: Draft - typedef resource
https://tools.ietf.org/html/draft-vallin-netmod-alarm-module-02</text>
      </reference>
    </leaf>
    <leaf name="text">
      <type name="string"/>
      <description>
        <text>The string used to inform operators about the alarm. This
MUST contain enough information for an operator to be able
to understand the problem. If this string contains structure,
this format should be clearly documented for programs to be
able to parse that information</text>
      </description>
      <reference>
        <text>IETF YANG Alarm Module: Draft - typedef alarm-text
https://tools.ietf.org/html/draft-vallin-netmod-alarm-module-02</text>
      </reference>
    </leaf>
    <leaf name="time-created">
      <type name="oc-types:timeticks64"/>
      <description>
        <text>The time at which the alarm was raised by the system.
This value is expressed as nanoseconds since the Unix Epoch</text>
      </description>
    </leaf>
    <leaf name="severity">
      <type name="identityref">
        <base name="oc-alarm-types:OPENCONFIG_ALARM_SEVERITY"/>
      </type>
      <description>
        <text>The severity level indicating the criticality and impact
of the alarm</text>
      </description>
      <reference>
        <text>IETF YANG Alarm Module: Draft - typedef severity
https://tools.ietf.org/html/draft-vallin-netmod-alarm-module-02</text>
      </reference>
    </leaf>
    <leaf name="type-id">
      <type name="union">
        <type name="string"/>
        <type name="identityref">
          <base name="oc-alarm-types:OPENCONFIG_ALARM_TYPE_ID"/>
        </type>
      </type>
      <description>
        <text>The abbreviated name of the alarm, for example LOS,
EQPT, or OTS. Also referred to in different systems as
condition type, alarm identifier, or alarm mnemonic. It
is recommended to use the OPENCONFIG_ALARM_TYPE_ID
identities where possible and only use the string type
when the desired identityref is not yet defined</text>
      </description>
      <reference>
        <text>IETF YANG Alarm Module: Draft - typedef alarm-type-id
https://tools.ietf.org/html/draft-vallin-netmod-alarm-module-02</text>
      </reference>
    </leaf>
  </grouping>
  <grouping name="alarm-config">
    <description>
      <text>Configuration data for device alarms</text>
    </description>
  </grouping>
  <grouping name="alarms-top">
    <description>
      <text>Top-level grouping for device alarms</text>
    </description>
    <container name="alarms">
      <description>
        <text>Top-level container for device alarms</text>
      </description>
      <config value="false"/>
      <list name="alarm">
        <key value="id"/>
        <description>
          <text>List of alarms, keyed by a unique id</text>
        </description>
        <leaf name="id">
          <type name="leafref">
            <path value="../state/id"/>
          </type>
          <description>
            <text>References the unique alarm id</text>
          </description>
        </leaf>
        <container name="config">
          <description>
            <text>Configuration data for each alarm</text>
          </description>
          <uses name="alarm-config"/>
        </container>
        <container name="state">
          <config value="false"/>
          <description>
            <text>Operational state data for a device alarm</text>
          </description>
          <uses name="alarm-config"/>
          <uses name="alarm-state"/>
        </container>
      </list>
    </container>
  </grouping>
  <augment target-node="/oc-platform:components/oc-platform:component/oc-platform:state">
    <description>
      <text>Adds specific alarms related to a component.</text>
    </description>
    <leaf name="equipment-failure">
      <type name="boolean"/>
      <default value="false"/>
      <description>
        <text>If true, the hardware indicates that the component's physical equipment
has failed</text>
      </description>
    </leaf>
    <leaf name="equipment-mismatch">
      <type name="boolean"/>
      <default value="false"/>
      <description>
        <text>If true, the hardware indicates that the component inserted into the
affected component's physical location is of a different type than what
is configured</text>
      </description>
    </leaf>
  </augment>
</module>
