<?xml version="1.0" encoding="UTF-8"?>
<submodule name="huawei-diagnostic-tools-ipv4"
           xmlns="urn:ietf:params:xml:ns:yang:yin:1"
           xmlns:diagnostic-tools="urn:huawei:yang:huawei-diagnostic-tools"
           xmlns:pub-type="urn:huawei:yang:huawei-pub-type"
           xmlns:ni="urn:huawei:yang:huawei-network-instance"
           xmlns:inet="urn:ietf:params:xml:ns:yang:ietf-inet-types"
           xmlns:yang="urn:ietf:params:xml:ns:yang:ietf-yang-types"
           xmlns:ext="urn:huawei:yang:huawei-extension">
  <yang-version value="1"/>
  <belongs-to module="huawei-diagnostic-tools">
    <prefix value="diagnostic-tools"/>
  </belongs-to>
  <import module="huawei-pub-type">
    <prefix value="pub-type"/>
  </import>
  <import module="huawei-network-instance">
    <prefix value="ni"/>
  </import>
  <import module="ietf-inet-types">
    <prefix value="inet"/>
  </import>
  <import module="ietf-yang-types">
    <prefix value="yang"/>
  </import>
  <import module="huawei-extension">
    <prefix value="ext"/>
  </import>
  <include module="huawei-diagnostic-tools-common"/>
  <include module="huawei-diagnostic-tools-type"/>
  <organization>
    <text>Huawei Technologies Co., Ltd.</text>
  </organization>
  <contact>
    <text>Huawei Industrial Base
Bantian, Longgang
Shenzhen 518129
People's Republic of China
Website: http://www.huawei.com
Email: support@huawei.com</text>
  </contact>
  <description>
    <text>IPv4 diagnosis tool.</text>
  </description>
  <revision date="2019-10-29">
    <description>
      <text>Initial revision.</text>
    </description>
    <reference>
      <text>Huawei private.</text>
    </reference>
  </revision>
  <grouping name="ip-ping-trace-result-type">
    <description>
      <text>IP test result.</text>
    </description>
    <container name="ping-results">
      <config value="false"/>
      <description>
        <text>List of ping test results.</text>
      </description>
      <list name="ping-result">
        <key value="test-name"/>
        <config value="false"/>
        <description>
          <text>Statistics of ping test result.</text>
        </description>
        <leaf name="test-name">
          <type name="string">
            <length value="1..32"/>
          </type>
          <config value="false"/>
          <description>
            <text>Test name.</text>
          </description>
        </leaf>
        <leaf name="packet-recv">
          <type name="uint32">
            <range value="0..4294967295"/>
          </type>
          <config value="false"/>
          <description>
            <text>Total number of received packets.</text>
          </description>
        </leaf>
        <leaf name="packet-send">
          <type name="uint32">
            <range value="0..4294967295"/>
          </type>
          <config value="false"/>
          <description>
            <text>Total number of sent packets.</text>
          </description>
        </leaf>
        <leaf name="loss-ratio">
          <type name="pub-type:percent">
            <range value="0..100"/>
          </type>
          <units name="%"/>
          <config value="false"/>
          <description>
            <text>Packet loss ratio of a test.</text>
          </description>
        </leaf>
        <leaf name="rtt-min">
          <type name="uint32">
            <range value="0..4294967295"/>
          </type>
          <units name="ms"/>
          <config value="false"/>
          <description>
            <text>Minimum RTT of all test packets.</text>
          </description>
        </leaf>
        <leaf name="rtt-max">
          <type name="uint32">
            <range value="0..4294967295"/>
          </type>
          <units name="ms"/>
          <config value="false"/>
          <description>
            <text>Maximum RTT of all test packets.</text>
          </description>
        </leaf>
        <leaf name="average-rtt">
          <type name="uint32">
            <range value="0..4294967295"/>
          </type>
          <units name="ms"/>
          <config value="false"/>
          <description>
            <text>Average RTT of all test packets.</text>
          </description>
        </leaf>
        <leaf name="status">
          <type name="dgntl-test-status-type"/>
          <config value="false"/>
          <description>
            <text>Test status.</text>
          </description>
        </leaf>
        <leaf name="error-type">
          <type name="dgntl-error-type"/>
          <config value="false"/>
          <description>
            <text>Test operation status.</text>
          </description>
        </leaf>
        <container name="details">
          <config value="false"/>
          <description>
            <text>List of ping results of all packets in a test.</text>
          </description>
          <list name="detail">
            <key value="index"/>
            <config value="false"/>
            <description>
              <text>Statistics of probe result.</text>
            </description>
            <leaf name="index">
              <type name="uint32">
                <range value="0..4294967295"/>
              </type>
              <config value="false"/>
              <description>
                <text>Serial number of a test packet received.</text>
              </description>
            </leaf>
            <leaf name="ip-addr">
              <type name="inet:ipv4-address-no-zone"/>
              <config value="false"/>
              <description>
                <text>Reply address in a received response packet.</text>
              </description>
            </leaf>
            <leaf name="packet-size">
              <type name="uint32">
                <range value="0..4294967295"/>
              </type>
              <config value="false"/>
              <description>
                <text>Number of bytes in a received response packet.</text>
              </description>
            </leaf>
            <leaf name="ttl">
              <type name="uint8">
                <range value="1..255"/>
              </type>
              <config value="false"/>
              <description>
                <text>TTL of received response packets.</text>
              </description>
            </leaf>
            <leaf name="rtt">
              <type name="uint32">
                <range value="0..4294967295"/>
              </type>
              <units name="ms"/>
              <config value="false"/>
              <description>
                <text>RTT of test packets.</text>
              </description>
            </leaf>
            <leaf name="result-type">
              <type name="detail-result-type"/>
              <config value="false"/>
              <description>
                <text>Result of packet sending, which is either success or timeout.</text>
              </description>
            </leaf>
            <leaf name="system-time">
              <type name="yang:date-and-time"/>
              <config value="false"/>
              <description>
                <text>System time of response packets.</text>
              </description>
            </leaf>
            <leaf name="is-delete">
              <type name="boolean"/>
              <config value="false"/>
              <description>
                <text>Deletion flag indicating whether to delete test results.</text>
              </description>
            </leaf>
          </list>
        </container>
      </list>
    </container>
    <container name="trace-results">
      <config value="false"/>
      <description>
        <text>List of trace test results.</text>
      </description>
      <list name="trace-result">
        <key value="test-name"/>
        <config value="false"/>
        <description>
          <text>Statistics of trace test result.</text>
        </description>
        <leaf name="test-name">
          <type name="string">
            <length value="1..32"/>
          </type>
          <config value="false"/>
          <description>
            <text>Test name.</text>
          </description>
        </leaf>
        <leaf name="status">
          <type name="dgntl-test-status-type"/>
          <config value="false"/>
          <description>
            <text>Test status.</text>
          </description>
        </leaf>
        <leaf name="error-type">
          <type name="dgntl-error-type"/>
          <config value="false"/>
          <description>
            <text>Test operation status.</text>
          </description>
        </leaf>
        <container name="details">
          <config value="false"/>
          <description>
            <text>List of ping results of all packets in a test.</text>
          </description>
          <list name="detail">
            <key value="hop-index"/>
            <config value="false"/>
            <description>
              <text>Statistics of ping result of a single packet in a test.</text>
            </description>
            <leaf name="hop-index">
              <type name="uint32"/>
              <config value="false"/>
              <description>
                <text>Serial number of a hop in the test path. For a ping-type test such as the ping test or LSP ping test, there is only one hop in the test path, so the value is 1. For a trace-type test such as the trace test or LSP trace test, the value indicates the exact serial number of a hop in the test path.</text>
              </description>
            </leaf>
            <leaf name="ttl">
              <type name="uint8">
                <range value="1..255"/>
              </type>
              <config value="false"/>
              <description>
                <text>TTL of received response packets.</text>
              </description>
            </leaf>
            <leaf name="rtt">
              <type name="uint32"/>
              <config value="false"/>
              <description>
                <text>RTT of test packets.</text>
              </description>
            </leaf>
            <leaf name="ds-ip-addr">
              <type name="inet:ipv4-address-no-zone"/>
              <config value="false"/>
              <description>
                <text>Destination address of the related hop in a test.</text>
              </description>
            </leaf>
            <leaf name="is-delete">
              <type name="boolean"/>
              <config value="false"/>
              <description>
                <text>Deletion flag indicating whether to delete test results.</text>
              </description>
            </leaf>
          </list>
        </container>
      </list>
    </container>
  </grouping>
  <rpc name="ipv4-start-ip-ping">
    <description>
      <text>Start IPv4 ping test.</text>
    </description>
    <ext:node-ref value="/diagnostic-tools:diagnostic-tools/diagnostic-tools:ipv4/diagnostic-tools:ping-results"/>
    <input>
      <leaf name="test-name">
        <type name="string">
          <length value="1..32"/>
        </type>
        <mandatory value="true"/>
        <description>
          <text>Test name.</text>
        </description>
      </leaf>
      <leaf name="dest-addr">
        <type name="pub-type:host-name"/>
        <mandatory value="true"/>
        <description>
          <text>Destination address of the string type. You can click this node to set different types of addresses and deploy the configurations together with the configuration of the destination address type node. If the destination address type is set to IPv4, this parameter is set to IPv4. If the destination address type is set to IPv6, this parameter is set to IPv6.</text>
        </description>
      </leaf>
      <leaf name="source-address">
        <type name="inet:ipv4-address-no-zone"/>
        <description>
          <text>Source address of the string type. You can click this node to set different types of addresses and deploy the configurations together with the configuration of the source address type node. If the source address type is set to IPv4, this parameter is set to IPv4. If the source address type is set to IPv6, this parameter is set to IPv6.</text>
        </description>
      </leaf>
      <leaf name="vrf-name">
        <type name="leafref">
          <path value="/ni:network-instance/ni:instances/ni:instance/ni:name"/>
        </type>
        <description>
          <text>Name of a VPN instance.</text>
        </description>
      </leaf>
      <leaf name="packet-count">
        <type name="uint32">
          <range value="1..4294967295"/>
        </type>
        <default value="5"/>
        <description>
          <text>Number of sent test packets.</text>
        </description>
      </leaf>
      <leaf name="interval">
        <type name="uint32">
          <range value="1..10000"/>
        </type>
        <units name="ms"/>
        <default value="500"/>
        <description>
          <text>Interval for sending test packets.</text>
        </description>
      </leaf>
      <leaf name="timeout">
        <type name="uint32">
          <range value="0..65535"/>
        </type>
        <units name="ms"/>
        <default value="2000"/>
        <description>
          <text>Time to wait for a response packet after a test packet is sent. If no response packet is received within the timeout period, the system considers that the test packet times out.</text>
        </description>
      </leaf>
    </input>
  </rpc>
  <rpc name="ipv4-stop-ip-ping">
    <description>
      <text>Stop IPv4 ping test.</text>
    </description>
    <ext:node-ref value="/diagnostic-tools:diagnostic-tools/diagnostic-tools:ipv4/diagnostic-tools:ping-results"/>
    <input>
      <leaf name="test-name">
        <type name="leafref">
          <path value="/diagnostic-tools:diagnostic-tools/diagnostic-tools:ipv4/diagnostic-tools:ping-results/diagnostic-tools:ping-result/diagnostic-tools:test-name"/>
        </type>
        <mandatory value="true"/>
        <description>
          <text>Test name.</text>
        </description>
      </leaf>
    </input>
  </rpc>
  <rpc name="ipv4-delete-ip-ping">
    <description>
      <text>Delete IPv4 ping test.</text>
    </description>
    <ext:node-ref value="/diagnostic-tools:diagnostic-tools/diagnostic-tools:ipv4/diagnostic-tools:ping-results"/>
    <input>
      <leaf name="test-name">
        <type name="leafref">
          <path value="/diagnostic-tools:diagnostic-tools/diagnostic-tools:ipv4/diagnostic-tools:ping-results/diagnostic-tools:ping-result/diagnostic-tools:test-name"/>
        </type>
        <mandatory value="true"/>
        <description>
          <text>Test name.</text>
        </description>
      </leaf>
    </input>
  </rpc>
  <rpc name="ipv4-start-ip-trace">
    <description>
      <text>Start IPv4 trace test.</text>
    </description>
    <ext:node-ref value="/diagnostic-tools:diagnostic-tools/diagnostic-tools:ipv4/diagnostic-tools:trace-results"/>
    <input>
      <leaf name="test-name">
        <type name="string">
          <length value="1..32"/>
        </type>
        <mandatory value="true"/>
        <description>
          <text>Test name.</text>
        </description>
      </leaf>
      <leaf name="dest-ip-addr">
        <type name="pub-type:host-name"/>
        <mandatory value="true"/>
        <description>
          <text>Destination address of the string type. You can click this node to set different types of addresses and deploy the configurations together with the configuration of the destination address type node. If the destination address type is set to IPv4, this parameter is set to IPv4. If the destination address type is set to IPv6, this parameter is set to IPv6.</text>
        </description>
      </leaf>
      <leaf name="vrf-name">
        <type name="leafref">
          <path value="/ni:network-instance/ni:instances/ni:instance/ni:name"/>
        </type>
        <description>
          <text>Name of a VPN instance.</text>
        </description>
      </leaf>
    </input>
  </rpc>
  <rpc name="ipv4-stop-ip-trace">
    <description>
      <text>Stop IPv4 trace test.</text>
    </description>
    <ext:node-ref value="/diagnostic-tools:diagnostic-tools/diagnostic-tools:ipv4/diagnostic-tools:trace-results"/>
    <input>
      <leaf name="test-name">
        <type name="leafref">
          <path value="/diagnostic-tools:diagnostic-tools/diagnostic-tools:ipv4/diagnostic-tools:trace-results/diagnostic-tools:trace-result/diagnostic-tools:test-name"/>
        </type>
        <mandatory value="true"/>
        <description>
          <text>Test name.</text>
        </description>
      </leaf>
    </input>
  </rpc>
  <rpc name="ipv4-delete-ip-trace">
    <description>
      <text>Delete IPv4 trace test.</text>
    </description>
    <ext:node-ref value="/diagnostic-tools:diagnostic-tools/diagnostic-tools:ipv4/diagnostic-tools:trace-results"/>
    <input>
      <leaf name="test-name">
        <type name="leafref">
          <path value="/diagnostic-tools:diagnostic-tools/diagnostic-tools:ipv4/diagnostic-tools:trace-results/diagnostic-tools:trace-result/diagnostic-tools:test-name"/>
        </type>
        <mandatory value="true"/>
        <description>
          <text>Test name.</text>
        </description>
      </leaf>
    </input>
  </rpc>
  <augment target-node="/diagnostic-tools:diagnostic-tools">
    <description>
      <text>List of IPv4 tests.</text>
    </description>
    <container name="ipv4">
      <config value="false"/>
      <description>
        <text>Statistics of IPv4 tests.</text>
      </description>
      <uses name="ip-ping-trace-result-type"/>
    </container>
  </augment>
</submodule>
