<?xml version="1.0" encoding="UTF-8"?>
<module name="huawei-bd"
        xmlns="urn:ietf:params:xml:ns:yang:yin:1"
        xmlns:bd="urn:huawei:yang:huawei-bd"
        xmlns:ext="urn:huawei:yang:huawei-extension"
        xmlns:pub-type="urn:huawei:yang:huawei-pub-type"
        xmlns:ifm="urn:huawei:yang:huawei-ifm">
  <namespace uri="urn:huawei:yang:huawei-bd"/>
  <prefix value="bd"/>
  <import module="huawei-extension">
    <prefix value="ext"/>
  </import>
  <import module="huawei-pub-type">
    <prefix value="pub-type"/>
  </import>
  <import module="huawei-ifm">
    <prefix value="ifm"/>
  </import>
  <organization>
    <text>Huawei Technologies Co., Ltd.</text>
  </organization>
  <contact>
    <text>Huawei Industrial Base
Bantian, Longgang
Shenzhen 518129
People's Republic of China
Website: http://www.huawei.com
Email: support@huawei.com</text>
  </contact>
  <description>
    <text>Definition of bridge domain in the EVC model.</text>
  </description>
  <revision date="2020-03-13">
    <description>
      <text>Add leaf encapsulation.</text>
    </description>
    <reference>
      <text>Huawei private.</text>
    </reference>
  </revision>
  <revision date="2020-02-07">
    <description>
      <text>Add leaf band-width-kbps.</text>
    </description>
    <reference>
      <text>Huawei private.</text>
    </reference>
  </revision>
  <revision date="2019-12-06">
    <description>
      <text>Modify the value definition of oper-status.</text>
    </description>
    <reference>
      <text>Huawei private.</text>
    </reference>
  </revision>
  <revision date="2019-09-09">
    <description>
      <text>Initial revision.</text>
    </description>
    <reference>
      <text>Huawei private.</text>
    </reference>
  </revision>
  <ext:task-name value="bdbase"/>
  <typedef name="admin-status">
    <type name="enumeration">
      <enum name="up">
        <value value="0"/>
        <description>
          <text>BD administrative status is up.</text>
        </description>
      </enum>
      <enum name="down">
        <value value="1"/>
        <description>
          <text>BD administrative status is down.</text>
        </description>
      </enum>
    </type>
    <description>
      <text>BD administrative status.</text>
    </description>
  </typedef>
  <typedef name="oper-status">
    <type name="enumeration">
      <enum name="up">
        <value value="1"/>
        <description>
          <text>BD operating status is up.</text>
        </description>
      </enum>
      <enum name="down">
        <value value="0"/>
        <description>
          <text>BD operating status is down.</text>
        </description>
      </enum>
      <enum name="admin-down">
        <value value="2"/>
        <description>
          <text>BD operating status is admin down.</text>
        </description>
      </enum>
      <enum name="invalid">
        <value value="255"/>
        <description>
          <text>BD operating status is invalid.</text>
        </description>
      </enum>
    </type>
    <description>
      <text>BD operating status.</text>
    </description>
  </typedef>
  <typedef name="enable-status">
    <type name="enumeration">
      <enum name="enable">
        <value value="1"/>
        <description>
          <text>BD enable status is enable.</text>
        </description>
      </enum>
      <enum name="disable">
        <value value="0"/>
        <description>
          <text>BD enable status is disable.</text>
        </description>
      </enum>
    </type>
    <description>
      <text>BD enable status.</text>
    </description>
  </typedef>
  <container name="bd">
    <description>
      <text>Bridge domain configuration.</text>
    </description>
    <container name="instances">
      <description>
        <text>List of bridge domain.</text>
      </description>
      <list name="instance">
        <key value="id"/>
        <max-elements value="32768"/>
        <description>
          <text>Configure BD instance.</text>
        </description>
        <leaf name="id">
          <type name="uint32">
            <range value="1..16777215"/>
          </type>
          <description>
            <text>BD ID.</text>
          </description>
        </leaf>
        <leaf name="description">
          <type name="string">
            <length value="1..80"/>
          </type>
          <description>
            <text>BD description.</text>
          </description>
        </leaf>
        <leaf name="admin-status">
          <type name="admin-status"/>
          <default value="up"/>
          <description>
            <text>BD administrative status.</text>
          </description>
        </leaf>
        <leaf name="status">
          <type name="oper-status"/>
          <config value="false"/>
          <description>
            <text>BD status.</text>
          </description>
        </leaf>
        <leaf name="statistic-enable">
          <type name="enable-status"/>
          <default value="disable"/>
          <description>
            <text>Whether BD statistics measurement is enable.</text>
          </description>
        </leaf>
        <leaf name="statistic-discard">
          <when condition="../statistic-enable='enable'"/>
          <type name="enable-status"/>
          <default value="disable"/>
          <description>
            <text>Whether BUM discard statistics collection is enabled.</text>
          </description>
        </leaf>
        <leaf name="broadcast-discard">
          <type name="enable-status"/>
          <default value="disable"/>
          <description>
            <text>Discard broadcast packets.</text>
          </description>
        </leaf>
        <leaf name="unknown-multicast-discard">
          <type name="enable-status"/>
          <default value="disable"/>
          <description>
            <text>Discard unknown multicast packets.</text>
          </description>
        </leaf>
        <leaf name="unknown-unicast-discard">
          <type name="enable-status"/>
          <default value="disable"/>
          <description>
            <text>Discard unknown unicast packets.</text>
          </description>
        </leaf>
        <leaf name="mac-learning">
          <type name="enable-status"/>
          <default value="enable"/>
          <description>
            <text>Enable MAC address learning.</text>
          </description>
        </leaf>
        <leaf name="mac-aging-time">
          <type name="uint32">
            <range value="0|60..1000000"/>
          </type>
          <units name="s"/>
          <description>
            <text>MAC address aging time, 0 indicates that MAC addresses do not age.</text>
          </description>
        </leaf>
        <leaf name="split-horizon">
          <type name="enable-status"/>
          <default value="disable"/>
          <description>
            <text>Enable split horizon.</text>
          </description>
        </leaf>
        <leaf name="encapsulation">
          <type name="enumeration">
            <enum name="raw">
              <value value="1"/>
              <description>
                <text>Indicates the frame type in the bridge-domain is EthernetII.</text>
              </description>
            </enum>
            <enum name="tagged">
              <value value="2"/>
              <description>
                <text>Indicates the frame type in the bridge-domain is IEEE802.1Q.</text>
              </description>
            </enum>
          </type>
          <default value="raw"/>
          <description>
            <text>The bridge-domain encapsulation type.</text>
          </description>
        </leaf>
        <container name="bind-vlan">
          <description>
            <text>Configure VLANs bound by BD.</text>
          </description>
          <leaf name="vlan-list">
            <type name="pub-type:vlan-range"/>
            <description>
              <text>VLAN list. Currently, the node supports only one VLAN, and the VLAN is already created globally.</text>
            </description>
          </leaf>
        </container>
        <container name="service-points">
          <description>
            <text>List of EVC service points.</text>
          </description>
          <list name="service-point">
            <key value="interface-name"/>
            <description>
              <text>Configure EVC service information.</text>
            </description>
            <leaf name="interface-name">
              <type name="leafref">
                <path value="/ifm:ifm/ifm:interfaces/ifm:interface/ifm:name"/>
              </type>
              <must condition="/ifm:ifm/ifm:interfaces/ifm:interface[ifm:name=current()]/ifm:l2-mode-enable = 'true'"/>
              <description>
                <text>Interface name.</text>
              </description>
            </leaf>
            <leaf name="split-horizon">
              <type name="enable-status"/>
              <default value="disable"/>
              <description>
                <text>Enable split horizon.</text>
              </description>
            </leaf>
          </list>
        </container>
        <container name="statistics">
          <config value="false"/>
          <description>
            <text>Statistics of BD information.</text>
          </description>
          <leaf name="inbound-packets">
            <type name="uint64"/>
            <units name="packet"/>
            <description>
              <text>Number of inbound packets.</text>
            </description>
          </leaf>
          <leaf name="inbound-bytes">
            <type name="uint64"/>
            <units name="Byte"/>
            <description>
              <text>Number of inbound bytes.</text>
            </description>
          </leaf>
          <leaf name="outbound-packets">
            <type name="uint64"/>
            <units name="packet"/>
            <description>
              <text>Number of outbound packets.</text>
            </description>
          </leaf>
          <leaf name="outbound-bytes">
            <type name="uint64"/>
            <units name="Byte"/>
            <description>
              <text>Number of outbound bytes.</text>
            </description>
          </leaf>
          <leaf name="inbound-pps">
            <type name="uint64"/>
            <units name="pps"/>
            <description>
              <text>Rate of inbound packets.</text>
            </description>
          </leaf>
          <leaf name="inbound-bps">
            <type name="uint64"/>
            <units name="Byte/s"/>
            <description>
              <text>Rate of inbound bytes.</text>
            </description>
          </leaf>
          <leaf name="inbound-unicasts">
            <type name="uint64"/>
            <description>
              <text>Number of inbound unicasts.</text>
            </description>
          </leaf>
          <leaf name="inbound-multicasts">
            <type name="uint64"/>
            <description>
              <text>Number of inbound multicasts.</text>
            </description>
          </leaf>
          <leaf name="inbound-broadcasts">
            <type name="uint64"/>
            <description>
              <text>Number of inbound broadcasts.</text>
            </description>
          </leaf>
          <leaf name="inbound-unknown-unicast-drops">
            <type name="uint64"/>
            <description>
              <text>Number of discarded unknown unicast packets in the inbound direction.</text>
            </description>
          </leaf>
          <leaf name="inbound-unknown-multicast-drops">
            <type name="uint64"/>
            <description>
              <text>Number of discarded unknown multicast packets in the inbound direction.</text>
            </description>
          </leaf>
          <leaf name="inbound-broadcast-drops">
            <type name="uint64"/>
            <description>
              <text>Number of discarded broadcast packets in the inbound direction.</text>
            </description>
          </leaf>
          <leaf name="outbound-unicasts">
            <type name="uint64"/>
            <description>
              <text>Number of outbound unicasts.</text>
            </description>
          </leaf>
          <leaf name="outbound-multicasts">
            <type name="uint64"/>
            <description>
              <text>Number of outbound multicasts.</text>
            </description>
          </leaf>
          <leaf name="outbound-broadcasts">
            <type name="uint64"/>
            <description>
              <text>Number of outbound broadcasts.</text>
            </description>
          </leaf>
          <leaf name="outbound-pps">
            <type name="uint64"/>
            <units name="pps"/>
            <description>
              <text>Rate of outbound packets.</text>
            </description>
          </leaf>
          <leaf name="outbound-bps">
            <type name="uint64"/>
            <units name="Byte/s"/>
            <description>
              <text>Rate of outbound bytes.</text>
            </description>
          </leaf>
        </container>
        <container name="bind-service">
          <config value="false"/>
          <description>
            <text>Statistics of BD binding Information.</text>
          </description>
          <leaf name="vsi-name">
            <type name="string">
              <length value="1..31"/>
            </type>
            <description>
              <text>The VSI name bound to the BD.</text>
            </description>
          </leaf>
          <leaf name="evpn-name">
            <type name="string">
              <length value="1..31"/>
            </type>
            <description>
              <text>The EVPN name bound to the BD.</text>
            </description>
          </leaf>
          <leaf name="vni">
            <type name="uint32">
              <range value="1..16777215"/>
            </type>
            <description>
              <text>The VNI ID bound to the BD.</text>
            </description>
          </leaf>
        </container>
      </list>
    </container>
  </container>
  <augment target-node="/ifm:ifm/ifm:interfaces/ifm:interface">
    <when condition="ifm:type='Vbdif'"/>
    <description>
      <text>Extend interface attribute.</text>
    </description>
    <container name="bdif-attribute">
      <description>
        <text>Configure BDIF interface attribute.</text>
      </description>
      <choice name="band-width-type">
        <default value="band-width-mbps"/>
        <description>
          <text>BDIF interface bandwidth.</text>
        </description>
        <case name="band-width-mbps">
          <description>
            <text>BDIF interface bandwidth with mbps.</text>
          </description>
          <leaf name="band-width">
            <type name="uint32">
              <range value="1..1000000"/>
            </type>
            <units name="Mbit/s"/>
            <default value="1000"/>
            <description>
              <text>BDIF interface bandwidth.</text>
            </description>
          </leaf>
        </case>
        <case name="band-width-kbps">
          <description>
            <text>BDIF interface bandwidth with kbps.</text>
          </description>
          <leaf name="band-width-kbps">
            <type name="uint32">
              <range value="1..1000000"/>
            </type>
            <units name="kbit/s"/>
            <description>
              <text>BDIF interface bandwidth with kbps.</text>
            </description>
          </leaf>
        </case>
      </choice>
      <leaf name="damping-time">
        <type name="uint16">
          <range value="0..20"/>
        </type>
        <units name="s"/>
        <default value="0"/>
        <description>
          <text>Delay time after which a BDIF interface goes down.</text>
        </description>
      </leaf>
    </container>
  </augment>
</module>
