<?xml version="1.0" encoding="UTF-8"?>
<submodule name="huawei-diagnostic-tools-8021ag"
           xmlns="urn:ietf:params:xml:ns:yang:yin:1"
           xmlns:diagnostic-tools="urn:huawei:yang:huawei-diagnostic-tools"
           xmlns:pub-type="urn:huawei:yang:huawei-pub-type"
           xmlns:ext="urn:huawei:yang:huawei-extension">
  <yang-version value="1"/>
  <belongs-to module="huawei-diagnostic-tools">
    <prefix value="diagnostic-tools"/>
  </belongs-to>
  <import module="huawei-pub-type">
    <prefix value="pub-type"/>
  </import>
  <import module="huawei-extension">
    <prefix value="ext"/>
  </import>
  <include module="huawei-diagnostic-tools-common"/>
  <include module="huawei-diagnostic-tools-type"/>
  <organization>
    <text>Huawei Technologies Co., Ltd.</text>
  </organization>
  <contact>
    <text>Huawei Industrial Base
Bantian, Longgang
Shenzhen 518129
People's Republic of China
Website: http://www.huawei.com
Email: support@huawei.com</text>
  </contact>
  <description>
    <text>LBLT diagnosis tool.</text>
  </description>
  <revision date="2021-01-15">
    <description>
      <text>Initial revision.</text>
    </description>
    <reference>
      <text>Huawei private.</text>
    </reference>
  </revision>
  <typedef name="lblt-test-status-type">
    <type name="enumeration">
      <enum name="testing">
        <value value="0"/>
        <description>
          <text>The test is in progress.</text>
        </description>
      </enum>
      <enum name="finished">
        <value value="1"/>
        <description>
          <text>The test is finished.</text>
        </description>
      </enum>
      <enum name="stopped">
        <value value="2"/>
        <description>
          <text>The test is stopped.</text>
        </description>
      </enum>
    </type>
    <description>
      <text>Description of lblt-test-status-type.</text>
    </description>
  </typedef>
  <typedef name="lblt-error-type">
    <type name="enumeration">
      <enum name="success">
        <value value="0"/>
        <description>
          <text>The test succeeded.</text>
        </description>
      </enum>
      <enum name="timeout">
        <value value="1"/>
        <description>
          <text>The test timeout.</text>
        </description>
      </enum>
      <enum name="failed">
        <value value="2"/>
        <description>
          <text>The test failed.</text>
        </description>
      </enum>
      <enum name="local-mac">
        <value value="3"/>
        <description>
          <text>The destination address cannot be a local address.</text>
        </description>
      </enum>
      <enum name="no-mac-for-rmep">
        <value value="4"/>
        <description>
          <text>No MAC address is specified for an RMEP.</text>
        </description>
      </enum>
      <enum name="no-md-or-ma">
        <value value="5"/>
        <description>
          <text>The specified MD or MA is not exist.</text>
        </description>
      </enum>
      <enum name="mac-out-if-err">
        <value value="6"/>
        <description>
          <text>No outbound interface for the destination MAC.</text>
        </description>
      </enum>
    </type>
    <description>
      <text>Description of lblt-error-type.</text>
    </description>
  </typedef>
  <typedef name="lblt-detail-result-type">
    <type name="enumeration">
      <enum name="success">
        <value value="0"/>
        <description>
          <text>The test succeeded.</text>
        </description>
      </enum>
      <enum name="timeout">
        <value value="1"/>
        <description>
          <text>Timeout.</text>
        </description>
      </enum>
    </type>
    <description>
      <text>Description of lblt-detail-result-type.</text>
    </description>
  </typedef>
  <typedef name="lt-forward-action-type">
    <type name="enumeration">
      <enum name="forward-success">
        <value value="0"/>
        <description>
          <text>Forward packet successfully.</text>
        </description>
      </enum>
      <enum name="forward-fail">
        <value value="1"/>
        <description>
          <text>Failed to forward packets.</text>
        </description>
      </enum>
      <enum name="invalid">
        <value value="2"/>
        <description>
          <text>No action.</text>
        </description>
      </enum>
    </type>
    <description>
      <text>Description of lt-forward-action-type.</text>
    </description>
  </typedef>
  <typedef name="lt-relay-action-type">
    <type name="enumeration">
      <enum name="forward">
        <value value="0"/>
        <description>
          <text>Relay forward.</text>
        </description>
      </enum>
      <enum name="hit">
        <value value="1"/>
        <description>
          <text>Relay hit.</text>
        </description>
      </enum>
    </type>
    <description>
      <text>Description of lt-relay-action-type.</text>
    </description>
  </typedef>
  <typedef name="lt-mep-type">
    <type name="enumeration">
      <enum name="no-mep">
        <value value="0"/>
        <description>
          <text>The relay point is not MEP.</text>
        </description>
      </enum>
      <enum name="is-mep">
        <value value="1"/>
        <description>
          <text>The relay point is MEP.</text>
        </description>
      </enum>
    </type>
    <description>
      <text>Description of lt-mep-type.</text>
    </description>
  </typedef>
  <rpc name="start-lb-test">
    <description>
      <text>Start LB test.</text>
    </description>
    <ext:node-ref value="/diagnostic-tools:diagnostic-tools/diagnostic-tools:lblt/diagnostic-tools:lb-results"/>
    <input>
      <leaf name="test-name">
        <type name="string">
          <length value="1..32"/>
        </type>
        <mandatory value="true"/>
        <description>
          <text>Test name.</text>
        </description>
      </leaf>
      <leaf name="md-name">
        <type name="string">
          <length value="1..43"/>
          <pattern value="[^\?]*"/>
        </type>
        <mandatory value="true"/>
        <description>
          <text>Specify the name of a maintenance domain (MD).</text>
        </description>
      </leaf>
      <leaf name="ma-name">
        <type name="string">
          <length value="1..43"/>
          <pattern value="[^\?]*"/>
        </type>
        <mandatory value="true"/>
        <description>
          <text>Specify the name of a maintenance association (MA).</text>
        </description>
      </leaf>
      <leaf name="mep-id">
        <type name="uint16">
          <range value="1..8191"/>
        </type>
        <mandatory value="true"/>
        <description>
          <text>Specify a MEP ID.</text>
        </description>
      </leaf>
      <choice name="remote">
        <mandatory value="true"/>
        <description>
          <text>Specify the RMEP ID or MAC.</text>
        </description>
        <case name="remote-mep-id">
          <leaf name="rmep-id">
            <type name="uint16">
              <range value="1..8191"/>
            </type>
            <description>
              <text>Specify a RMEP ID.</text>
            </description>
          </leaf>
          <description>
            <text>Specify a RMEP ID.</text>
          </description>
        </case>
        <case name="remote-mac">
          <leaf name="rmep-mac">
            <type name="pub-type:mac-address"/>
            <description>
              <text>Specify the MAC of an RMEP.</text>
            </description>
          </leaf>
          <description>
            <text>Specify the MAC of an RMEP.</text>
          </description>
        </case>
      </choice>
      <leaf name="priority">
        <type name="uint8">
          <range value="0..7"/>
        </type>
        <description>
          <text>Specify the priority of packets.</text>
        </description>
      </leaf>
      <leaf name="packet-size">
        <type name="uint32">
          <range value="64..2000"/>
        </type>
        <default value="95"/>
        <description>
          <text>Number of bytes in a sent test packet.</text>
        </description>
      </leaf>
      <leaf name="count">
        <type name="uint32">
          <range value="1..4294967295"/>
        </type>
        <default value="5"/>
        <description>
          <text>Number of sent test packets.</text>
        </description>
      </leaf>
      <leaf name="timeout">
        <type name="uint32">
          <range value="1..65535"/>
        </type>
        <units name="ms"/>
        <default value="2000"/>
        <description>
          <text>Time to wait for a response packet after a test packet is sent. If no response packet is received within the timeout period, the system considers that the test packet times out.</text>
        </description>
      </leaf>
    </input>
  </rpc>
  <rpc name="stop-lb-test">
    <description>
      <text>Stop LB test.</text>
    </description>
    <ext:node-ref value="/diagnostic-tools:diagnostic-tools/diagnostic-tools:lblt/diagnostic-tools:lb-results"/>
    <input>
      <leaf name="test-name">
        <type name="leafref">
          <path value="/diagnostic-tools:diagnostic-tools/diagnostic-tools:lblt/diagnostic-tools:lb-results/diagnostic-tools:lb-result/diagnostic-tools:test-name"/>
        </type>
        <mandatory value="true"/>
        <description>
          <text>Test name.</text>
        </description>
      </leaf>
    </input>
  </rpc>
  <rpc name="delete-lb-test">
    <description>
      <text>Delete LB test.</text>
    </description>
    <ext:node-ref value="/diagnostic-tools:diagnostic-tools/diagnostic-tools:lblt/diagnostic-tools:lb-results"/>
    <input>
      <leaf name="test-name">
        <type name="leafref">
          <path value="/diagnostic-tools:diagnostic-tools/diagnostic-tools:lblt/diagnostic-tools:lb-results/diagnostic-tools:lb-result/diagnostic-tools:test-name"/>
        </type>
        <mandatory value="true"/>
        <description>
          <text>Test name.</text>
        </description>
      </leaf>
    </input>
  </rpc>
  <rpc name="start-lt-test">
    <description>
      <text>Start LT test.</text>
    </description>
    <ext:node-ref value="/diagnostic-tools:diagnostic-tools/diagnostic-tools:lblt/diagnostic-tools:lt-results"/>
    <input>
      <leaf name="test-name">
        <type name="string">
          <length value="1..32"/>
        </type>
        <mandatory value="true"/>
        <description>
          <text>Test name.</text>
        </description>
      </leaf>
      <leaf name="md-name">
        <type name="string">
          <length value="1..43"/>
          <pattern value="[^\?]*"/>
        </type>
        <mandatory value="true"/>
        <description>
          <text>Specify the name of a maintenance domain (MD).</text>
        </description>
      </leaf>
      <leaf name="ma-name">
        <type name="string">
          <length value="1..43"/>
          <pattern value="[^\?]*"/>
        </type>
        <mandatory value="true"/>
        <description>
          <text>Specify the name of a maintenance association (MA).</text>
        </description>
      </leaf>
      <leaf name="mep-id">
        <type name="uint16">
          <range value="1..8191"/>
        </type>
        <mandatory value="true"/>
        <description>
          <text>Specify a MEP ID.</text>
        </description>
      </leaf>
      <choice name="remote">
        <mandatory value="true"/>
        <description>
          <text>Specify the RMEP ID or MAC.</text>
        </description>
        <case name="remote-mep-id">
          <leaf name="rmep-id">
            <type name="uint16">
              <range value="1..8191"/>
            </type>
            <description>
              <text>Specify a RMEP ID.</text>
            </description>
          </leaf>
          <description>
            <text>Specify a RMEP ID.</text>
          </description>
        </case>
        <case name="remote-mac">
          <leaf name="rmep-mac">
            <type name="pub-type:mac-address"/>
            <description>
              <text>Specify the MAC of an RMEP.</text>
            </description>
          </leaf>
          <description>
            <text>Specify the MAC of an RMEP.</text>
          </description>
        </case>
      </choice>
      <leaf name="ttl">
        <type name="uint8">
          <range value="1..255"/>
        </type>
        <default value="64"/>
        <description>
          <text>Specify the maximum TTL value of test packets.</text>
        </description>
      </leaf>
      <leaf name="timeout">
        <type name="uint32">
          <range value="1..65535"/>
        </type>
        <units name="ms"/>
        <default value="2000"/>
        <description>
          <text>Time to wait for a response packet after a test packet is sent. If no response packet is received within the timeout period, the system considers that the test packet times out.</text>
        </description>
      </leaf>
    </input>
  </rpc>
  <rpc name="stop-lt-test">
    <description>
      <text>Stop LT test.</text>
    </description>
    <ext:node-ref value="/diagnostic-tools:diagnostic-tools/diagnostic-tools:lblt/diagnostic-tools:lt-results"/>
    <input>
      <leaf name="test-name">
        <type name="leafref">
          <path value="/diagnostic-tools:diagnostic-tools/diagnostic-tools:lblt/diagnostic-tools:lt-results/diagnostic-tools:lt-result/diagnostic-tools:test-name"/>
        </type>
        <mandatory value="true"/>
        <description>
          <text>Test name.</text>
        </description>
      </leaf>
    </input>
  </rpc>
  <rpc name="delete-lt-test">
    <description>
      <text>Delete LT test.</text>
    </description>
    <ext:node-ref value="/diagnostic-tools:diagnostic-tools/diagnostic-tools:lblt/diagnostic-tools:lt-results"/>
    <input>
      <leaf name="test-name">
        <type name="leafref">
          <path value="/diagnostic-tools:diagnostic-tools/diagnostic-tools:lblt/diagnostic-tools:lt-results/diagnostic-tools:lt-result/diagnostic-tools:test-name"/>
        </type>
        <mandatory value="true"/>
        <description>
          <text>Test name.</text>
        </description>
      </leaf>
    </input>
  </rpc>
  <augment target-node="/diagnostic-tools:diagnostic-tools">
    <description>
      <text>List of LBLT tests.</text>
    </description>
    <container name="lblt">
      <config value="false"/>
      <description>
        <text>Statistics of LBLT tests.</text>
      </description>
      <container name="lb-results">
        <description>
          <text>List of test result of LB.</text>
        </description>
        <list name="lb-result">
          <key value="test-name"/>
          <description>
            <text>Statistics of test result of LB.</text>
          </description>
          <leaf name="test-name">
            <type name="string">
              <length value="1..32"/>
            </type>
            <description>
              <text>Test name.</text>
            </description>
          </leaf>
          <leaf name="packet-receive">
            <type name="uint32">
              <range value="0..4294967295"/>
            </type>
            <description>
              <text>Total number of received packets.</text>
            </description>
          </leaf>
          <leaf name="packet-send">
            <type name="uint32">
              <range value="0..4294967295"/>
            </type>
            <description>
              <text>Total number of sent packets.</text>
            </description>
          </leaf>
          <leaf name="loss-ratio">
            <type name="pub-type:percent"/>
            <description>
              <text>Packet loss ratio of a test.</text>
            </description>
          </leaf>
          <leaf name="rtt-min">
            <type name="uint32">
              <range value="0..4294967295"/>
            </type>
            <units name="ms"/>
            <description>
              <text>Minimum RTT of all test packets.</text>
            </description>
          </leaf>
          <leaf name="rtt-max">
            <type name="uint32">
              <range value="0..4294967295"/>
            </type>
            <units name="ms"/>
            <description>
              <text>Maximum RTT of all test packets.</text>
            </description>
          </leaf>
          <leaf name="rtt-average">
            <type name="uint32">
              <range value="0..4294967295"/>
            </type>
            <units name="ms"/>
            <description>
              <text>Average RTT of all test packets.</text>
            </description>
          </leaf>
          <leaf name="status">
            <type name="lblt-test-status-type"/>
            <description>
              <text>Test status.</text>
            </description>
          </leaf>
          <leaf name="error-type">
            <type name="lblt-error-type"/>
            <description>
              <text>Path test status.</text>
            </description>
          </leaf>
          <container name="details">
            <description>
              <text>List of lb results of all packets in a test.</text>
            </description>
            <list name="detail">
              <key value="index"/>
              <description>
                <text>Statistics of lb result of a single packet in a test.</text>
              </description>
              <leaf name="index">
                <type name="uint32">
                  <range value="0..4294967295"/>
                </type>
                <description>
                  <text>Serial number of a test packet received by a certain hop.</text>
                </description>
              </leaf>
              <leaf name="rmep-mac">
                <type name="pub-type:mac-address"/>
                <description>
                  <text>MAC address of an RMEP.</text>
                </description>
              </leaf>
              <leaf name="bytes">
                <type name="uint32">
                  <range value="0..4294967295"/>
                </type>
                <description>
                  <text>Bytes of received response packets.</text>
                </description>
              </leaf>
              <leaf name="rtt">
                <type name="uint32">
                  <range value="0..4294967295"/>
                </type>
                <units name="ms"/>
                <description>
                  <text>RTT of test packets.</text>
                </description>
              </leaf>
              <leaf name="result-type">
                <type name="lblt-detail-result-type"/>
                <description>
                  <text>Result of packet sending.</text>
                </description>
              </leaf>
            </list>
          </container>
        </list>
      </container>
      <container name="lt-results">
        <description>
          <text>List of test result of LT.</text>
        </description>
        <list name="lt-result">
          <key value="test-name"/>
          <description>
            <text>Statistics of test result of LT.</text>
          </description>
          <leaf name="test-name">
            <type name="string">
              <length value="1..32"/>
            </type>
            <description>
              <text>Test name.</text>
            </description>
          </leaf>
          <leaf name="status">
            <type name="lblt-test-status-type"/>
            <description>
              <text>Test status.</text>
            </description>
          </leaf>
          <leaf name="error-type">
            <type name="lblt-error-type"/>
            <description>
              <text>Path test status.</text>
            </description>
          </leaf>
          <container name="details">
            <description>
              <text>List of LT results of all packets in a test.</text>
            </description>
            <list name="detail">
              <key value="hop-index"/>
              <description>
                <text>Statistics of LT result of a single packet in a test.</text>
              </description>
              <leaf name="hop-index">
                <type name="uint32">
                  <range value="1..4294967295"/>
                </type>
                <description>
                  <text>Hop limit of received response packets.</text>
                </description>
              </leaf>
              <leaf name="ingress-mac">
                <type name="pub-type:mac-address"/>
                <description>
                  <text>MAC of MIP or MEP configured on the ingress port.</text>
                </description>
              </leaf>
              <leaf name="ingress-port">
                <type name="string">
                  <length value="0..64"/>
                </type>
                <description>
                  <text>Ingress port name.</text>
                </description>
              </leaf>
              <leaf name="ingress-action">
                <type name="lt-forward-action-type"/>
                <description>
                  <text>Ingress port action.</text>
                </description>
              </leaf>
              <leaf name="egress-mac">
                <type name="pub-type:mac-address"/>
                <description>
                  <text>MAC of MIP or MEP configured on the egress port.</text>
                </description>
              </leaf>
              <leaf name="egress-port">
                <type name="string">
                  <length value="0..64"/>
                </type>
                <description>
                  <text>Egress port name.</text>
                </description>
              </leaf>
              <leaf name="egress-action">
                <type name="lt-forward-action-type"/>
                <description>
                  <text>Egress port action.</text>
                </description>
              </leaf>
              <leaf name="relay-action">
                <type name="lt-relay-action-type"/>
                <description>
                  <text>Action of relay equipment.</text>
                </description>
              </leaf>
              <leaf name="is-mep">
                <type name="lt-mep-type"/>
                <description>
                  <text>MEP flag.</text>
                </description>
              </leaf>
            </list>
          </container>
        </list>
      </container>
    </container>
  </augment>
</submodule>
